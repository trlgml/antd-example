(this.webpackJsonpantd_react=this.webpackJsonpantd_react||[]).push([[8],{216:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&n.test(e)};var n=/-webkit-|-moz-|-ms-/;e.exports=t.default},242:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},243:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.d(t,"a",(function(){return a}))},244:function(e,t,r){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,"a",(function(){return n}))},249:function(e,t,r){var n=r(370),a=r(371);e.exports=function(e,t,r,i){var o=!r;r||(r={});for(var s=-1,u=t.length;++s<u;){var l=t[s],c=i?i(r[l],e[l],l,r,e):void 0;void 0===c&&(c=e[l]),o?a(r,l,c):n(r,l,c)}return r}},269:function(e,t){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return r.test(e)}},282:function(e,t,r){var n=r(364);e.exports=function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},292:function(e,t,r){var n=r(384);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},309:function(e,t,r){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(244);function s(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}function u(e){return function(){var t,r=n(e);if(a()){var i=n(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)}}r.d(t,"a",(function(){return u}))},311:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}r.d(t,"a",(function(){return n}))},312:function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}r.d(t,"a",(function(){return a}))},326:function(e,t,r){var n=r(225),a=r(443),i=r(226),o=r(328),s=n?n.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return a(t,e)+"";if(o(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},329:function(e,t,r){var n=r(448),a=r(269),i=r(450);e.exports=function(e){return a(e)?i(e):n(e)}},340:function(e,t,r){"use strict";r(108),r(279)},341:function(e,t,r){"use strict";r(108),r(279)},342:function(e,t,r){"use strict";var n=r(773);t.a=n.a},344:function(e,t,r){"use strict";var n=r(774);t.a=n.a},345:function(e,t,r){"use strict";r(108),r(502),r(186)},346:function(e,t,r){"use strict";e.exports=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}},347:function(e,t,r){"use strict";var n=r(513),a=[],i=[],o=n.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function s(e){var t;(t=a.length?a.pop():new u).task=e,n(t)}function u(){this.task=null}e.exports=s,u.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(i.push(e),o())}finally{this.task=null,a[a.length]=this}}},348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,r=e.plugins;return function e(s){for(var u in s){var l=s[u];if((0,o.default)(l))s[u]=e(l);else if(Array.isArray(l)){for(var c=[],d=0,f=l.length;d<f;++d){var h=(0,a.default)(r,u,l[d],s,t);(0,i.default)(c,h||l[d])}c.length>0&&(s[u]=c)}else{var p=(0,a.default)(r,u,l,s,t);p&&(s[u]=p),s=(0,n.default)(t,u,s)}}return s}};var n=s(r(514)),a=s(r(515)),i=s(r(516)),o=s(r(517));function s(e){return e&&e.__esModule?e:{default:e}}},349:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},350:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&"text"===t)return["-webkit-text","text"]}},351:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("calc(")>-1)return o.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var n,a=r(216),i=(n=a)&&n.__esModule?n:{default:n};var o=["-webkit-","-moz-",""]},352:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map((function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")}))};var n,a=r(216),i=(n=a)&&n.__esModule?n:{default:n};var o=["-webkit-",""]},353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("cursor"===e&&a.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0}},354:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("filter(")>-1)return o.map((function(e){return t.replace(/filter\(/g,e+"filter(")}))};var n,a=r(216),i=(n=a)&&n.__esModule?n:{default:n};var o=["-webkit-",""]},355:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&n.hasOwnProperty(t))return n[t]};var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]}},356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){Object.prototype.hasOwnProperty.call(a,e)&&(r[a[e]]=n[t]||t);if("flex"===e){if(Object.prototype.hasOwnProperty.call(i,t))return void(r.msFlex=i[t]);if(o.test(t))return void(r.msFlex=t+" 1 0%");var s=t.split(/\s/);switch(s.length){case 1:return void(r.msFlex="1 1 "+t);case 2:return void(o.test(s[1])?r.msFlex=s[0]+" "+s[1]+" 0%":r.msFlex=s[0]+" 1 "+s[1]);default:r.msFlex=t}}};var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},a={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"},i={auto:"1 1 auto",inherit:"inherit",initial:"0 1 auto",none:"0 0 auto",unset:"unset"},o=/^\d+(\.\d+)?$/},357:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?r.WebkitBoxOrient="vertical":r.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?r.WebkitBoxDirection="reverse":r.WebkitBoxDirection="normal");a.hasOwnProperty(e)&&(r[a[e]]=n[t]||t)};var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"}},358:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&s.test(t))return o.map((function(e){return t.replace(s,(function(t){return e+t}))}))};var n,a=r(216),i=(n=a)&&n.__esModule?n:{default:n};var o=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi},359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,i.default)(t)&&t.indexOf("image-set(")>-1)return o.map((function(e){return t.replace(/image-set\(/g,e+"image-set(")}))};var n,a=r(216),i=(n=a)&&n.__esModule?n:{default:n};var o=["-webkit-",""]},360:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(Object.prototype.hasOwnProperty.call(n,e))for(var a=n[e],i=0,o=a.length;i<o;++i)r[a[i]]=t};var n={marginBlockStart:["WebkitMarginBefore"],marginBlockEnd:["WebkitMarginAfter"],marginInlineStart:["WebkitMarginStart","MozMarginStart"],marginInlineEnd:["WebkitMarginEnd","MozMarginEnd"],paddingBlockStart:["WebkitPaddingBefore"],paddingBlockEnd:["WebkitPaddingAfter"],paddingInlineStart:["WebkitPaddingStart","MozPaddingStart"],paddingInlineEnd:["WebkitPaddingEnd","MozPaddingEnd"],borderBlockStart:["WebkitBorderBefore"],borderBlockStartColor:["WebkitBorderBeforeColor"],borderBlockStartStyle:["WebkitBorderBeforeStyle"],borderBlockStartWidth:["WebkitBorderBeforeWidth"],borderBlockEnd:["WebkitBorderAfter"],borderBlockEndColor:["WebkitBorderAfterColor"],borderBlockEndStyle:["WebkitBorderAfterStyle"],borderBlockEndWidth:["WebkitBorderAfterWidth"],borderInlineStart:["WebkitBorderStart","MozBorderStart"],borderInlineStartColor:["WebkitBorderStartColor","MozBorderStartColor"],borderInlineStartStyle:["WebkitBorderStartStyle","MozBorderStartStyle"],borderInlineStartWidth:["WebkitBorderStartWidth","MozBorderStartWidth"],borderInlineEnd:["WebkitBorderEnd","MozBorderEnd"],borderInlineEndColor:["WebkitBorderEndColor","MozBorderEndColor"],borderInlineEndStyle:["WebkitBorderEndStyle","MozBorderEndStyle"],borderInlineEndWidth:["WebkitBorderEndWidth","MozBorderEndWidth"]}},361:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}},362:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(a.hasOwnProperty(e)&&i.hasOwnProperty(t))return n.map((function(e){return e+t}))};var n=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0}},363:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o){if("string"===typeof t&&s.hasOwnProperty(e)){var l=function(e,t){if((0,a.default)(e))return e;for(var r=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),i=0,o=r.length;i<o;++i){var s=r[i],l=[s];for(var c in t){var d=(0,n.default)(c);if(s.indexOf(d)>-1&&"order"!==d)for(var f=t[c],h=0,p=f.length;h<p;++h)l.unshift(s.replace(d,u[f[h]]+d))}r[i]=l.join(",")}return r.join(",")}(t,o),c=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return c;var d=l.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?d:(r["Webkit"+(0,i.default)(e)]=c,r["Moz"+(0,i.default)(e)]=d,l)}};var n=o(r(518)),a=o(r(216)),i=o(r(349));function o(e){return e&&e.__esModule?e:{default:e}}var s={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},u={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"}},364:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},368:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return a}));var n={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error",log:function(e,t){for(var r,n=console[e]?e:"log",a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];(r=console)[n].apply(r,["[griffith] "+t].concat(i))},debug:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[this.DEBUG].concat(t))},info:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[this.INFO].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[this.WARN].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[this.ERROR].concat(t))}},a={isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),isAndroid:/(android)/i.test(navigator.userAgent),isSafari:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)};function i(){var e=function(){if("undefined"!==typeof window)return window.MediaSource||window.WebKitMediaSource}(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!r&&!!n}function o(){var e=document.createElement("video");return Boolean(e.canPlayType("application/vnd.apple.mpegURL"))}function s(e,t){if(0===e||0===t)throw new Error("params must not be zero");var r=function e(t,r){if(!Number.isInteger(t)||!Number.isInteger(r))throw new Error("params must be interger number");return 0===t?Math.abs(r):0===r?Math.abs(t):e(r,t%r)}(e,t);return[e/r,t/r]}function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.reduce((function(e,t){return t.apply(void 0,r)}),null)}}},370:function(e,t,r){var n=r(371),a=r(284),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var o=e[t];i.call(e,t)&&a(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},371:function(e,t,r){var n=r(575);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},377:function(e,t,r){var n=r(372),a=r(586),i=r(376);e.exports=function(e){return i(e)?n(e,!0):a(e)}},379:function(e,t,r){var n=r(380),a=r(381),i=r(291),o=r(378),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=a(e);return t}:o;e.exports=s},381:function(e,t,r){var n=r(375)(Object.getPrototypeOf,Object);e.exports=n},420:function(e,t,r){"use strict";var n=r(0),a=r(16),i=r.n(a),o=r(187),s=r(64),u=r.n(s),l=r(213),c=r(194);function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=Object(l.a)("text","input");function E(e){return!!(e.prefix||e.suffix||e.allowClear)}var S=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,e);var t,r,a,o=m(s);function s(){var e;return h(this,s),(e=o.apply(this,arguments)).containerRef=n.createRef(),e.onInputMouseUp=function(t){var r;(null===(r=e.containerRef.current)||void 0===r?void 0:r.contains(t.target))&&(0,e.props.triggerFocus)()},e}return t=s,(r=[{key:"renderClearIcon",value:function(e){var t=this.props,r=t.allowClear,a=t.value,o=t.disabled,s=t.readOnly,l=t.inputType,c=t.handleReset;if(!r)return null;var d=!o&&!s&&a,h=l===b[0]?"".concat(e,"-textarea-clear-icon"):"".concat(e,"-clear-icon");return n.createElement(u.a,{onClick:c,className:i()(h,f({},"".concat(h,"-hidden"),!d)),role:"button"})}},{key:"renderSuffix",value:function(e){var t=this.props,r=t.suffix,a=t.allowClear;return r||a?n.createElement("span",{className:"".concat(e,"-suffix")},this.renderClearIcon(e),r):null}},{key:"renderLabeledIcon",value:function(e,t){var r,a=this.props,o=a.focused,s=a.value,u=a.prefix,l=a.className,d=a.size,h=a.suffix,p=a.disabled,v=a.allowClear,m=a.direction,g=a.style,y=a.readOnly,b=this.renderSuffix(e);if(!E(this.props))return Object(c.a)(t,{value:s});var S=u?n.createElement("span",{className:"".concat(e,"-prefix")},u):null,O=i()(l,"".concat(e,"-affix-wrapper"),(f(r={},"".concat(e,"-affix-wrapper-focused"),o),f(r,"".concat(e,"-affix-wrapper-disabled"),p),f(r,"".concat(e,"-affix-wrapper-sm"),"small"===d),f(r,"".concat(e,"-affix-wrapper-lg"),"large"===d),f(r,"".concat(e,"-affix-wrapper-input-with-clear-btn"),h&&v&&s),f(r,"".concat(e,"-affix-wrapper-rtl"),"rtl"===m),f(r,"".concat(e,"-affix-wrapper-readonly"),y),r));return n.createElement("span",{ref:this.containerRef,className:O,style:g,onMouseUp:this.onInputMouseUp},S,Object(c.a)(t,{style:null,value:s,className:M(e,d,p)}),b)}},{key:"renderInputWithLabel",value:function(e,t){var r,a,o=this.props,s=o.addonBefore,u=o.addonAfter,l=o.style,d=o.size,h=o.className,p=o.direction;if(!s&&!u)return t;var v="".concat(e,"-group"),m="".concat(v,"-addon"),g=s?n.createElement("span",{className:m},s):null,y=u?n.createElement("span",{className:m},u):null,b=i()("".concat(e,"-wrapper"),(f(r={},v,s||u),f(r,"".concat(v,"-rtl"),"rtl"===p),r)),E=i()(h,"".concat(e,"-group-wrapper"),(f(a={},"".concat(e,"-group-wrapper-sm"),"small"===d),f(a,"".concat(e,"-group-wrapper-lg"),"large"===d),f(a,"".concat(e,"-group-wrapper-rtl"),"rtl"===p),a));return n.createElement("span",{className:E,style:l},n.createElement("span",{className:b},g,Object(c.a)(t,{style:null}),y))}},{key:"renderTextAreaWithClearIcon",value:function(e,t){var r=this.props,a=r.value,o=r.allowClear,s=r.className,u=r.style,l=r.direction;if(!o)return Object(c.a)(t,{value:a});var d=i()(s,"".concat(e,"-affix-wrapper"),f({},"".concat(e,"-affix-wrapper-rtl"),"rtl"===l),"".concat(e,"-affix-wrapper-textarea-with-clear-btn"));return n.createElement("span",{className:d,style:u},Object(c.a)(t,{style:null,value:a}),this.renderClearIcon(e))}},{key:"render",value:function(){var e=this.props,t=e.prefixCls,r=e.inputType,n=e.element;return r===b[0]?this.renderTextAreaWithClearIcon(t,n):this.renderInputWithLabel(t,this.renderLabeledIcon(t,n))}}])&&p(t.prototype,r),a&&p(t,a),s}(n.Component),O=r(36),w=r(61),k=r(62);function T(e){return(T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var a=L(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){return!t||"object"!==T(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return"undefined"===typeof e||null===e?"":e}function j(e,t,r){if(r){var n=t;if("click"===t.type){(n=Object.create(t)).target=e,n.currentTarget=e;var a=e.value;return e.value="",r(n),void(e.value=a)}r(n)}}function M(e,t,r,n){var a;return i()(e,(P(a={},"".concat(e,"-sm"),"small"===t),P(a,"".concat(e,"-lg"),"large"===t),P(a,"".concat(e,"-disabled"),r),P(a,"".concat(e,"-rtl"),"rtl"===n),a))}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(u,e);var t,r,a,s=x(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).direction="ltr",t.focus=function(){t.input.focus()},t.saveClearableInput=function(e){t.clearableInput=e},t.saveInput=function(e){t.input=e},t.onFocus=function(e){var r=t.props.onFocus;t.setState({focused:!0},t.clearPasswordValueAttribute),r&&r(e)},t.onBlur=function(e){var r=t.props.onBlur;t.setState({focused:!1},t.clearPasswordValueAttribute),r&&r(e)},t.handleReset=function(e){t.setValue("",(function(){t.focus()})),j(t.input,e,t.props.onChange)},t.renderInput=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=t.props,u=s.className,l=s.addonBefore,c=s.addonAfter,d=s.size,f=s.disabled,h=Object(o.a)(t.props,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","inputType"]);return n.createElement("input",_({autoComplete:a.autoComplete},h,{onChange:t.handleChange,onFocus:t.onFocus,onBlur:t.onBlur,onKeyDown:t.handleKeyDown,className:i()(M(e,d||r,f,t.direction),P({},u,u&&!l&&!c)),ref:t.saveInput}))},t.clearPasswordValueAttribute=function(){t.removePasswordTimeout=setTimeout((function(){t.input&&"password"===t.input.getAttribute("type")&&t.input.hasAttribute("value")&&t.input.removeAttribute("value")}))},t.handleChange=function(e){t.setValue(e.target.value,t.clearPasswordValueAttribute),j(t.input,e,t.props.onChange)},t.handleKeyDown=function(e){var r=t.props,n=r.onPressEnter,a=r.onKeyDown;13===e.keyCode&&n&&n(e),a&&a(e)},t.renderComponent=function(e){var r=e.getPrefixCls,a=e.direction,i=e.input,o=t.state,s=o.value,u=o.focused,l=r("input",t.props.prefixCls);return t.direction=a,n.createElement(w.b.Consumer,null,(function(e){return n.createElement(S,_({size:e},t.props,{prefixCls:l,inputType:"input",value:D(s),element:t.renderInput(l,e,i),handleReset:t.handleReset,ref:t.saveClearableInput,direction:a,focused:u,triggerFocus:t.focus}))}))};var r="undefined"===typeof e.value?e.defaultValue:e.value;return t.state={value:r,focused:!1,prevValue:e.value},t}return t=u,a=[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevValue,n={prevValue:e.value};return void 0===e.value&&r===e.value||(n.value=e.value),n}}],(r=[{key:"componentDidMount",value:function(){this.clearPasswordValueAttribute()}},{key:"componentDidUpdate",value:function(){}},{key:"getSnapshotBeforeUpdate",value:function(e){return E(e)!==E(this.props)&&Object(k.a)(this.input!==document.activeElement,"Input","When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ"),null}},{key:"componentWillUnmount",value:function(){this.removePasswordTimeout&&clearTimeout(this.removePasswordTimeout)}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"setValue",value:function(e,t){void 0===this.props.value&&this.setState({value:e},t)}},{key:"render",value:function(){return n.createElement(O.a,null,this.renderComponent)}}])&&A(t.prototype,r),a&&A(t,a),u}(n.Component);I.defaultProps={type:"text"};var F=I;function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){return n.createElement(O.a,null,(function(t){var r,a=t.getPrefixCls,o=t.direction,s=e.prefixCls,u=e.className,l=void 0===u?"":u,c=a("input-group",s),d=i()(c,(B(r={},"".concat(c,"-lg"),"large"===e.size),B(r,"".concat(c,"-sm"),"small"===e.size),B(r,"".concat(c,"-compact"),e.compact),B(r,"".concat(c,"-rtl"),"rtl"===o),r),l);return n.createElement("span",{className:d,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},e.children)}))},U=r(205),z=r(331),V=r.n(z),G=r(67),W=r.n(G),H=r(189);function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},X=n.forwardRef((function(e,t){var r=n.useRef(null),a=function(t){var r=e.onChange,n=e.onSearch;t&&t.target&&"click"===t.type&&n&&n(t.target.value,t),r&&r(t)},o=function(e){var t;document.activeElement===(null===(t=r.current)||void 0===t?void 0:t.input)&&e.preventDefault()},s=function(t){var n,a=e.onSearch,i=e.loading,o=e.disabled;i||o||a&&a(null===(n=r.current)||void 0===n?void 0:n.input.value,t)},u=function(t){var r=e.enterButton,a=e.size;return r?n.createElement(w.b.Consumer,{key:"enterButton"},(function(e){return n.createElement(H.a,{className:"".concat(t,"-button"),type:"primary",size:a||e},n.createElement(W.a,null))})):n.createElement(W.a,{className:"".concat(t,"-icon"),key:"loadingIcon"})},l=function(t){var r=e.suffix,a=e.enterButton;if(e.loading&&!a)return[r,u(t)];if(a)return r;var i=n.createElement(V.a,{className:"".concat(t,"-icon"),key:"searchIcon",onClick:s});return r?[Object(c.c)(r,null,{key:"suffix"}),i]:i},d=function(t,r){var a,i=e.enterButton,l=e.disabled,d=e.addonAfter,f=e.loading,h="".concat(t,"-button");if(f&&i)return[u(t),d];if(!i)return d;var p=i,v=p.type&&!0===p.type.__ANT_BUTTON;return a=v||"button"===p.type?Object(c.a)(p,K({onMouseDown:o,onClick:s,key:"enterButton"},v?{className:h,size:r}:{})):n.createElement(H.a,{className:h,type:"primary",size:r,disabled:l,key:"enterButton",onMouseDown:o,onClick:s},!0===i?n.createElement(V.a,null):i),d?[a,Object(c.c)(d,null,{key:"addonAfter"})]:a},f=function(o){var u=o.getPrefixCls,c=o.direction,f=e.prefixCls,h=e.inputPrefixCls,p=e.enterButton,v=e.className,m=e.size,g=Y(e,["prefixCls","inputPrefixCls","enterButton","className","size"]);delete g.onSearch,delete g.loading;var y=u("input-search",f),b=u("input",h),E=function(e){var t,r;p?t=i()(y,v,(q(r={},"".concat(y,"-rtl"),"rtl"===c),q(r,"".concat(y,"-enter-button"),!!p),q(r,"".concat(y,"-").concat(e),!!e),r)):t=i()(y,v,q({},"".concat(y,"-rtl"),"rtl"===c));return t};return n.createElement(w.b.Consumer,null,(function(e){return n.createElement(F,K({ref:Object(U.a)(r,t),onPressEnter:s},g,{size:m||e,prefixCls:b,addonAfter:d(y,m||e),suffix:l(y),onChange:a,className:E(m||e)}))}))};return n.createElement(O.a,null,f)}));X.defaultProps={enterButton:!1},X.displayName="Search";var Q,Z=X,$=r(281),J="\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",ee=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],te={};function re(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&te[r])return te[r];var n=window.getComputedStyle(e),a=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),i=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),s=ee.map((function(e){return"".concat(e,":").concat(n.getPropertyValue(e))})).join(";"),u={sizingStyle:s,paddingSize:i,borderSize:o,boxSizing:a};return t&&r&&(te[r]=u),u}var ne=r(266);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var a=ce(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return le(this,r)}}function le(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(u,e);var t,r,a,s=ue(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=s.call(this,e)).saveTextArea=function(e){t.textArea=e},t.handleResize=function(e){var r=t.state.resizeStatus,n=t.props,a=n.autoSize,i=n.onResize;0===r&&("function"===typeof i&&i(e),a&&t.resizeOnNextFrame())},t.resizeOnNextFrame=function(){ne.a.cancel(t.nextFrameActionId),t.nextFrameActionId=Object(ne.a)(t.resizeTextarea)},t.resizeTextarea=function(){var e=t.props.autoSize;if(e&&t.textArea){var r=e.minRows,n=e.maxRows,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Q||((Q=document.createElement("textarea")).setAttribute("tab-index","-1"),Q.setAttribute("aria-hidden","true"),document.body.appendChild(Q)),e.getAttribute("wrap")?Q.setAttribute("wrap",e.getAttribute("wrap")):Q.removeAttribute("wrap");var a=re(e,t),i=a.paddingSize,o=a.borderSize,s=a.boxSizing,u=a.sizingStyle;Q.setAttribute("style","".concat(u,";").concat(J)),Q.value=e.value||e.placeholder||"";var l,c=Number.MIN_SAFE_INTEGER,d=Number.MAX_SAFE_INTEGER,f=Q.scrollHeight;if("border-box"===s?f+=o:"content-box"===s&&(f-=i),null!==r||null!==n){Q.value=" ";var h=Q.scrollHeight-i;null!==r&&(c=h*r,"border-box"===s&&(c=c+i+o),f=Math.max(c,f)),null!==n&&(d=h*n,"border-box"===s&&(d=d+i+o),l=f>d?"":"hidden",f=Math.min(d,f))}return{height:f,minHeight:c,maxHeight:d,overflowY:l}}(t.textArea,!1,r,n);t.setState({textareaStyles:a,resizeStatus:1},(function(){ne.a.cancel(t.resizeFrameId),t.resizeFrameId=Object(ne.a)((function(){t.setState({resizeStatus:2},(function(){t.resizeFrameId=Object(ne.a)((function(){t.setState({resizeStatus:0}),t.fixFirefoxAutoScroll()}))}))}))}))}},t.renderTextArea=function(){var e,r,a,s=t.props,u=s.prefixCls,l=s.autoSize,c=s.onResize,d=s.className,f=s.disabled,h=t.state,p=h.textareaStyles,v=h.resizeStatus,m=Object(o.a)(t.props,["prefixCls","onPressEnter","autoSize","defaultValue","allowClear","onResize"]),g=i()(u,d,(e={},r="".concat(u,"-disabled"),a=f,r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e));"value"in m&&(m.value=m.value||"");var y=ie(ie(ie({},t.props.style),p),1===v?{overflowX:"hidden",overflowY:"hidden"}:null);return n.createElement($.a,{onResize:t.handleResize,disabled:!(l||c)},n.createElement("textarea",ie({},m,{className:g,style:y,ref:t.saveTextArea})))},t.state={textareaStyles:{},resizeStatus:0},t}return t=u,(r=[{key:"componentDidMount",value:function(){this.resizeTextarea()}},{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.resizeTextarea()}},{key:"componentWillUnmount",value:function(){ne.a.cancel(this.nextFrameActionId),ne.a.cancel(this.resizeFrameId)}},{key:"fixFirefoxAutoScroll",value:function(){try{if(document.activeElement===this.textArea){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;this.textArea.setSelectionRange(e,t)}}catch(r){}}},{key:"render",value:function(){return this.renderTextArea()}}])&&oe(t.prototype,r),a&&oe(t,a),u}(n.Component);function fe(e){return(fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ye(e);if(t){var a=ye(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ge(this,r)}}function ge(e,t){return!t||"object"!==fe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(o,e);var t,r,a,i=me(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).focus=function(){t.resizableTextArea.textArea.focus()},t.saveTextArea=function(e){t.resizableTextArea=e},t.saveClearableInput=function(e){t.clearableInput=e},t.handleChange=function(e){t.setValue(e.target.value,(function(){t.resizableTextArea.resizeTextarea()})),j(t.resizableTextArea.textArea,e,t.props.onChange)},t.handleKeyDown=function(e){var r=t.props,n=r.onPressEnter,a=r.onKeyDown;13===e.keyCode&&n&&n(e),a&&a(e)},t.handleReset=function(e){t.setValue("",(function(){t.resizableTextArea.renderTextArea(),t.focus()})),j(t.resizableTextArea.textArea,e,t.props.onChange)},t.renderTextArea=function(e){return n.createElement(de,he({},t.props,{prefixCls:e,onKeyDown:t.handleKeyDown,onChange:t.handleChange,ref:t.saveTextArea}))},t.renderComponent=function(e){var r=e.getPrefixCls,a=e.direction,i=t.state.value,o=r("input",t.props.prefixCls);return n.createElement(S,he({},t.props,{prefixCls:o,direction:a,inputType:"text",value:D(i),element:t.renderTextArea(o),handleReset:t.handleReset,ref:t.saveClearableInput,triggerFocus:t.focus}))};var r="undefined"===typeof e.value?e.defaultValue:e.value;return t.state={value:r},t}return t=o,a=[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}],(r=[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return n.createElement(O.a,null,this.renderComponent)}}])&&pe(t.prototype,r),a&&pe(t,a),o}(n.Component),Ee=r(503),Se=r.n(Ee),Oe=r(506),we=r.n(Oe);function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ce=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},xe={click:"onClick",hover:"onMouseOver"},Re=n.forwardRef((function(e,t){var r=_e(Object(n.useState)(!1),2),a=r[0],s=r[1],u=function(){e.disabled||s(!a)},l=function(r){var s=r.getPrefixCls,l=e.className,c=e.prefixCls,d=e.inputPrefixCls,f=e.size,h=e.visibilityToggle,p=Ce(e,["className","prefixCls","inputPrefixCls","size","visibilityToggle"]),v=s("input",d),m=s("input-password",c),g=h&&function(t){var r,i=e.action,o=e.iconRender,s=xe[i]||"",l=(void 0===o?function(){return null}:o)(a),c=(Te(r={},s,u),Te(r,"className","".concat(t,"-icon")),Te(r,"key","passwordIcon"),Te(r,"onMouseDown",(function(e){e.preventDefault()})),Te(r,"onMouseUp",(function(e){e.preventDefault()})),r);return n.cloneElement(n.isValidElement(l)?l:n.createElement("span",null,l),c)}(m),y=i()(m,l,Te({},"".concat(m,"-").concat(f),!!f)),b=ke(ke({},Object(o.a)(p,["suffix","iconRender"])),{type:a?"text":"password",className:y,prefixCls:v,suffix:g});return f&&(b.size=f),n.createElement(F,ke({ref:t},b))};return n.createElement(O.a,null,l)}));Re.defaultProps={action:"click",visibilityToggle:!0,iconRender:function(e){return e?n.createElement(Se.a,null):n.createElement(we.a,null)}},Re.displayName="Password";var Le=Re;F.Group=N,F.Search=Z,F.TextArea=be,F.Password=Le;t.a=F},433:function(e,t,r){},439:function(e,t,r){},440:function(e,t,r){var n=r(441),a=r(329),i=r(454),o=r(456);e.exports=function(e,t,r){e=o(e);var s=(t=i(t))?a(e):0;return t&&s<t?n(t-s,r)+e:e}},441:function(e,t,r){var n=r(442),a=r(326),i=r(446),o=r(269),s=r(329),u=r(451),l=Math.ceil;e.exports=function(e,t){var r=(t=void 0===t?" ":a(t)).length;if(r<2)return r?n(t,e):t;var c=n(t,l(e/s(t)));return o(t)?i(u(c),0,e).join(""):c.slice(0,e)}},442:function(e,t){var r=Math.floor;e.exports=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=r(t/2))&&(e+=e)}while(t);return n}},443:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},446:function(e,t,r){var n=r(447);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},447:function(e,t){e.exports=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}},448:function(e,t,r){var n=r(449)("length");e.exports=n},449:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},450:function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[i,o,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),c="(?:"+[i+n+"?",n,o,s,r].join("|")+")",d=RegExp(a+"(?="+a+")|"+c+l,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},451:function(e,t,r){var n=r(452),a=r(269),i=r(453);e.exports=function(e){return a(e)?i(e):n(e)}},452:function(e,t){e.exports=function(e){return e.split("")}},453:function(e,t){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[i,o,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),c="(?:"+[i+n+"?",n,o,s,r].join("|")+")",d=RegExp(a+"(?="+a+")|"+c+l,"g");e.exports=function(e){return e.match(d)||[]}},454:function(e,t,r){var n=r(455);e.exports=function(e){var t=n(e),r=t%1;return t===t?r?t-r:t:0}},455:function(e,t,r){var n=r(270);e.exports=function(e){return e?(e=n(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},456:function(e,t,r){var n=r(326);e.exports=function(e){return null==e?"":n(e)}},498:function(e,t,r){},499:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(n=r(500))&&n.__esModule?n:{default:n};t.default=a,e.exports=a},500:function(e,t,r){"use strict";var n=r(10),a=r(15);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(0)),o=n(r(501)),s=n(r(18)),u=function(e,t){return i.createElement(s.default,Object.assign({},e,{ref:t,icon:o.default}))};u.displayName="UpOutlined";var l=i.forwardRef(u);t.default=l},501:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"}},502:function(e,t,r){},503:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(n=r(504))&&n.__esModule?n:{default:n};t.default=a,e.exports=a},504:function(e,t,r){"use strict";var n=r(10),a=r(15);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(0)),o=n(r(505)),s=n(r(18)),u=function(e,t){return i.createElement(s.default,Object.assign({},e,{ref:t,icon:o.default}))};u.displayName="EyeOutlined";var l=i.forwardRef(u);t.default=l},505:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"}},506:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(n=r(507))&&n.__esModule?n:{default:n};t.default=a,e.exports=a},507:function(e,t,r){"use strict";var n=r(10),a=r(15);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r(0)),o=n(r(508)),s=n(r(18)),u=function(e,t){return i.createElement(s.default,Object.assign({},e,{ref:t,icon:o.default}))};u.displayName="EyeInvisibleOutlined";var l=i.forwardRef(u);t.default=l},508:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"}},509:function(e,t,r){"use strict";(function(e){var n=r(69),a=r(310),i=r(184),o=r(244),s=r(53),u=r(311),l=r(242),c=r(243),d=r(312),f=r(309),h=r(0),p=r.n(h),v=r(32),m=r.n(v),g=r(510),y=r(520),b=r.n(y),E=r(563),S=r(368),O=r(522),w=r(535),k=r.n(w),T=r(536),_=r.n(T),A=r(537),C=r.n(A),x=r(365),R=r.n(x),L=r(539),P=r.n(L),D=r(541),j=r.n(D);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e){var t=String(e);return t.length<2&&(t="0"+t),t}var B=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props.value;return p.a.createElement("span",null,function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,r=Math.floor(e/60);return"".concat(F(r),":").concat(F(t))}(e))}}]),r}(p.a.Component);M(B,"propTypes",{value:m.a.number}),M(B,"defaultProps",{value:0});var N=g.StyleSheet.create({root:{display:"inline-block",width:"1.5em",height:"1.5em"},svg:{display:"block",width:"100%",height:"100%",fill:"currentColor"}});function U(e){var t=e.icon,r=e.styles,n=Object(h.cloneElement)(t,{className:Object(g.css)(N.svg)});return p.a.createElement("span",{className:Object(g.css)(N.root,r)},n)}U.propTypes={icon:m.a.element.isRequired};var z=p.a.createElement("svg",{viewBox:"0 0 20 20"},p.a.createElement("path",{d:"M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zm-.034 2.966c1.95 0 1.485 1.807 1.485 2.21 0 .116-.784 7.79-.784 7.79h-1.4S8.48 5.344 8.48 5.23c0-.417-.462-2.264 1.486-2.264zm1.057 13.522c-.294.287-.647.43-1.056.43-.41 0-.762-.142-1.058-.43-.296-.286-.444-.643-.444-1.07 0-.41.148-.762.443-1.057.294-.294.647-.44 1.057-.44.41 0 .762.142 1.056.43.296.286.443.643.443 1.07 0 .426-.147.782-.443 1.068z"})),V=p.a.createElement("svg",{viewBox:"0 0 72 72"},p.a.createElement("g",{fill:"none",fillRule:"evenodd"},p.a.createElement("circle",{cx:"36",cy:"36",r:"36",fill:"#FFF",fillOpacity:".95"}),p.a.createElement("path",{fill:"#444",fillRule:"nonzero",d:"M41.143 22.5h5.786v27h-5.786zM25.071 22.5h5.786v27h-5.786z"}))),G=p.a.createElement("svg",{viewBox:"0 0 72 72"},p.a.createElement("g",{fill:"none",fillRule:"evenodd"},p.a.createElement("circle",{cx:"36",cy:"36",r:"36",fill:"#FFF",fillOpacity:".95"}),p.a.createElement("path",{fill:"#444",fillRule:"nonzero",d:"M50.8350169,37.0602664 L29.4767217,49.9693832 C28.900608,50.3175908 28.1558807,50.1251285 27.8133266,49.5395068 C27.701749,49.3487566 27.6428571,49.1309436 27.6428571,48.9090213 L27.6428571,23.0907876 C27.6428571,22.4094644 28.1862113,21.8571429 28.8564727,21.8571429 C29.0747919,21.8571429 29.2890685,21.9170066 29.4767217,22.0304257 L50.8350169,34.9395425 C51.4111306,35.28775 51.6004681,36.0447682 51.257914,36.6303899 C51.154433,36.8072984 51.0090531,36.9550776 50.8350169,37.0602664 Z"}))),W=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("g",{fill:"none",fillRule:"evenodd"},p.a.createElement("rect",{width:"24",height:"24"}),p.a.createElement("path",{fill:"#FFF",d:"M12.4049973,3.62840003 C17.1876069,3.84468032 21,7.87252205 21,12.8096305 C21,17.8853314 16.9705627,22 12,22 C7.02943725,22 3,17.8853314 3,12.8096305 C3,12.0229797 3.624497,11.3852732 4.39485308,11.3852732 C5.16520917,11.3852732 5.78970616,12.0229797 5.78970616,12.8096305 C5.78970616,16.3120298 8.57014942,19.1512855 12,19.1512855 C15.4298506,19.1512855 18.2102938,16.3120298 18.2102938,12.8096305 C18.2102938,9.44617464 15.6460805,6.69429107 12.4049973,6.4812447 L12.4049973,8.30324795 C12.4049973,8.71101381 12.0954942,9.04157334 11.7137028,9.04157334 C11.5841406,9.04157334 11.457186,9.00268616 11.3473174,8.92934663 L6.42999892,5.64693477 C6.10624047,5.4308193 6.00781868,4.97530916 6.21016772,4.62952441 C6.26580359,4.53445089 6.34098153,4.45415835 6.42999892,4.3947374 L11.3473174,1.11232554 C11.6710759,0.896210069 12.0975703,1.00132779 12.2999193,1.34711255 C12.3685872,1.46445578 12.4049973,1.60004749 12.4049973,1.73842422 L12.4049973,3.62840003 Z"}))),H=2*Math.PI*30.5,q={"0%":{strokeDashoffset:H,transform:"rotate(0deg)"},"50%":{strokeDashoffset:H/4,transform:"rotate(90deg)"},"100%":{strokeDashoffset:H,transform:"rotate(360deg)"}},K=g.StyleSheet.create({root:{width:"4em",height:"4em"},svg:{display:"block",width:"100%",height:"100%",animationName:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},circle:{cx:"50%",cy:"50%",r:30.5,strokeDasharray:H,stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",fill:"none",transformOrigin:"center",animationName:q,animationDuration:"1.5s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}}),Y=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return p.a.createElement("div",{className:Object(g.css)(K.root)},p.a.createElement("svg",{viewBox:"0 0 64 64",className:Object(g.css)(K.svg)},p.a.createElement("circle",{className:Object(g.css)(K.circle)})))}}]),r}(h.Component),X=p.a.createContext({});X.displayName="VideoSourceContext";var Q=["ld","sd","hd"],Z=S.f.isMobile,$=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{qualities:[],currentQuality:null,format:null,sources:[],expiration:0,dataKey:null}),M(Object(o.a)(e),"setCurrentQuality",(function(t){var r=e.state.currentQuality;r!==t&&(e.setState({currentQuality:t}),e.props.onEvent(E.b.PLAYER.QUALITY_CHANGE,{prevQuality:r,quality:t}))})),M(Object(o.a)(e),"getCurrentSrc",(function(){var t=e.state,r=t.currentQuality,n=t.sources;if(0!==n.length)return(n.find((function(e){return e.quality===r}))||n[0]).source})),e}return Object(c.a)(r,[{key:"render",value:function(){var e=this.state,t=e.qualities,r=e.currentQuality,n=e.format,a=e.dataKey,i=e.sources;return p.a.createElement(X.Provider,{value:{dataKey:a,qualities:t,format:n,sources:i,currentQuality:r,currentSrc:this.getCurrentSrc(),setCurrentQuality:this.setCurrentQuality}},this.props.children)}}]),r}(p.a.Component);M($,"propTypes",{onEvent:m.a.func.isRequired,sources:m.a.object,id:m.a.string.isRequired}),M($,"getDerivedStateFromProps",(function(e,t){var r=e.sources,n=e.id;if(!r)return null;var a=Object.values(r)[0],i=a.format,o=a.play_url,l=Object(O.parse)(o).expiration,c="".concat(n,"-").concat(l);if(c==t.dataKey)return null;var d=function(e,t){var r=Object.keys(e).sort((function(e,t){return Q.indexOf(e)-Q.indexOf(t)}));return r.length>1?t?r.slice(0,1):r.filter((function(e){return"ld"!==e})):r}(r,Z),f=function(e,t){return e.map((function(e){var r=t[e],n=r.play_url,a=Object(u.a)(r,["play_url"]);return Object(s.a)(Object(s.a)({},a),{},{source:n,quality:e})}))}(d,r);return Z||"m3u8"!==i||d.unshift("auto"),{currentQuality:t.currentQuality||d[0],qualities:d,sources:f,format:i,expiration:Number(l),dataKey:c}}));var J=p.a.createContext({});J.displayName="InternalMessageContext";var ee=p.a.createContext({});ee.displayName="ExternalMessageContext";var te=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(e){var n;Object(l.a)(this,r),n=t.call(this,e),M(Object(o.a)(n),"emitEvent",(function(e,t){n.emitter.emit(e,{__type__:"event",data:t}),n.props.enableCrossWindow&&n.dispatchCrossWindowMessage(window.parent,e,t)})),M(Object(o.a)(n),"subscribeEvent",(function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.__type__,n=e.data;"event"===r&&t(n)};return n.emitter.on(e,r),{unsubscribe:function(){return n.emitter.off(e,r)}}})),M(Object(o.a)(n),"dispatchAction",(function(e,t){n.emitter.emit(e,{__type__:"action",data:t})})),M(Object(o.a)(n),"subscribeAction",(function(e,t){var r=function(e){var r=e.__type__,n=e.data;"action"===r&&t(n)};return n.emitter.on(e,r),{unsubscribe:function(){return n.emitter.off(e,r)}}})),n.emitter=new _.a;var a=n.props,i=a.id,s=a.targetOrigin,u=Object(E.c)(i,s),c=u.subscribeMessage,d=u.dispatchMessage;return n.subscribeCrossWindowMessage=c,n.dispatchCrossWindowMessage=d,n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.props.enableCrossWindow&&(this.crossWindowMessageSubscription=this.subscribeCrossWindowMessage(this.dispatchAction))}},{key:"componentWillUnmount",value:function(){this.crossWindowEventSubscription&&this.crossWindowEventSubscription.unsubscribe()}},{key:"render",value:function(){return p.a.createElement(J.Provider,{value:{emitEvent:this.emitEvent,subscribeAction:this.subscribeAction}},p.a.createElement(ee.Provider,{value:{dispatchAction:this.dispatchAction,subscribeEvent:this.subscribeEvent}},this.props.children))}}]),r}(p.a.PureComponent);M(te,"propsTypes",{id:m.a.string.isRequired,enableCrossWindow:m.a.bool,targetOrigin:m.a.string.isRequired}),M(te,"defaultProps",{targetOrigin:"*"});var re=p.a.createContext({});re.displayName="ObjectFitContext";var ne=["fill","contain","cover","none","scale-down"],ae=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{objectFit:e.props.initialObjectFit}),M(Object(o.a)(e),"setObjectFit",(function(t){ne.includes(t)&&e.state.objectFit!==t&&e.setState({objectFit:t})})),e}return Object(c.a)(r,[{key:"componentDidUpdate",value:function(e){var t=this.props.initialObjectFit;t!==e.initialObjectFit&&this.setObjectFit(t)}},{key:"render",value:function(){var e=this.state.objectFit;return p.a.createElement(re.Provider,{value:{objectFit:e,setObjectFit:this.setObjectFit}},this.props.children)}}]),r}(p.a.Component);M(ae,"propTypes",{initialObjectFit:m.a.oneOf(ne).isRequired}),M(ae,"defaultProps",{initialObjectFit:"contain"});var ie=p.a.createContext({isFullWidth:!1});ie.displayName="PositionContext";var oe=g.StyleSheet.create({root:{position:"relative",width:"100%",height:"100%"}}),se=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{videoWidth:0,videoHeight:0,isFullWidth:!1,helperImageSrc:null}),M(Object(o.a)(e),"ref",p.a.createRef()),M(Object(o.a)(e),"startObservingResize",(function(){var t=e.ref.current;t&&C()(t,e.updateIsFullWidth)})),M(Object(o.a)(e),"updateHelperImageSrc",(function(){var t=e.state,r=t.videoWidth,n=t.videoHeight;if(r&&n){var a=Object(S.d)(r,n),o=Object(i.a)(a,2),s=o[0],u=o[1],l=document.createElement("canvas");l.width=s,l.height=u;var c=l.toDataURL();e.setState({helperImageSrc:c})}})),M(Object(o.a)(e),"updateIsFullWidth",(function(){var t=e.state,r=t.videoWidth,n=t.videoHeight;if(r&&n){var a=e.ref.current;if(a){var i=a.getBoundingClientRect(),o=i.width/i.height-r/n<=.01;o!==e.state.isFullWidth&&e.setState({isFullWidth:o})}}})),M(Object(o.a)(e),"triggerUpdateIsFullWidth",(function(){return requestAnimationFrame(e.updateIsFullWidth)})),M(Object(o.a)(e),"updateVideoSize",(function(t){var r=t.videoWidth,n=t.videoHeight;e.setState({videoWidth:r,videoHeight:n})})),e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.props.shouldObserveResize&&this.startObservingResize(),this.triggerUpdateIsFullWidth(),this.updateHelperImageSrc()}},{key:"componentDidUpdate",value:function(e,t){var r=e.shouldObserveResize,n=t.videoWidth,a=t.videoHeight,i=this.props.shouldObserveResize,o=this.state,s=o.videoWidth,u=o.videoHeight;n===s&&a===u||(this.triggerUpdateIsFullWidth(),this.updateHelperImageSrc()),!r&&i&&this.startObservingResize(),r&&!i&&this.stopObservingResize()}},{key:"componentWillUnmount",value:function(){this.stopObservingResize()}},{key:"stopObservingResize",value:function(){var e=this.ref.current;e&&C.a.unbind(e)}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.isFullWidth,n=t.helperImageSrc;return p.a.createElement(ie.Provider,{value:{isFullWidth:r,helperImageSrc:n,updateVideoSize:this.updateVideoSize}},p.a.createElement("div",{className:Object(g.css)(oe.root),ref:this.ref},e))}}]),r}(p.a.PureComponent);M(se,"propTypes",{shouldObserveResize:m.a.bool});var ue=[[E.b.DOM.PLAY,"onPlay"],[E.b.DOM.PLAYING,"onPlaying"],[E.b.DOM.PAUSE,"onPause"],[E.b.DOM.ENDED,"onEnded"],[E.b.DOM.TIMEUPDATE,"onTimeUpdate"],[E.b.DOM.ERROR,"onError"],[E.b.DOM.WAITING,"onWaiting"]];var le=p.a.forwardRef((function(e,t){return p.a.createElement(ie.Consumer,null,(function(r){var n=r.updateVideoSize;return p.a.createElement(re.Consumer,null,(function(r){var a=r.objectFit;return p.a.createElement(J.Consumer,null,(function(r){return function(r,n,a){var o={};ue.map((function(t){var n=Object(i.a)(t,2),a=n[0],s=n[1],u=e[s];o[s]=Object(S.e)((function(e){return r(a,function(e){var t,r=e.currentTarget,n=r.currentTime,a=r.duration,i=r.error;return{currentTime:n,duration:a,error:(t=i,t?{code:t.code,messge:t.messge,name:t.name}:null)}}(e))}),u||k.a)}));var s=Object(S.e)((function(e){var t=e.currentTarget;if(t){var r=t.videoWidth,n=t.videoHeight;a({videoWidth:r,videoHeight:n})}}),e.onLoadedMetadata||k.a),l=e.Video,c=Object(u.a)(e,["Video"]);return p.a.createElement(l,I({},c,o,{ref:t,style:{objectFit:n},onLoadedMetadata:s}))}(r.emitEvent,a,n)}))}))}))})),ce={pluginName:"native",VideoComponent:function(e){var t=e.onRef,r=(e.paused,e.currentQuality,e.sources,Object(u.a)(e,["onRef","paused","currentQuality","sources"]));return p.a.createElement("video",I({},r,{ref:t}))}};function de(e,t){if("m3u8"===e){if("undefined"!==typeof __WITHOUT_HLSJS__&&__WITHOUT_HLSJS__)return ce;if(Object(S.b)()&&!Object(S.a)())return r(564).default}if("mp4"===e){if("undefined"!==typeof __WITHOUT_MP4__&&__WITHOUT_MP4__)return ce;if(Object(S.b)()&&t)return r(566).default}return ce}var fe=g.StyleSheet.create({root:{display:"block",width:"100%",height:"100%"}}),he=S.f.isMobile,pe=function(e){return e&&"AbortError"===e.name||e instanceof MediaError&&e.code===MediaError.MEDIA_ERR_ABORTED},ve=function(e){return e&&"NotAllowedError"===e.name},me=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"isMetadataLoaded",!1),M(Object(o.a)(e),"pendingAction",null),M(Object(o.a)(e),"loading",!1),M(Object(o.a)(e),"root",null),M(Object(o.a)(e),"safeExecute",(function(t){void 0!==e.playPromise?e.playPromise.then((function(){t()})):t()})),M(Object(o.a)(e),"handleMetadataLoaded",(function(){e.isMetadataLoaded=!0,e.applyPendingAction()})),M(Object(o.a)(e),"handleError",(function(){var t=e.props.onError;t&&t(e.root.error)})),M(Object(o.a)(e),"handleDurationChange",(function(){var t=e.props.onDurationChange;t&&t(e.root.duration)})),M(Object(o.a)(e),"handleWaiting",(function(){e.loading||(e.loading=!0),e.props.onWaiting()})),M(Object(o.a)(e),"handlePlaying",(function(){e.loading&&(e.loading=!1),e.props.onPlaying()})),M(Object(o.a)(e),"handleTimeUpdate",(function(t){var r=e.props,n=r.onTimeUpdate,a=r.paused;if(e.disposeTimer(),!a&&!e.loading){var i=(e.root||{}).currentTime;if(n&&i)n(i,"number"===typeof t),he||(e._playTimer=window.requestAnimationFrame(e.handleTimeUpdate))}})),M(Object(o.a)(e),"handleProgress",(function(){for(var t=e.props.onProgress,r=e.root.buffered,n=[],a=0;a<r.length;a++)n.push({start:r.start(a),end:r.end(a)});t&&t(n)})),M(Object(o.a)(e),"handleError",(function(){var t=e.root||{},r=t.error,n=t.currentTime;if(r){var a=r.code,i=r.message,o=r.name;S.c.debug("Error: %o",{code:a,message:i,name:o}),ve(r)||pe(r)||e.props.onEvent(E.b.PLAYER.PLAY_FAILED,{currentTime:n}),e.props.onError(r)}})),e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.root.volume=Math.pow(this.props.volume,2)}},{key:"getSnapshotBeforeUpdate",value:function(){return{paused:this.root.paused,currentTime:this.root.currentTime}}},{key:"componentDidUpdate",value:function(e,t,r){var n=this,a=this.props,i=a.src,o=a.paused,s=a.volume,u=a.format,l=a.useMSE;e.src&&i!==e.src&&(de(u,l).willHandleSrcChange||this.safeExecute((function(){n.isMetadataLoaded=!1,n.seek(r.currentTime),r.paused||n.play()})));o!==e.paused&&o!==this.root.paused&&(o?this.pause():this.play()),this.root.volume===Math.pow(s,2)||he||(this.root.volume=Math.pow(s,2))}},{key:"pending",value:function(e){this.pendingAction=Object(s.a)(Object(s.a)({},this.pendingAction),e)}},{key:"applyPendingAction",value:function(){if(this.pendingAction){var e=this.pendingAction;this.pendingAction=null,void 0!==e.currentTime&&this.seek(e.currentTime),void 0!==e.paused&&e.paused!==this.root.paused&&(e.paused?this.pause():this.play())}}},{key:"play",value:function(){var e=this;if(!he&&!this.isMetadataLoaded)return this.pending({paused:!1}),void(this.root.load&&this.safeExecute((function(){return e.root.load()})));this.playPromise=Promise.resolve(this.root.play()).catch((function(t){var r=e.props.onError;r&&r(t)}))}},{key:"pause",value:function(){var e=this;he||this.isMetadataLoaded?this.safeExecute((function(){return e.root.pause()})):this.pending({paused:!0})}},{key:"seek",value:function(e){Number.isFinite(e)&&(this.isMetadataLoaded?this.root.duration&&(this.root.currentTime=e):this.pending({currentTime:e}))}},{key:"disposeTimer",value:function(){window.cancelAnimationFrame(this._playTimer)}},{key:"render",value:function(){var e=this,t=this.props,r=t.src,n=t.controls,a=t.paused,i=t.volume,o=t.onPlay,s=t.onPause,u=t.onEnded,l=t.onLoadedData,c=t.onSeeking,d=t.onSeeked,f=t.format,h=t.useMSE,v=t.sources,m=t.currentQuality,y=de(f,h).VideoComponent;return p.a.createElement(le,{onRef:function(t){e.root=t},className:Object(g.css)(fe.root),preload:"metadata",playsInline:!0,"webkit-playsinline":"","x-webkit-airplay":"deny",muted:!i,controls:n,src:r,onPlay:o,onPause:s,onEnded:u,onLoadedData:l,onSeeking:c,onSeeked:d,onClick:this.handleClick,onLoadedMetadata:this.handleMetadataLoaded,onError:this.handleError,onDurationChange:this.handleDurationChange,onTimeUpdate:this.handleTimeUpdate,onProgress:this.handleProgress,onWaiting:this.handleWaiting,onPlaying:this.handlePlaying,paused:a,sources:v,currentQuality:m,Video:y})}}]),r}(h.Component);M(me,"propTypes",{controls:m.a.bool,paused:m.a.bool,volume:m.a.number,onPlay:m.a.func,onPause:m.a.func,onEnded:m.a.func,onLoadedData:m.a.func,onDurationChange:m.a.func,onTimeUpdate:m.a.func,onWaiting:m.a.func,onPlaying:m.a.func,onSeeking:m.a.func,onSeeked:m.a.func,onProgress:m.a.func,onError:m.a.func.isRequired,onEvent:m.a.func.isRequired}),M(me,"defaultProps",{src:null,paused:!0,volume:.5});var ge=p.a.forwardRef((function(e,t){return p.a.createElement(X.Consumer,null,(function(r){var n=r.currentSrc,a=r.sources,i=r.currentQuality,o=r.format;return p.a.createElement(me,I({ref:t},e,{src:n,format:o,sources:a,currentQuality:i}))}))})),ye=13,be=32,Ee=37,Se=38,Oe=39,we=40,ke=48,Te=49,_e=50,Ae=51,Ce=52,xe=53,Re=54,Le=55,Pe=56,De=57,je=70,Me=74,Ie=75,Fe=76,Be=77,Ne=g.StyleSheet.create({root:{display:"flex",alignItems:"center",height:"2.5em",padding:"0 0.5em"},button:{display:"block",width:"2.5em",height:"2.5em",margin:0,padding:"0.5em",border:"none",borderRadius:0,fontSize:"inherit",color:"rgba(255, 255, 255, 0.7)",background:"none",cursor:"pointer",transition:"color 300ms",":hover":{color:"#fff"},":focus":{outline:"none"}},menuContainer:{position:"relative"},menu:{position:"absolute",left:"50%",bottom:"100%",visibility:"hidden",opacity:0,transform:"translateX(-50%)",transition:"visibility 300ms, opacity 300ms",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"4px"},menuShown:{visibility:"visible",opacity:1},timeline:{flex:1},time:{padding:"0 0.5em",width:"100px",textAlign:"center",fontSize:"0.875em",lineHeight:2.5,color:"rgba(255, 255, 255, 0.9)"},qualityButton:{width:"auto",lineHeight:1.5},qualityButtonText:{fontSize:"0.875em"},qualityMenu:{padding:"0.25em 0"},qualityMenuItem:{display:"block",height:"2em",margin:0,padding:"0 0.75em",border:"none",borderRadius:0,fontSize:"0.875em",lineHeight:2,whiteSpace:"nowrap",color:"rgba(255, 255, 255, 0.5)",background:"none",cursor:"pointer",transition:"color 300ms, background-color 300ms",":hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"},":focus":{outline:"none"}},qualityMenuActiveItem:{color:"#fff"},fullScreenTooltip:{pointerEvents:"none"},fullScreenedTime:{width:"150px"},fullScreenTooltipWide:{left:"30%"}}),Ue=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M20,10 L20,5 C20,4.44771525 19.5490248,4 19.009222,4 L14,4 L14,6 L18,6 L18,10 L20,10 Z M19.7115371,19.7068284 C19.8902571,19.5277733 20,19.2813055 20,19.009222 L20,14 L18,14 L18,18 L14,18 L14,20 L19.009222,20 C19.2776249,20 19.5240668,19.8893106 19.7040291,19.7101145 L19.7115371,19.7068284 Z M6,18 L6,14 L4,14 L4,19.009222 C4,19.2813055 4.10974288,19.5277733 4.28846285,19.7068284 C4.47593315,19.8893106 4.72237506,20 4.99077797,20 L10,20 L10,18 L6,18 Z M4.28846285,4.29317155 C4.10974288,4.47222673 4,4.71869448 4,4.99077797 L4,10 L6,10 L6,6 L10,6 L10,4 L4.99077797,4 C4.72237506,4 4.47593315,4.11068941 4.29597088,4.28988548 L4.28846285,4.29317155 Z"})),ze=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M7.38001507,9.5 L5,9.5 L5,12.0119396 L5,14.5238791 L8.33098415,14.5238791 L8.33098415,14.5238791 C8.39017333,14.520451 8.4497727,14.5223174 8.50904598,14.5296109 C8.72475585,14.5524598 8.91816198,14.6424266 9.06920843,14.7779841 L13,17.4293365 L13,15.1199849 L7.38001507,9.5 Z M15,17.1199849 L15,19.251289 C15,19.8045373 14.5522847,20.25 14,20.25 C13.98423,20.25 13.9685502,20.2496405 13.9529683,20.2489292 C13.7472793,20.2584936 13.5372091,20.2041245 13.3535806,20.0802655 L8.08102098,16.5238791 L4.00000001,16.5238791 C3.71994909,16.5238791 3.46994918,16.4119504 3.29196292,16.2310404 C3.11117675,16.0497507 3,15.7991447 3,15.5223056 L3,12.0119396 L3,8.50157356 C3,8.2247344 3.11117675,7.97412842 3.29196292,7.79283868 C3.46994918,7.61192872 3.71994909,7.5 4.00000001,7.5 L5.38001507,7.5 L3.38382011,5.50380504 C2.99233448,5.1123194 2.98883249,4.48109777 3.38207944,4.08785081 C3.77260374,3.69732652 4.3999302,3.691488 4.79803367,4.08959148 L18.936688,18.2282458 C19.3281736,18.6197314 19.3316756,19.250953 18.9384286,19.6442 C18.5479043,20.0347243 17.9205779,20.0405628 17.5224744,19.6424593 L15,17.1199849 Z M10.792179,8.08373676 L9.35149599,6.64305379 L13.3535806,3.94361361 C13.5372091,3.81975463 13.7472793,3.76538554 13.9529683,3.77494994 C13.9685502,3.77423867 13.98423,3.77387913 14,3.77387913 C14.5522847,3.77387913 15,4.21934183 15,4.77259008 L15,12.0119396 L15,12.2915578 L13,10.2915578 L13,6.59454265 L10.792179,8.08373676 Z M18.0173138,15.3088716 C18.8917509,14.408489 19.4301566,13.1799808 19.4301566,11.8257212 C19.4301566,10.2214787 18.6746368,8.79369726 17.5,7.87877967 L17.5067574,7.87009164 C17.2041341,7.69816923 17,7.37292366 17,7 C17,6.44771525 17.4477153,6 18,6 C18.2836948,6 18.5397977,6.11813499 18.721799,6.30789526 L18.7279374,6.30000305 C20.3724289,7.58088767 21.4301566,9.57978168 21.4301566,11.8257212 C21.4301566,13.7322659 20.6679517,15.4607882 19.431636,16.7231938 L18.0173138,15.3088716 Z"})),Ve=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M9,5 C10,5 10,6 10,6 C10,6 10,17 10,18 C10,19 9,19 9,19 L7,19 C6,19 6,18 6,18 L6,6 C6,5 7,5 7,5 C7,5 8,5 9,5 Z M17,5 C18,5 18,6 18,6 C18,6 18,17 18,18 C18,19 17,19 17,19 L15,19 C14,19 14,18 14,18 L14,6 C14,5 15,5 15,5 C15,5 16,5 17,5 Z"})),Ge=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M8.03610236,19.7012935 C6.93281899,20.3993842 6,19.8347521 6,18.4154722 L6,5.59575582 C6,4.14567779 6.91151094,3.59901121 8.03610236,4.30993442 L18.1645278,10.7185093 C19.2678112,11.4166 19.2891193,12.5817954 18.1645278,13.2927186 L8.03610236,19.7012935 Z"})),We=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M14.2884629,14.2931716 C14.1097429,14.4722267 14,14.7186945 14,14.990778 L14,20 L16,20 L16,16 L20,16 L20,14 L14.990778,14 C14.7223751,14 14.4759332,14.1106894 14.2959709,14.2898855 L14.2884629,14.2931716 Z M16,8 L16,4 L14,4 L14,9.00922203 C14,9.28130552 14.1097429,9.52777327 14.2884629,9.70682845 C14.4759332,9.88931059 14.7223751,10 14.990778,10 L20,10 L20,8 L16,8 Z M8,16 L8,20 L10,20 L10,14.990778 C10,14.7186945 9.89025712,14.4722267 9.71153715,14.2931716 C9.52406685,14.1106894 9.27762494,14 9.00922203,14 L4,14 L4,16 L8,16 L8,16 Z M9.71153715,9.70682845 C9.89025712,9.52777327 10,9.28130552 10,9.00922203 L10,4 L8,4 L8,8 L4,8 L4,10 L9.00922203,10 C9.27762494,10 9.52406685,9.88931059 9.70402912,9.71011452 L9.71153715,9.70682845 Z"})),He=p.a.createElement("svg",{viewBox:"0 0 24 24"},p.a.createElement("path",{d:"M5,12.0119396 L5,14.5238791 L8.33098415,14.5238791 L8.33098415,14.5238791 C8.39017333,14.520451 8.4497727,14.5223174 8.50904598,14.5296109 C8.72475585,14.5524598 8.91816198,14.6424266 9.06920843,14.7779841 L13,17.4293365 L13,12.0119396 L13,6.59454265 L9.06920843,9.24589504 C8.91816198,9.38145255 8.72475585,9.47141933 8.50904598,9.49426822 C8.4497727,9.50156175 8.39017333,9.5034281 8.33098415,9.5 L8.33098415,9.5 L5,9.5 L5,12.0119396 Z M3,12.0119396 L3,8.50157356 C3,8.2247344 3.11117675,7.97412842 3.29196292,7.79283868 C3.46994918,7.61192872 3.71994909,7.5 4.00000001,7.5 L8.08102098,7.5 L13.3535806,3.94361361 C13.5372091,3.81975463 13.7472793,3.76538554 13.9529683,3.77494994 C13.9685502,3.77423867 13.98423,3.77387913 14,3.77387913 C14.5522847,3.77387913 15,4.21934183 15,4.77259008 L15,12.0119396 L15,19.251289 C15,19.8045373 14.5522847,20.25 14,20.25 C13.98423,20.25 13.9685502,20.2496405 13.9529683,20.2489292 C13.7472793,20.2584936 13.5372091,20.2041245 13.3535806,20.0802655 L8.08102098,16.5238791 L4.00000001,16.5238791 C3.71994909,16.5238791 3.46994918,16.4119504 3.29196292,16.2310404 C3.11117675,16.0497507 3,15.7991447 3,15.5223056 L3,12.0119396 Z M17.5059844,15.7803571 L17.5,15.7726628 C18.6746368,14.8577452 19.4301566,13.4299638 19.4301566,11.8257212 C19.4301566,10.2214787 18.6746368,8.79369726 17.5,7.87877967 L17.5067574,7.87009164 C17.2041341,7.69816923 17,7.37292366 17,7 C17,6.44771525 17.4477153,6 18,6 C18.2836948,6 18.5397977,6.11813499 18.721799,6.30789526 L18.7279374,6.30000305 C20.3724289,7.58088767 21.4301566,9.57978168 21.4301566,11.8257212 C21.4301566,14.0716608 20.3724289,16.0705548 18.7279374,17.3514394 L18.7211832,17.3427554 C18.5392202,17.5321404 18.283375,17.6500092 18,17.6500092 C17.4477153,17.6500092 17,17.2022939 17,16.6500092 C17,16.2774031 17.2037866,15.9523939 17.5059844,15.7803571 L17.5059844,15.7803571 Z"})),qe=function(e){var t=e.isPlaying,r=e.onClick;return p.a.createElement("div",{className:Object(g.css)(Ne.toggle)},p.a.createElement("button",{className:Object(g.css)(Ne.button),onClick:r},p.a.createElement(U,{icon:t?Ve:Ge})))};function Ke(e,t){return t?"".concat(100*P()(e/t,0,1),"%"):"0%"}var Ye=g.StyleSheet.create({root:{overflow:"hidden",userSelect:"none",cursor:"pointer",touchAction:"none",WebkitTapHighlightColor:"transparent",":focus":{outline:"none"}},inner:{position:"relative",display:"flex",alignItems:"center",width:"100%",height:"100%"},track:{position:"relative",flex:1,overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px"},bar:{position:"absolute",backgroundColor:"#fff",borderRadius:"2px 0 0 2px"},thumbWrapper:{position:"absolute"},thumb:{width:"1em",height:"1em",margin:"-0.5em",borderRadius:"50%",backgroundColor:"#fff"}}),Xe=g.StyleSheet.create({root:{height:"1em",padding:"0 0.5em"},inner:{flexDirection:"row"},track:{height:4},bar:{top:0,bottom:0},thumbWrapper:{top:"50%"}}),Qe=g.StyleSheet.create({root:{width:"1em",padding:"0.5em 0"},inner:{flexDirection:"column"},track:{width:4},bar:{left:0,right:0},thumbWrapper:{left:"50%"}}),Ze=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isSlideActive:!1,isSliding:!1,slidingValue:null}),M(Object(o.a)(e),"trackRef",p.a.createRef()),M(Object(o.a)(e),"handleKeyDown",(function(t){var r=e.props,n=r.reverse,a=r.value,i=r.total,o=r.step,s=0;t.keyCode!==Ee&&t.keyCode!==we||(s=-1),t.keyCode!==Oe&&t.keyCode!==Se||(s=1),n&&(s=-s);var u=P()(a+o*s,0,i);u!==a&&(t.preventDefault(),e.handleChange(u))})),M(Object(o.a)(e),"handleDragStart",(function(t){if(0===t.button){var r=e.getSlidingValue(t);e.setState({isSlideActive:!0,slidingValue:r});var n=e.props.onDragStart;n&&n(),e.handleChange(r),e.registerEvents()}})),M(Object(o.a)(e),"handleDragMove",(function(t){var r=e.getSlidingValue(t);e.setState({slidingValue:r,isSliding:!0}),e.handleChange(r)})),M(Object(o.a)(e),"handleDragEnd",(function(t){e.unregisterEvents();var r=e.props.onDragEnd;r&&r(),e.state.isSliding&&e.handleChange(e.getSlidingValue(t)),e.setState({isSlideActive:!1,slidingValue:null,isSliding:!1})})),M(Object(o.a)(e),"handleChange",(function(t){var r=e.props.onChange;r&&r(t)})),e}return Object(c.a)(r,[{key:"registerEvents",value:function(){document.addEventListener("mousemove",this.handleDragMove),document.addEventListener("mouseup",this.handleDragEnd)}},{key:"unregisterEvents",value:function(){document.removeEventListener("mousemove",this.handleDragMove),document.removeEventListener("mouseup",this.handleDragEnd)}},{key:"getVariantStyleSheet",value:function(){return"horizontal"===this.props.orientation?Xe:Qe}},{key:"getStyles",value:function(e){var t=this.props.styles;return Array.isArray(t)||(t=[t]),t=t.filter(Boolean),[Ye[e],this.getVariantStyleSheet()[e]].concat(Object(a.a)(t.map((function(t){return t[e]}))))}},{key:"getClassName",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g.css.apply(void 0,Object(a.a)(Array.prototype.concat.apply([],r.map((function(t){return e.getStyles(t)})))))}},{key:"getAlignKey",value:function(){var e=this.props,t=e.orientation,r=e.reverse;return"horizontal"===t?r?"right":"left":r?"top":"bottom"}},{key:"getSizeKey",value:function(){return"horizontal"===this.props.orientation?"width":"height"}},{key:"getPercentage",value:function(){var e=this.props,t=e.value,r=e.total,n=this.state,a=n.isSlideActive,i=n.slidingValue;return Ke(a?i:t,r)}},{key:"getBufferedPercentage",value:function(){var e=this.props;return Ke(e.buffered,e.total)}},{key:"getSlidingValue",value:function(e){var t=this.props,r=t.orientation,n=t.reverse,a=t.total,i=this.trackRef.current;if(!i)return 0;var o,s=i.getBoundingClientRect();return o="horizontal"===r?(e.clientX-s.left)/s.width:(s.bottom-e.clientY)/s.height,o=P()(o,0,1),n&&(o=1-o),o*a}},{key:"render",value:function(){var e,t,r=this.props,a=r.buffered,i=r.onFocus,o=r.onBlur,s=r.noInteraction,u=this.state.isSlideActive,l=s?{}:{tabIndex:0,onFocus:i,onBlur:o,onKeyDown:this.handleKeyDown,onMouseDown:this.handleDragStart};return p.a.createElement("div",I({className:this.getClassName("root")},l),p.a.createElement("div",{className:this.getClassName("inner")},p.a.createElement("div",{ref:this.trackRef,className:this.getClassName("track")},Boolean(a)&&p.a.createElement("div",{className:this.getClassName("bar","buffered"),style:(e={},Object(n.a)(e,this.getAlignKey(),0),Object(n.a)(e,this.getSizeKey(),this.getBufferedPercentage()),e)}),p.a.createElement("div",{className:this.getClassName("bar"),style:(t={},Object(n.a)(t,this.getAlignKey(),0),Object(n.a)(t,this.getSizeKey(),this.getPercentage()),t)})),!s&&p.a.createElement("div",{className:this.getClassName("thumbWrapper"),style:Object(n.a)({},this.getAlignKey(),this.getPercentage())},p.a.createElement("div",{className:this.getClassName("thumb",u&&"thumbSliding")}))))}}]),r}(h.Component);M(Ze,"propTypes",{orientation:m.a.oneOf(["horizontal","vertical"]),reverse:m.a.bool,value:m.a.number,buffered:m.a.number,total:m.a.number,step:m.a.number,onFocus:m.a.func,onBlur:m.a.func,onDragStart:m.a.func,onDragEnd:m.a.func,onChange:m.a.func,noInteraction:m.a.bool}),M(Ze,"defaultProps",{orientation:"horizontal",reverse:!1,value:0,buffered:0,total:0,step:1});var $e=g.StyleSheet.create({}),Je=g.StyleSheet.create({root:{height:40},track:{transition:"transform 300ms"},bar:{backgroundColor:"#0f88eb"},thumb:{transform:"scale(0)",transition:"transform 300ms"},buffered:{backgroundColor:"rgba(255, 255, 255, 0.6)",borderRadius:"2px 0 0 2px"}}),et=g.StyleSheet.create({thumb:{transform:"scale(1)"}}),tt=g.StyleSheet.create({root:{position:"absolute",bottom:0,left:0,right:0,padding:0,height:"3px"},track:{borderRadius:0},thumb:{display:"none"},buffered:{backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px 0 0 2px"}}),rt=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isHovered:!1,isFocused:!1,isDragging:!1}),M(Object(o.a)(e),"root",null),M(Object(o.a)(e),"handlePointerEnter",(function(){e.setState({isHovered:!0})})),M(Object(o.a)(e),"handlePointerLeave",(function(){e.setState({isHovered:!1,isFocused:!1})})),M(Object(o.a)(e),"handleFocus",(function(){e.setState({isFocused:!0})})),M(Object(o.a)(e),"handleBlur",(function(){e.setState({isFocused:!1})})),M(Object(o.a)(e),"handleDragStart",(function(){e.setState({isDragging:!0});var t=e.props.onDragStart;t&&t()})),M(Object(o.a)(e),"handleDragEnd",(function(){e.setState({isDragging:!1});var t=e.props.onDragEnd;t&&t()})),M(Object(o.a)(e),"handleChange",(function(t){var r=e.props,n=r.onSeek,a=r.onChange;n&&t!==e.props.value&&a(t),e.state.isDragging||n&&n(t)})),e}return Object(c.a)(r,[{key:"render",value:function(){var e=this.state,t=e.isHovered,r=e.isFocused,n=e.isDragging;return p.a.createElement("div",{className:Object(g.css)($e.root),onMouseEnter:this.handlePointerEnter,onMouseLeave:this.handlePointerLeave},p.a.createElement(Ze,I({},this.props,{styles:[Je,(t||r||n)&&et],onFocus:this.handleFocus,onBlur:this.handleBlur,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onChange:this.handleChange})))}}]),r}(h.Component);M(rt,"propTypes",{onDragStart:m.a.func,onDragEnd:m.a.func,onChange:m.a.func,onSeek:m.a.func});var nt=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"shouldComponentUpdate",value:function(e){return this.props.show||e.show}},{key:"render",value:function(){var e=this.props,t=e.duration,r=e.currentTime,n=e.buffered;return p.a.createElement(Ze,{value:r,total:t,buffered:n,styles:[Je,tt],noInteraction:!0})}}]),r}(h.Component);M(nt,"propTypes",{duration:m.a.number.isRequired,currentTime:m.a.number.isRequired,buffered:m.a.number.isRequired,show:m.a.bool}),M(nt,"defaultProps",{duration:0,currentTime:0,buffered:0});var at=function(e){return p.a.createElement("div",{className:Object(g.css)(Ne.timeline)},p.a.createElement(rt,e))},it=function(e){var t=e.isFullScreen,r=e.currentTime,n=e.duration;return p.a.createElement("div",{className:Object(g.css)(Ne.time,t&&Ne.fullScreenedTime)},p.a.createElement("div",{className:Object(g.css)(Ne.timeText)},p.a.createElement(B,{value:r})," / ",p.a.createElement(B,{value:n})))},ot=p.a.createContext("en");ot.displayName="LocaleContext";var st={en:{"quality-auto":"Auto","quality-ld":"LD","quality-sd":"SD","quality-hd":"HD","action-enter-fullscreen":"Fullscreen","action-exit-fullscreen":"Exit Fullscreen"},ja:{"quality-auto":"\u81ea\u52d5","quality-ld":"\u4f4e\u753b\u8cea","quality-sd":"\u6a19\u6e96\u753b\u8cea","quality-hd":"\u9ad8\u753b\u8cea","action-enter-fullscreen":"\u5168\u753b\u9762","action-exit-fullscreen":"\u5168\u753b\u9762\u7d42\u4e86"},"zh-Hans":{"quality-auto":"\u81ea\u52a8","quality-ld":"\u4f4e\u6e05","quality-sd":"\u6807\u6e05","quality-hd":"\u8d85\u6e05","action-enter-fullscreen":"\u5168\u5c4f","action-exit-fullscreen":"\u9000\u51fa\u5168\u5c4f"},"zh-Hant":{"quality-auto":"\u81ea\u52d5","quality-ld":"\u4f4e\u756b\u8cea","quality-sd":"\u6a19\u6e96\u756b\u8cea","quality-hd":"\u9ad8\u756b\u8cea","action-enter-fullscreen":"\u5168\u87a2\u5e55","action-exit-fullscreen":"\u7d50\u675f\u5168\u87a2\u5e55"}},ut=function(e){var t=e.name;return p.a.createElement(ot.Consumer,null,(function(e){return st[e][t]}))},lt={auto:"quality-auto",ld:"quality-ld",sd:"quality-sd",hd:"quality-hd"},ct=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isQualityHovered:!1}),M(Object(o.a)(e),"handleQualityPointerEnter",(function(){e.setState({isQualityHovered:!0})})),M(Object(o.a)(e),"handleQualityPointerLeave",(function(){e.setState({isQualityHovered:!1})})),e}return Object(c.a)(r,[{key:"render",value:function(){var e=this,t=this.state.isQualityHovered;return p.a.createElement(X.Consumer,null,(function(r){var n,a=r.qualities,i=r.setCurrentQuality,o=r.currentQuality;return a.length>1&&p.a.createElement("div",{className:Object(g.css)(Ne.menuContainer),onMouseEnter:e.handleQualityPointerEnter,onMouseLeave:e.handleQualityPointerLeave},p.a.createElement("button",{className:Object(g.css)(Ne.button,Ne.qualityButton)},p.a.createElement("span",{className:Object(g.css)(Ne.qualityButtonText)},p.a.createElement(ut,{name:lt[o]}))),p.a.createElement("div",{className:Object(g.css)(Ne.menu,t&&Ne.menuShown)},p.a.createElement("div",{className:Object(g.css)(Ne.qualityMenu)},(n=a,n.slice().reverse()).map((function(e){return p.a.createElement("button",{key:e,className:Object(g.css)(Ne.qualityMenuItem,o===e&&Ne.qualityMenuActiveItem),onClick:function(){return i(e)}},p.a.createElement(ut,{name:lt[e]}))})))))}))}}]),r}(p.a.PureComponent),dt=g.StyleSheet.create({root:{padding:"0.375em 0"}}),ft=g.StyleSheet.create({root:{width:"2.5em",height:"4em"},track:{margin:"-0.4em 0",transform:"translate3d(0, 0, 0)"},thumb:{transform:"scale(0.8)",transition:"transform 300ms",":hover":{transform:"scale(1)"}},thumbSliding:{transform:"scale(1)"}}),ht=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){return p.a.createElement("div",{className:Object(g.css)(dt.root)},p.a.createElement(Ze,I({},this.props,{styles:ft,orientation:"vertical",step:.1})))}}]),r}(h.Component),pt=function(e){var t=e.volume,r=e.menuShown,n=e.onMouseEnter,a=e.onMouseLeave,i=e.onDragStart,o=e.onDragEnd,s=e.onChange,u=e.onToggleMuted;return p.a.createElement("div",{className:Object(g.css)(Ne.menuContainer),onMouseEnter:n,onMouseLeave:a},p.a.createElement("button",{className:Object(g.css)(Ne.button),onClick:u},p.a.createElement(U,{icon:0===t?ze:He})),p.a.createElement("div",{className:Object(g.css)(Ne.menu,r&&Ne.menuShown)},p.a.createElement(ht,{value:t,total:1,onDragStart:i,onDragEnd:o,onChange:s})))},vt=g.StyleSheet.create({root:{padding:"0.25em 0.5em",fontSize:"0.875em",whiteSpace:"nowrap",color:"#fff"}}),mt=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props.content;return p.a.createElement("div",{className:Object(g.css)(vt.root)},p.a.createElement(ut,{name:e}))}}]),r}(h.Component);M(mt,"propTypes",{content:m.a.string.isRequired});var gt=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isHovered:!1}),M(Object(o.a)(e),"handlePointerEnter",(function(){e.setState({isHovered:!0})})),M(Object(o.a)(e),"handlePointerLeave",(function(){e.setState({isHovered:!1})})),e}return Object(c.a)(r,[{key:"render",value:function(){var e=this.props,t=e.onMouseEnter,r=e.onMouseLeave,n=e.children,a=Object(u.a)(e,["onMouseEnter","onMouseLeave","children"]),i=this.state.isHovered;return p.a.createElement("div",I({},a,{onMouseEnter:Object(S.e)(this.handlePointerEnter,t||k.a),onMouseLeave:Object(S.e)(this.handlePointerLeave,r||k.a)}),n(i))}}]),r}(p.a.Component),yt=S.f.isMobile,bt=function(e){var t=e.isFullScreen,r=e.onClick;return p.a.createElement(gt,{className:Object(g.css)(Ne.menuContainer)},(function(e){return p.a.createElement(p.a.Fragment,null,p.a.createElement("button",{className:Object(g.css)(Ne.button),onClick:r},p.a.createElement(U,{icon:t?We:Ue})),p.a.createElement("div",{className:Object(g.css)(Ne.fullScreenTooltip,Ne.menu,e&&Ne.menuShown,t&&Ne.fullScreenTooltipWide)},!yt&&p.a.createElement(mt,{content:t?"action-exit-fullscreen":"action-enter-fullscreen"})))}))},Et=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isVolumeHovered:!1,isVolumeDragging:!1,isVolumeKeyboard:!1}),M(Object(o.a)(e),"prevVolume",1),M(Object(o.a)(e),"firstKey",!0),M(Object(o.a)(e),"slideTime",null),M(Object(o.a)(e),"onDragMove",(function(t){var r=e.props.duration;t=P()(t,0,r),e.setState({slideTime:t})})),M(Object(o.a)(e),"handleToggle",(function(t){var r=e.props,n=r.isPlaying,a=r.onPlay,i=r.onPause;!n&&a&&a(t),n&&i&&i(t)})),M(Object(o.a)(e),"handleSeek",(function(t){var r=e.props,n=r.duration,a=r.onSeek;t=P()(t,0,n),a&&(a(t),e.setState({slideTime:null}))})),M(Object(o.a)(e),"handleVolumeChange",(function(t){t=P()(t,0,1);var r=e.props.onVolumeChange;r&&r(t)})),M(Object(o.a)(e),"handleToggleMuted",(function(){var t=e.props.volume;t&&(e.prevVolume=t),e.handleVolumeChange(t?0:e.prevVolume)})),M(Object(o.a)(e),"handleVolumePointerEnter",(function(){e.setState({isVolumeHovered:!0})})),M(Object(o.a)(e),"handleVolumePointerLeave",(function(){e.setState({isVolumeHovered:!1})})),M(Object(o.a)(e),"handleVolumeDragStart",(function(){var t=e.props.volume;t&&(e.prevVolume=t),e.setState({isVolumeDragging:!0});var r=e.props.onDragStart;r&&r()})),M(Object(o.a)(e),"handleVolumeDragEnd",(function(){e.setState({isVolumeDragging:!1});var t=e.props.onDragEnd;t&&t()})),M(Object(o.a)(e),"handleKeyDown",(function(t){var r=e.props,n=r.duration,a=r.currentTime,i=r.volume,o=r.show,s=r.onToggleFullScreen,u=!0;switch(t.keyCode){case be:case Ie:e.firstKey&&e.handleToggle("keyCode");break;case ye:case je:e.firstKey&&s();break;case Ee:e.handleSeek(a-5);break;case Oe:e.handleSeek(a+5);break;case Me:e.firstKey&&e.handleSeek(a-10);break;case Fe:e.firstKey&&e.handleSeek(a+10);break;case ke:case Te:case _e:case Ae:case Ce:case xe:case Re:case Le:case Pe:case De:if(o&&e.firstKey){var l=n/10*(t.keyCode-ke);e.handleSeek(l)}break;case Be:e.firstKey&&e.handleToggleMuted();break;case Se:e.firstKey&&i&&(e.prevVolume=i),e.setState({isVolumeKeyboard:!0}),e.handleVolumeChange(i+.05);break;case we:e.firstKey&&i&&(e.prevVolume=i),e.handleVolumeChange(i-.05);break;default:u=!1}u&&t.preventDefault(),e.firstKey=!1})),M(Object(o.a)(e),"handleKeyUp",(function(t){switch(e.firstKey=!0,t.keyCode){case Se:case we:e.handleVolumeKeyboard()}})),M(Object(o.a)(e),"handleVolumeKeyboard",R()((function(){e.setState({isVolumeKeyboard:!1})}),1e3)),e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.props.standalone&&(document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp))}},{key:"shouldComponentUpdate",value:function(e){return this.props.show||e.show}},{key:"componentWillUnmount",value:function(){this.props.standalone&&(document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp))}},{key:"render",value:function(){var e=this,t=this.props,r=t.isPlaying,n=t.buffered,a=t.duration,i=t.currentTime,o=t.volume,s=t.isFullScreen,u=t.onDragStart,l=t.onDragEnd,c=t.onToggleFullScreen,d=t.hiddenVolumeItem,f=t.hiddenQualityMenu,h=this.state,v=h.isVolumeHovered,m=h.isVolumeDragging,y=h.isVolumeKeyboard,b=h.slideTime||i;return p.a.createElement("div",{className:Object(g.css)(Ne.root,s&&Ne.fullScreened)},p.a.createElement(qe,{isPlaying:r,onClick:function(){return e.handleToggle("button")}}),p.a.createElement(at,{value:i,total:a,buffered:n,onDragStart:u,onDragEnd:l,onChange:this.onDragMove,onSeek:this.handleSeek}),p.a.createElement(it,{isFullScreen:s,currentTime:b,duration:a}),!f&&p.a.createElement(ct,null),!d&&p.a.createElement(pt,{volume:o,menuShown:v||m||y,onMouseEnter:this.handleVolumePointerEnter,onMouseLeave:this.handleVolumePointerLeave,onToggleMuted:this.handleToggleMuted,onDragStart:this.handleVolumeDragStart,onDragEnd:this.handleVolumeDragEnd,onChange:this.handleVolumeChange}),p.a.createElement(bt,{isFullScreen:s,onClick:c}))}}]),r}(h.Component);M(Et,"propTypes",{standalone:m.a.bool,isPlaying:m.a.bool,duration:m.a.number,currentTime:m.a.number,volume:m.a.number,buffered:m.a.number,isFullScreen:m.a.bool,onDragStart:m.a.func,onDragEnd:m.a.func,onPlay:m.a.func,onPause:m.a.func,onSeek:m.a.func,onQualityChange:m.a.func,onVolumeChange:m.a.func,onToggleFullScreen:m.a.func,show:m.a.bool,hiddenQualityMenu:m.a.bool,hiddenVolumeItem:m.a.bool}),M(Et,"defaultProps",{standalone:!1,isPlaying:!1,duration:0,currentTime:0,volume:.5,buffered:0,isFullScreen:!1,hiddenVolumeItem:!1,hiddenQualityMenu:!1});var St,Ot={store:{},setItem:function(e,t){this.store[e]=t},removeItem:function(e){return delete this.store[e]},getItem:function(e){return this.store[e]}},wt={isSupported:j()((function(){try{var t={key:"__test_support_key__",value:"__test_support_value__"},r=Boolean(e.localStorage);return localStorage.setItem(t.key,t.value),localStorage.removeItem(t.key),r}catch(n){return!1}})),getStorage:j()((function(){return wt.isSupported()?localStorage:Ot})),set:function(e,t){wt.getStorage().setItem(e,JSON.stringify(t))},get:function(e){try{var t=wt.getStorage().getItem(e);return JSON.parse(t)}catch(r){return null}},delete:function(e){wt.getStorage().removeItem(e)}},kt={mobile:"26em"},Tt=g.StyleSheet.create({root:{position:"relative",overflow:"hidden",userSelect:"none",width:"100%",height:"100%",fontSize:16,backgroundColor:"#000",":focus":{outline:"none"}},fullScreened:{fontSize:24},actionButton:{width:"4.5em",height:"4.5em"},actionButtonAnimated:{animationName:{"0%":{opacity:0,transform:"scale(0)"},"50%":{opacity:.6,transform:"scale(0.8)"},"100%":{opacity:0,transform:"scale(1)"}},animationDuration:"600ms",animationFillMode:"both"},actionIcon:Object(n.a)({width:"4.5em",height:"4.5em"},(St="mobile","@media screen and (max-width: ".concat(kt[St],")")),{transform:"scale(0.75)"}),video:{width:"100%",height:"100%"},overlay:{position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"},overlayMask:{background:"rgba(0, 0, 0, 0.08)"},loader:{position:"absolute",left:"50%",top:"50%",color:"#0f88eb",transform:"translate(-50%, -50%)"},action:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},backdrop:{position:"absolute",left:0,right:0,top:0,bottom:0},title:{position:"absolute",left:0,right:0,top:0,overflow:"hidden",padding:"0 1em",lineHeight:2.5,textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#fff",backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))",transform:"translateY(-100%)",transition:"transform 300ms"},titleShown:{transform:"translateY(0)"},controller:{position:"absolute",left:0,right:0,bottom:0,backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3))"},cover:{position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden",backgroundColor:"#000",cursor:"pointer",visibility:"hidden",opacity:0,transition:"visibility 300ms, opacity 300ms"},coverShown:{visibility:"visible",opacity:1},coverImage:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},coverTime:{position:"absolute",right:"0.5em",bottom:"0.5em",padding:"0.375em",fontSize:"0.875em",lineHeight:1,color:"rgba(255, 255, 255, 0.9)",backgroundColor:"transparent",textShadow:"0 0 6px rgba(0, 0, 0, 0.4)"},coverTimeMobile:{padding:0},coverAction:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},coverReplayAction:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.16)",animationName:{"0%":{opacity:0},"100%":{opacity:1}},animationDuration:"600ms",animationFillMode:"both"},coverReplayButton:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",height:"40px",width:"116px",margin:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"4px",color:"#fff",fontSize:"16px",lineHeight:"24px",padding:"8px",boxSizing:"border-box",textAlign:"center",transition:"transform 200ms, opacity 200ms",willChange:"transform"},coverReplayButtonHovered:{transform:"scale(1.1)"},coverReplayButtonPressed:{opacity:"0.7"},replayIcon:{verticalAlign:"top",marginRight:"4px"},error:{position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",color:"#fff",backgroundColor:"#000"},errorIcon:{width:"2.5em",height:"2.5em",margin:"0 auto",fill:"currentColor"},errorMessage:{marginTop:"1em",fontSize:"1.25em",lineHeight:1,textAlign:"center"}}),_t=g.StyleSheet.create({base:{transition:"opacity .5s ease-in-out, visibility .5s ease-in-out"},hidden:{opacity:0,visibility:"hidden"},shown:{opacity:1,visibility:"visible"}}),At=S.f.isMobile,Ct=function(e){Object(d.a)(r,e);var t=Object(f.a)(r);function r(){var e;Object(l.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),M(Object(o.a)(e),"state",{isPlaybackStarted:!1,isNeverPlayed:!0,lastAction:null,isDataLoaded:!1,isPlaying:!1,isLoading:!1,duration:0,currentTime:0,volume:.5,buffered:[],isControllerShown:!1,isControllerHovered:!1,isControllerDragging:!1,type:null,hovered:!1,pressed:!1}),M(Object(o.a)(e),"isSeeking",!1),M(Object(o.a)(e),"showLoaderTimeout",null),M(Object(o.a)(e),"hideControllerTimeout",null),M(Object(o.a)(e),"playerRef",p.a.createRef()),M(Object(o.a)(e),"videoRef",p.a.createRef()),M(Object(o.a)(e),"setDocumentTitle",(function(){var t=e.props,r=t.title;t.standalone&&"string"===typeof r&&r!==document.title&&(document.title=r)})),M(Object(o.a)(e),"handlePauseAction",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.dontApplyOnFullScreen;e.state.isPlaying&&(r&&Boolean(b.a.element)||e.handlePause("button"))})),M(Object(o.a)(e),"handleToggle",(function(){e.state.isPlaying?e.handlePause("video"):e.handlePlay("video")})),M(Object(o.a)(e),"handlePlay",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=e.props,n=r.onEvent,a=r.onBeforePlay;n(E.b.PLAYER.REQUEST_PLAY),a().then((function(){e.state.isPlaybackStarted?e.setState({lastAction:"play"}):(n(E.b.PLAYER.PLAY_COUNT),e.setState({isPlaybackStarted:!0}),e.state.isDataLoaded||e.setState({isLoading:!0}),0!==e.state.currentTime&&e.handleSeek(0)),e.setState({isPlaying:!0,type:t,isNeverPlayed:!1})})).catch((function(){n(E.b.PLAYER.PLAY_REJECTED)}))})),M(Object(o.a)(e),"handlePause",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.props.onEvent(E.b.PLAYER.REQUEST_PAUSE);var r=e.state.isLoading;r||e.setState({lastAction:"pause",isPlaying:!1,type:t})})),M(Object(o.a)(e),"handleVideoPlay",(function(){e.state.isPlaying||e.setState({isPlaying:!0})})),M(Object(o.a)(e),"handleVideoPause",(function(){e.state.isPlaying&&e.setState({isPlaying:!1})})),M(Object(o.a)(e),"handleVideoEnded",(function(){e.setState({isPlaybackStarted:!1,lastAction:null,isPlaying:!1,isLoading:!1})})),M(Object(o.a)(e),"handleVideoLoadedData",(function(){e.setState({isDataLoaded:!0,isLoading:!1})})),M(Object(o.a)(e),"handleVideoError",(function(){e.setState({isPlaying:!1,isLoading:!1})})),M(Object(o.a)(e),"handleVideoDurationChange",(function(t){e.setState({duration:t})})),M(Object(o.a)(e),"handleVideoTimeUpdate",(function(t){e.state.isLoading||e.isSeeking||e.isSeeking||e.setState({currentTime:t})})),M(Object(o.a)(e),"handleVideoVolumeChange",(function(t){t=Math.round(100*t)/100,e.setState({volume:t}),wt.set("@griffith/history-volume",t)})),M(Object(o.a)(e),"handleSeek",(function(t){var r=e.state,n=r.isPlaybackStarted,a=r.isNeverPlayed,i=r.currentTime,o=!n&&!a&&0!==i;e.setState({currentTime:t}),e.videoRef.current.seek(t),o&&e.handlePlay()})),M(Object(o.a)(e),"handleVideoWaiting",(function(){null===e.showLoaderTimeout&&(e.showLoaderTimeout=setTimeout((function(){e.setState({isLoading:!0})}),1e3))})),M(Object(o.a)(e),"handleVideoPlaying",(function(){null!==e.showLoaderTimeout&&(clearTimeout(e.showLoaderTimeout),e.showLoaderTimeout=null),e.setState({isLoading:!1})})),M(Object(o.a)(e),"handleVideoSeeking",(function(){e.isSeeking=!0})),M(Object(o.a)(e),"handleVideoSeeked",(function(){e.isSeeking=!1})),M(Object(o.a)(e),"handleVideoProgress",(function(t){e.setState({buffered:t})})),M(Object(o.a)(e),"handleToggleFullScreen",(function(){if(b.a.enabled){var t=e.props.onEvent;b.a.toggle(e.playerRef.current,(function(){return t(E.b.PLAYER.ENTER_FULLSCREEN)}),(function(){return t(E.b.PLAYER.EXIT_FULLSCREEN)}))}})),M(Object(o.a)(e),"handleShowController",(function(){e.state.isControllerShown||e.setState({isControllerShown:!0}),null!==e.hideControllerTimeout&&clearTimeout(e.hideControllerTimeout),e.hideControllerTimeout=setTimeout((function(){e.hideControllerTimeout=null,e.setState({isControllerShown:!1})}),3e3)})),M(Object(o.a)(e),"handleHideController",(function(){null!==e.hideControllerTimeout&&(clearTimeout(e.hideControllerTimeout),e.hideControllerTimeout=null),e.setState({isControllerShown:!1})})),M(Object(o.a)(e),"handleControllerPointerEnter",(function(){e.setState({isControllerHovered:!0})})),M(Object(o.a)(e),"handleControllerPointerLeave",(function(){e.setState({isControllerHovered:!1})})),M(Object(o.a)(e),"handleControllerDragStart",(function(){e.setState({isControllerDragging:!0})})),M(Object(o.a)(e),"handleControllerDragEnd",(function(){e.setState({isControllerDragging:!1})})),M(Object(o.a)(e),"handleMouseEnter",(function(){e.setState({hovered:!0}),e.handleShowController()})),M(Object(o.a)(e),"handleMouseLeave",(function(){e.setState({hovered:!1}),e.handleHideController()})),M(Object(o.a)(e),"handleMouseDown",(function(){e.setState({pressed:!0}),e.handleShowController()})),M(Object(o.a)(e),"handleMouseUp",(function(){e.setState({pressed:!1}),e.handleShowController()})),M(Object(o.a)(e),"handleMouseMove",(function(){e.state.hovered||e.setState({hovered:!0}),e.handleShowController()})),e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.setDocumentTitle();var e=wt.get("@griffith/history-volume");e&&this.setState({volume:e}),this.pauseActionSubscription=this.props.subscribeAction(E.a.PLAYER.PAUSE,this.handlePauseAction),this.props.autoplay&&this.videoRef.current.root&&(this.videoRef.current.root.muted||this.handleVideoVolumeChange(0),this.handlePlay("video"))}},{key:"componentDidUpdate",value:function(){this.setDocumentTitle()}},{key:"componentWillUnmount",value:function(){this.pauseActionSubscription.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.props,r=t.error,n=t.title,a=t.cover,i=t.standalone,o=t.onEvent,s=t.useMSE,u=this.state,l=u.isPlaybackStarted,c=u.lastAction,d=u.isPlaying,f=u.isLoading,h=u.duration,v=u.isControllerShown,m=u.isControllerHovered,y=u.isControllerDragging,E=u.currentTime,S=u.isNeverPlayed,O=u.volume,w=u.buffered,k=u.type,T=u.hovered,_=u.pressed,A=Boolean(b.a.element),C=l&&(!d||v||m||y)||!l&&0!==E,x=function(e,t){var r=t.find((function(t){return t.start<=e&&e<=t.end}));return r?r.end:0}(E,w);return p.a.createElement("div",{className:Object(g.css)(Tt.root,A&&Tt.fullScreened),onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleShowController,ref:this.playerRef},p.a.createElement("div",{className:Object(g.css)(Tt.video)},p.a.createElement(ge,{ref:this.videoRef,controls:At&&l,paused:!d,volume:O,onPlay:this.handleVideoPlay,onPause:this.handleVideoPause,onEnded:this.handleVideoEnded,onLoadedData:this.handleVideoLoadedData,onError:this.handleVideoError,onDurationChange:this.handleVideoDurationChange,onTimeUpdate:this.handleVideoTimeUpdate,onWaiting:this.handleVideoWaiting,onPlaying:this.handleVideoPlaying,onSeeking:this.handleVideoSeeking,onSeeked:this.handleVideoSeeked,onProgress:this.handleVideoProgress,onEvent:o,useMSE:s})),p.a.createElement("div",{className:Object(g.css)(Tt.cover,!l&&Tt.coverShown),onClick:function(){return e.handlePlay()}},a&&p.a.createElement(re.Consumer,null,(function(e){var t=e.objectFit;return p.a.createElement("img",{className:Object(g.css)(Tt.coverImage),src:a,style:{objectFit:t}})})),h&&0===E&&p.a.createElement("div",{className:Object(g.css)(Tt.coverTime,At&&Tt.coverTimeMobile)},p.a.createElement(B,{value:h})),S&&p.a.createElement("div",{className:Object(g.css)(Tt.coverAction)},p.a.createElement("div",{className:Object(g.css)(Tt.actionButton)},p.a.createElement(U,{icon:G,styles:Tt.actionIcon}))),!S&&0!==E&&p.a.createElement("div",{className:Object(g.css)(Tt.coverReplayAction)},p.a.createElement("div",{className:Object(g.css)(Tt.coverReplayButton,T&&Tt.coverReplayButtonHovered,_&&Tt.coverReplayButtonPressed)},p.a.createElement(U,{icon:W,styles:Tt.replayIcon}),"\u91cd\u65b0\u64ad\u653e"))),!At&&p.a.createElement("div",{className:Object(g.css)(Tt.overlay,S&&Tt.overlayMask)},l&&f&&p.a.createElement("div",{className:Object(g.css)(Tt.loader)},p.a.createElement(Y,null)),c&&"button"!==k&&p.a.createElement("div",{className:Object(g.css)(Tt.action),key:c},p.a.createElement("div",{className:Object(g.css)(Tt.actionButton,Tt.actionButtonAnimated)},p.a.createElement(U,{icon:"play"===c?G:V,styles:Tt.actionIcon}))),p.a.createElement("div",{className:Object(g.css)(Tt.backdrop),onTouchStart:function(e){e.preventDefault()},onClick:this.handleToggle}),n&&A&&p.a.createElement("div",{className:Object(g.css)(Tt.title,C&&Tt.titleShown)},n),d&&(!f||0!==E)&&p.a.createElement("div",{className:Object(g.css)(_t.base,C?_t.hidden:_t.shown)},p.a.createElement(nt,{buffered:x,duration:h,currentTime:E,show:!C})),l&&(!f||0!==E)&&p.a.createElement("div",{className:Object(g.css)(Tt.controller,_t.base,C?_t.shown:_t.hidden),onMouseEnter:this.handleControllerPointerEnter,onMouseLeave:this.handleControllerPointerLeave},p.a.createElement(Et,{standalone:i,isPlaying:d,duration:h,currentTime:E,volume:O,buffered:x,isFullScreen:A,onDragStart:this.handleControllerDragStart,onDragEnd:this.handleControllerDragEnd,onPlay:this.handlePlay,onPause:this.handlePause,onSeek:this.handleSeek,onVolumeChange:this.handleVideoVolumeChange,onToggleFullScreen:this.handleToggleFullScreen,show:C}))),r&&p.a.createElement("div",{className:Object(g.css)(Tt.error)},p.a.createElement(U,{icon:z,styles:Tt.errorIcon}),r.message&&p.a.createElement("div",{className:Object(g.css)(Tt.errorMessage)},r.message)))}}]),r}(h.Component);M(Ct,"propTypes",{standalone:m.a.bool,error:m.a.shape({message:m.a.string}),title:m.a.string,cover:m.a.string,duration:m.a.number,onEvent:m.a.func.isRequired,onBeforePlay:m.a.func.isRequired}),M(Ct,"defaultProps",{standalone:!1,duration:0,autoplay:!1}),M(Ct,"getDerivedStateFromProps",(function(e,t){var r=e.duration,n=r&&!t.duration?{duration:r}:null;return Object(s.a)({},n)}));var xt=function(e){var t=e.standalone,r=e.id,n=e.title,a=e.cover,i=e.duration,o=e.sources,s=e.error,u=e.onBeforePlay,l=void 0===u?function(){return Promise.resolve()}:u,c=e.shouldObserveResize,d=e.children,f=e.initialObjectFit,h=void 0===f?"contain":f,v=e.useMSE,m=e.locale,g=void 0===m?"en":m,y=e.autoplay;return p.a.createElement(ae,{initialObjectFit:h},p.a.createElement(se,{shouldObserveResize:c},p.a.createElement(te,{id:r,enableCrossWindow:t},p.a.createElement(J.Consumer,null,(function(e){var u=e.emitEvent,c=e.subscribeAction;return p.a.createElement($,{onEvent:u,sources:o,id:r},p.a.createElement(ot.Provider,{value:g},p.a.createElement(X.Consumer,null,(function(e){var r=e.currentSrc;return p.a.createElement(Ct,{useMSE:v,autoplay:y,standalone:t,cover:a,title:n,duration:i,error:s,onEvent:u,subscribeAction:c,onBeforePlay:function(){return l(r)}})})),d))})))))};xt.propTypes={standalone:m.a.bool,id:m.a.string.isRequired,title:m.a.string,cover:m.a.string.isRequired,duration:m.a.number.isRequired,sources:m.a.objectOf(m.a.shape({bitrate:m.a.number.isRequired,duration:m.a.number.isRequired,format:m.a.string.isRequired,height:m.a.number.isRequired,play_url:m.a.string.isRequired,size:m.a.number.isRequired,width:m.a.number.isRequired})).isRequired,error:m.a.shape({message:m.a.string}),onBeforePlay:m.a.func,initialObjectFit:m.a.oneOf(ne),useMSE:m.a.bool};g.StyleSheet.create({container:{position:"absolute",pointerEvents:"none",overflow:"hidden"},containerFullWidth:{width:"100%",height:"auto",top:"50%",left:0,transform:"translate(0, -50%)"},containerFullHeight:{width:"auto",height:"100%",top:0,left:"50%",transform:"translate(-50%)"},image:{display:"block",visibility:"hidden"},imageFullWidth:{width:"100%",height:"auto"},imageFullHeight:{width:"auto",height:"100%"},layer:{position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"hidden",pointerEvents:"none"}});t.a=xt}).call(this,r(59))},510:function(e,t,r){e.exports=r(511)},511:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(512);r(346),r(347),r(348),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(360),r(361),r(362),r(363);var a=n.makeExports(!1),i=a.StyleSheet,o=a.StyleSheetServer,s=a.StyleSheetTestUtils,u=a.css,l=a.minify,c=a.flushToStyleTag,d=a.injectAndGetClassName,f=a.defaultSelectorHandlers;t.StyleSheet=i,t.StyleSheetServer=o,t.StyleSheetTestUtils=s,t.css=u,t.minify=l,t.flushToStyleTag=c,t.injectAndGetClassName=d,t.defaultSelectorHandlers=f},512:function(e,t,r){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var a=n(r(346)),i=n(r(347)),o=n(r(348)),s=n(r(350)),u=n(r(351)),l=n(r(352)),c=n(r(353)),d=n(r(354)),f=n(r(355)),h=n(r(356)),p=n(r(357)),v=n(r(358)),m=n(r(359)),g=n(r(360)),y=n(r(361)),b=n(r(362)),E=n(r(363));function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){O(e,t,r[t])}))}return e}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var T=/([A-Z])/g,_=function(e){return"-".concat(e.toLowerCase())},A={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var C=["Webkit","ms","Moz","O"];Object.keys(A).forEach((function(e){C.forEach((function(t){A[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=A[e]}))}));var x=function(e,t){return"number"===typeof t?A[e]?""+t:t+"px":""+t},R=function(e,t){return P(x(e,t))},L=function(e,t){return a(e).toString(36)},P=function(e){return"!"===e[e.length-10]&&" !important"===e.slice(-11)?e:"".concat(e," !important")},D="undefined"!==typeof Map,j=function(){function e(){this.elements={},this.keyOrder=[]}var t=e.prototype;return t.forEach=function(e){for(var t=0;t<this.keyOrder.length;t++)e(this.elements[this.keyOrder[t]],this.keyOrder[t])},t.set=function(t,r,n){if(this.elements.hasOwnProperty(t)){if(n){var a=this.keyOrder.indexOf(t);this.keyOrder.splice(a,1),this.keyOrder.push(t)}}else this.keyOrder.push(t);if(null!=r){if(D&&r instanceof Map||r instanceof e){var i=this.elements.hasOwnProperty(t)?this.elements[t]:new e;return r.forEach((function(e,t){i.set(t,e,n)})),void(this.elements[t]=i)}if(Array.isArray(r)||"object"!==S(r))this.elements[t]=r;else{for(var o=this.elements.hasOwnProperty(t)?this.elements[t]:new e,s=Object.keys(r),u=0;u<s.length;u+=1)o.set(s[u],r[s[u]],n);this.elements[t]=o}}else this.elements[t]=r},t.get=function(e){return this.elements[e]},t.has=function(e){return this.elements.hasOwnProperty(e)},t.addStyleType=function(t){var r=this;if(D&&t instanceof Map||t instanceof e)t.forEach((function(e,t){r.set(t,e,!0)}));else for(var n=Object.keys(t),a=0;a<n.length;a++)this.set(n[a],t[n[a]],!0)},e}(),M=["Webkit"],I=["Moz"],F=["ms"],B=["Webkit","Moz"],N=["Webkit","ms"],U=["Webkit","Moz","ms"],z=o({plugins:[s,u,l,c,d,f,h,p,v,m,g,y,b,E],prefixMap:{transform:N,transformOrigin:N,transformOriginX:N,transformOriginY:N,backfaceVisibility:M,perspective:M,perspectiveOrigin:M,transformStyle:M,transformOriginZ:M,animation:M,animationDelay:M,animationDirection:M,animationFillMode:M,animationDuration:M,animationIterationCount:M,animationName:M,animationPlayState:M,animationTimingFunction:M,appearance:B,userSelect:U,fontKerning:M,textEmphasisPosition:M,textEmphasis:M,textEmphasisStyle:M,textEmphasisColor:M,boxDecorationBreak:M,clipPath:M,maskImage:M,maskMode:M,maskRepeat:M,maskPosition:M,maskClip:M,maskOrigin:M,maskSize:M,maskComposite:M,mask:M,maskBorderSource:M,maskBorderMode:M,maskBorderSlice:M,maskBorderWidth:M,maskBorderOutset:M,maskBorderRepeat:M,maskBorder:M,maskType:M,textDecorationStyle:B,textDecorationSkip:B,textDecorationLine:B,textDecorationColor:B,filter:M,fontFeatureSettings:B,breakAfter:U,breakBefore:U,breakInside:U,columnCount:B,columnFill:B,columnGap:B,columnRule:B,columnRuleColor:B,columnRuleStyle:B,columnRuleWidth:B,columns:B,columnSpan:B,columnWidth:B,writingMode:N,flex:N,flexBasis:M,flexDirection:N,flexGrow:M,flexFlow:N,flexShrink:M,flexWrap:N,alignContent:M,alignItems:M,alignSelf:M,justifyContent:M,order:M,transitionDelay:M,transitionDuration:M,transitionProperty:M,transitionTimingFunction:M,backdropFilter:M,scrollSnapType:N,scrollSnapPointsX:N,scrollSnapPointsY:N,scrollSnapDestination:N,scrollSnapCoordinate:N,shapeImageThreshold:M,shapeImageMargin:M,shapeImageOutside:M,hyphens:U,flowInto:N,flowFrom:N,regionFragment:N,textOrientation:M,boxSizing:I,textAlignLast:I,tabSize:I,wrapFlow:F,wrapThrough:F,wrapMargin:F,touchAction:F,gridTemplateColumns:F,gridTemplateRows:F,gridTemplateAreas:F,gridTemplate:F,gridAutoColumns:F,gridAutoRows:F,gridAutoFlow:F,grid:F,gridRowStart:F,gridColumnStart:F,gridRowEnd:F,gridRow:F,gridColumn:F,gridColumnEnd:F,gridColumnGap:F,gridRowGap:F,gridArea:F,gridGap:F,textSizeAdjust:N,borderImage:M,borderImageOutset:M,borderImageRepeat:M,borderImageSlice:M,borderImageSource:M,borderImageWidth:M}}),V=[function(e,t,r){return":"!==e[0]?null:r(t+e)},function(e,t,r){if("@"!==e[0])return null;var n=r(t);return["".concat(e,"{").concat(n.join(""),"}")]}],G=function e(t,r,n,a,i){for(var o=new j,s=0;s<r.length;s++)o.addStyleType(r[s]);var u=new j,l=[];o.forEach((function(r,o){n.some((function(s){var u=s(o,t,(function(t){return e(t,[r],n,a,i)}));if(null!=u)return Array.isArray(u)?l.push.apply(l,k(u)):(console.warn("WARNING: Selector handlers should return an array of rules.Returning a string containing multiple rules is deprecated.",s),l.push("@media all {".concat(u,"}"))),!0}))||u.set(o,r,!0)}));var c=q(t,u,a,i,n);return c&&l.unshift(c),l},W=function(e,t,r){return"".concat(function(e){var t=e.replace(T,_);return"m"===t[0]&&"s"===t[1]&&"-"===t[2]?"-".concat(t):t}(e),":").concat(r(e,t),";")},H=function(e,t){return e[t]=!0,e},q=function(e,t,r,n,a){!function(e,t,r){if(t)for(var n=Object.keys(t),a=0;a<n.length;a++){var i=n[a];e.has(i)&&e.set(i,t[i](e.get(i),r),!1)}}(t,r,a);var i=Object.keys(t.elements).reduce(H,Object.create(null)),o=z(t.elements),s=Object.keys(o);if(s.length!==t.keyOrder.length)for(var u=0;u<s.length;u++)if(!i[s[u]]){var l=void 0;if((l="W"===s[u][0]?s[u][6].toLowerCase()+s[u].slice(7):"o"===s[u][1]?s[u][3].toLowerCase()+s[u].slice(4):s[u][2].toLowerCase()+s[u].slice(3))&&i[l]){var c=t.keyOrder.indexOf(l);t.keyOrder.splice(c,0,s[u])}else t.keyOrder.unshift(s[u])}for(var d=!1===n?x:R,f=[],h=0;h<t.keyOrder.length;h++){var p=t.keyOrder[h],v=o[p];if(Array.isArray(v))for(var m=0;m<v.length;m++)f.push(W(p,v[m],d));else f.push(W(p,v,d))}return f.length?"".concat(e,"{").concat(f.join(""),"}"):""},K=null,Y={fontFamily:function e(t){if(Array.isArray(t)){var r={};return t.forEach((function(t){r[e(t)]=!0})),Object.keys(r).join(",")}return"object"===S(t)?(J(t.src,"@font-face",[t],!1),'"'.concat(t.fontFamily,'"')):t},animationName:function e(t,r){if(Array.isArray(t))return t.map((function(t){return e(t,r)})).join(",");if("object"===S(t)){var n="keyframe_".concat((i=t,L(JSON.stringify(i)))),a="@keyframes ".concat(n,"{");return t instanceof j?t.forEach((function(e,t){a+=G(t,[e],r,Y,!1).join("")})):Object.keys(t).forEach((function(e){a+=G(e,[t[e]],r,Y,!1).join("")})),$(n,[a+="}"]),n}return t;var i}},X={},Q=[],Z=!1,$=function(e,t){var r;if(!X[e]){if(!Z){if("undefined"===typeof document)throw new Error("Cannot automatically buffer without a document");Z=!0,i(te)}(r=Q).push.apply(r,k(t)),X[e]=!0}},J=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!X[e]){var i=G(t,r,a,Y,n);$(e,i)}},ee=function(){Z=!1;var e=Q;return Q=[],e},te=function(){var e=ee();e.length>0&&function(e){if(null==K&&null==(K=document.querySelector("style[data-aphrodite]"))){var t=document.head||document.getElementsByTagName("head")[0];(K=document.createElement("style")).type="text/css",K.setAttribute("data-aphrodite",""),t.appendChild(K)}var r=K.styleSheet||K.sheet;if(r.insertRule){var n=r.cssRules.length;e.forEach((function(e){try{r.insertRule(e,n),n+=1}catch(t){}}))}else K.innerText=(K.innerText||"")+e.join("")}(e)},re=function(e){e.forEach((function(e){X[e]=!0}))},ne=function(e,t,r){var n,a=[],i=[],o=function e(t,r,n,a){for(var i=0;i<t.length;i+=1)t[i]&&(Array.isArray(t[i])?a+=e(t[i],r,n,a):(r.push(t[i]._name),n.push(t[i]._definition),a+=t[i]._len));return a}(t,a,i,0);return 0===a.length?"":(n=1===a.length?"_".concat(a[0]):"_".concat(L(a.join())).concat((o%36).toString(36)),J(n,".".concat(n),i,e,r),n)},ae=function(e,t){return"".concat(t,"_").concat(L(e))},ie=L,oe={create:function(e){for(var t={},r=Object.keys(e),n=0;n<r.length;n+=1){var a=r[n],i=e[a],o=JSON.stringify(i);t[a]={_len:o.length,_name:ie(o,a),_definition:i}}return t},rehydrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];re(e)}},se="undefined"!==typeof window?null:{renderStatic:function(e){return Q=[],X={},Z=!1,K=null,function(){if(Z)throw new Error("Cannot buffer while already buffering");Z=!0}(),{html:e(),css:{content:ee().join(""),renderedClassNames:Object.keys(X)}}}};t.makeExports=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V;return{StyleSheet:w({},oe,{extend:function(n){var a=n.map((function(e){return e.selectorHandler})).filter((function(e){return e}));return e(t,r.concat(a))}}),StyleSheetServer:se,StyleSheetTestUtils:null,minify:function(e){ie=e?L:ae},css:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return ne(t,n,r)},flushToStyleTag:te,injectAndGetClassName:ne,defaultSelectorHandlers:V}}},513:function(e,t,r){"use strict";(function(t){function r(e){a.length||(n(),!0),a[a.length]=e}e.exports=r;var n,a=[],i=0;function o(){for(;i<a.length;){var e=i;if(i+=1,a[e].call(),i>1024){for(var t=0,r=a.length-i;t<r;t++)a[t]=a[t+i];a.length-=i,i=0}}a.length=0,i=0,!1}var s="undefined"!==typeof t?t:self,u=s.MutationObserver||s.WebKitMutationObserver;function l(e){return function(){var t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}n="function"===typeof u?function(e){var t=1,r=new u(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(o):l(o),r.requestFlush=n,r.makeRequestCallFromTimer=l}).call(this,r(59))},514:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(e.hasOwnProperty(t)){for(var n={},a=e[t],o=(0,i.default)(t),s=Object.keys(r),u=0;u<s.length;u++){var l=s[u];if(l===t)for(var c=0;c<a.length;c++)n[a[c]+o]=r[t];n[l]=r[l]}return n}return r};var n,a=r(349),i=(n=a)&&n.__esModule?n:{default:n}},515:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,a){for(var i=0,o=e.length;i<o;++i){var s=e[i](t,r,n,a);if(s)return s}}},516:function(e,t,r){"use strict";function n(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var r=0,a=t.length;r<a;++r)n(e,t[r]);else n(e,t)}},517:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)}},518:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)(e)};var n,a=r(519),i=(n=a)&&n.__esModule?n:{default:n};e.exports=t.default},519:function(e,t,r){"use strict";r.r(t);var n=/[A-Z]/g,a=/^ms-/,i={};function o(e){return"-"+e.toLowerCase()}t.default=function(e){if(i.hasOwnProperty(e))return i[e];var t=e.replace(n,o);return i[e]=a.test(t)?"-"+t:t}},520:function(e,t,r){e.exports=r(521)},521:function(e,t,r){var n;!function(a,i,o){"use strict";function s(e){var t=null;if("VIDEO"===e.tagName)t=e;else{var r=e.getElementsByTagName("video");r[0]&&(t=r[0])}return t}function u(e){var t=s(e);if(t&&t.webkitEnterFullscreen){try{t.readyState<t.HAVE_METADATA?(t.addEventListener("loadedmetadata",(function e(){t.removeEventListener("loadedmetadata",e,!1),t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")}),!1),t.load()):(t.webkitEnterFullscreen(),p=!!t.getAttribute("controls")),h=t}catch(o){return E("not_supported",e)}return!0}return E(void 0===f.request?"not_supported":"not_enabled",e)}function l(){S.element||(b(),c())}function c(){o&&"webkitfullscreenchange"===f.change&&window.removeEventListener("resize",l,!1)}var d=/i(Pad|Phone|Pod)/.test(navigator.userAgent)&&parseInt(navigator.userAgent.replace(/^.*OS (\d+)_(\d+).*$/,"$1.$2"),10)>=7,f=function(){var e=i.createElement("video"),t={request:["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"],exit:["exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],element:["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],change:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],error:["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","MSFullscreenError"]},r={};for(var n in t)for(var a=0,o=t[n].length;o>a;a++)if(t[n][a]in e||t[n][a]in i||"on"+t[n][a].toLowerCase()in i){r[n]=t[n][a];break}return r}(),h=null,p=null,v=function(){},m=[],g=!1;navigator.userAgent.indexOf("Android")>-1&&navigator.userAgent.indexOf("Chrome")>-1&&(g=parseInt(navigator.userAgent.replace(/^.*Chrome\/(\d+).*$/,"$1"),10)||!0);var y=function(e){var t=m[m.length-1];t&&(e!==t.element&&e!==h||!t.hasEntered)&&("VIDEO"===e.tagName&&(h=e),1===m.length&&S.onenter(S.element),t.enter.call(t.element,e||t.element),t.hasEntered=!0)},b=function(){!h||p||d||(h.setAttribute("controls","controls"),h.removeAttribute("controls")),h=null,p=null;var e=m.pop();e&&(e.exit.call(e.element),S.element||(m.forEach((function(e){e.exit.call(e.element)})),m=[],S.onexit()))},E=function(e,t){if(m.length>0){var r=m.pop();t=t||r.element,r.error.call(t,e),S.onerror(t,e)}},S={request:function(e,t,r,n){if(e=e||i.body,m.push({element:e,enter:t||v,exit:r||v,error:n||v}),void 0!==f.request)if(o&&!1===i[f.enabled])u(e);else if(!1!==g&&32>g)u(e);else{if(o&&void 0===f.enabled)return f.enabled="webkitFullscreenEnabled",e[f.request](),void setTimeout((function(){i[f.element]?i[f.enabled]=!0:(i[f.enabled]=!1,u(e))}),250);try{e[f.request](),setTimeout((function(){i[f.element]||E(o?"not_enabled":"not_allowed",e)}),100)}catch(c){E("not_enabled",e)}}else u(e)},exit:function(){c(),i[f.exit]()},toggle:function(e,t,r,n){S.element?S.exit():S.request(e,t,r,n)},videoEnabled:function(e){if(S.enabled)return!0;var t=s(e=e||i.body);return!(!t||void 0===t.webkitSupportsFullscreen)&&(t.readyState<t.HAVE_METADATA?"maybe":t.webkitSupportsFullscreen)},onenter:v,onexit:v,onchange:v,onerror:v};try{Object.defineProperties(S,{element:{enumerable:!0,get:function(){return h&&h.webkitDisplayingFullscreen?h:i[f.element]||null}},enabled:{enumerable:!0,get:function(){return"webkitCancelFullScreen"===f.exit&&!o||!(!1!==g&&32>g)&&(i[f.enabled]||!1)}}}),f.change&&i.addEventListener(f.change,(function(e){if(S.onchange(S.element),S.element){var t=m[m.length-2];t&&t.element===S.element?b():(y(S.element),o&&"webkitfullscreenchange"===f.change&&window.addEventListener("resize",l,!1))}else b()}),!1),i.addEventListener("webkitbeginfullscreen",(function(e){var t=!0;if(m.length>0)for(var r=0,n=m.length;n>r;r++){if(s(m[r].element)===e.srcElement){t=!1;break}}t&&m.push({element:e.srcElement,enter:v,exit:v,error:v}),S.onchange(e.srcElement),y(e.srcElement)}),!0),i.addEventListener("webkitendfullscreen",(function(e){S.onchange(e.srcElement),b(e.srcElement)}),!0),f.error&&i.addEventListener(f.error,(function(e){E("not_allowed")}),!1)}catch(O){S.element=null,S.enabled=!1}void 0===(n=function(){return S}.call(t,r,t,e))||(e.exports=n)}(0,document,self!==top)},522:function(e,t,r){"use strict";var n=r(523),a=r(527),i=r(528),o=r(532),s=r(533),u=r(534);function l(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function d(e,t){return t.decode?s(e):e}function f(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){var t=(e=f(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return function(t,r,n){var a="string"===typeof r&&r.split("").indexOf(e.arrayFormatSeparator)>-1?r.split(e.arrayFormatSeparator).map((function(t){return d(t,e)})):null===r?r:d(r,e);n[t]=a};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),i=Object.create(null);if("string"!==typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;var o,s=a(e.split("&"));try{for(s.s();!(o=s.n()).done;){var c=o.value,f=u(t.decode?c.replace(/\+/g," "):c,"="),h=n(f,2),v=h[0],m=h[1];m=void 0===m?null:["comma","separator"].includes(t.arrayFormat)?m:d(m,t),r(d(v,t),m,i)}}catch(k){s.e(k)}finally{s.f()}for(var g=0,y=Object.keys(i);g<y.length;g++){var b=y[g],E=i[b];if("object"===typeof E&&null!==E)for(var S=0,O=Object.keys(E);S<O.length;S++){var w=O[S];E[w]=p(E[w],t)}else i[b]=p(E,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce((function(e,t){var r=i[t];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"===typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(r):e[t]=r,e}),Object.create(null))}t.extract=h,t.parse=v,t.stringify=function(e,t){if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var r=function(r){return t.skipNull&&(null===(n=e[r])||void 0===n)||t.skipEmptyString&&""===e[r];var n},n=function(e){switch(e.arrayFormat){case"index":return function(t){return function(r,n){var a=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(i(r),null===n?[[c(t,e),"[",a,"]"].join("")]:[[c(t,e),"[",c(a,e),"]=",c(n,e)].join("")])}};case"bracket":return function(t){return function(r,n){return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(i(r),null===n?[[c(t,e),"[]"].join("")]:[[c(t,e),"[]=",c(n,e)].join("")])}};case"comma":case"separator":return function(t){return function(r,n){return null===n||void 0===n||0===n.length?r:0===r.length?[[c(t,e),"=",c(n,e)].join("")]:[[r,c(n,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(r,n){return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:[].concat(i(r),null===n?[c(t,e)]:[[c(t,e),"=",c(n,e)].join("")])}}}}(t),a={},o=0,s=Object.keys(e);o<s.length;o++){var u=s[o];r(u)||(a[u]=e[u])}var d=Object.keys(a);return!1!==t.sort&&d.sort(t.sort),d.map((function(r){var a=e[r];return void 0===a?"":null===a?c(r,t):Array.isArray(a)?a.reduce(n(r),[]).join("&"):c(r,t)+"="+c(a,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var r=u(e,"#"),a=n(r,2),i=a[0],o=a[1];return Object.assign({url:i.split("?")[0]||"",query:v(h(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:d(o,t)}:{})},t.stringifyUrl=function(e,r){r=Object.assign({encode:!0,strict:!0},r);var n=f(e.url).split("?")[0]||"",a=t.extract(e.url),i=t.parse(a,{sort:!1}),o=Object.assign(i,e.query),s=t.stringify(o,r);s&&(s="?".concat(s));var u=function(e){var t="",r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u="#".concat(c(e.fragmentIdentifier,r))),"".concat(n).concat(s).concat(u)}},523:function(e,t,r){var n=r(524),a=r(525),i=r(282),o=r(526);e.exports=function(e,t){return n(e)||a(e,t)||i(e,t)||o()}},524:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},525:function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}}},526:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},527:function(e,t,r){var n=r(282);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=n(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i,o=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}},528:function(e,t,r){var n=r(529),a=r(530),i=r(282),o=r(531);e.exports=function(e){return n(e)||a(e)||i(e)||o()}},529:function(e,t,r){var n=r(364);e.exports=function(e){if(Array.isArray(e))return n(e)}},530:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},531:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},532:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},533:function(e,t,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(a){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function o(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var r={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=a.exec(e);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch(t){var i=o(n[0]);i!==n[0]&&(r[n[0]]=i)}n=a.exec(e)}r["%C2"]="\ufffd";for(var s=Object.keys(r),u=0;u<s.length;u++){var l=s[u];e=e.replace(new RegExp(l,"g"),r[l])}return e}(e)}}},534:function(e,t,r){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},535:function(e,t){e.exports=function(){}},536:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a="~";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,i){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new o(r,n||e,i),u=a?a+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},l.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,n);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||u(this,i);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[i]=1===l.length?l[0]:l:u(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l},537:function(e,t){function r(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame((function(){var r=t.__resizeTrigger__,n=r&&r.__resizeListeners__;n&&n.forEach((function(t){t.call(r,e)}))}))}t=function(e,t){var n,a=this.document,i=a.attachEvent;if("undefined"!==typeof navigator&&(n=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",r);else{"static"===getComputedStyle(e).position&&(e.style.position="relative");var o=e.__resizeTrigger__=a.createElement("object");o.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),o.setAttribute("class","resize-sensor"),o.setAttribute("tabindex","-1"),o.__resizeElement__=e,o.onload=function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",r)},o.type="text/html",n&&e.appendChild(o),o.data="about:blank",n||e.appendChild(o)}e.__resizeListeners__.push(t)};e.exports="undefined"===typeof window?t:t.bind(window),e.exports.unbind=function(e,t){var n=document.attachEvent,a=e.__resizeListeners__||[];if(t){var i=a.indexOf(t);-1!==i&&a.splice(i,1)}else a=e.__resizeListeners__=[];if(!a.length){if(n)e.detachEvent("onresize",r);else if(e.__resizeTrigger__){var o=e.__resizeTrigger__.contentDocument,s=o&&o.defaultView;s&&(s.removeEventListener("resize",r),delete s.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}}},539:function(e,t,r){var n=r(540),a=r(270);e.exports=function(e,t,r){return void 0===r&&(r=t,t=void 0),void 0!==r&&(r=(r=a(r))===r?r:0),void 0!==t&&(t=(t=a(t))===t?t:0),n(a(e),t,r)}},540:function(e,t){e.exports=function(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}},541:function(e,t,r){var n=r(283);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},563:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return i}));var n=Object.freeze({DOM:{PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},PLAYER:{QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",PLAY_REJECTED:"event/player/play-rejected",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen"}}),a=Object.freeze({PLAYER:{PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen"}});function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",r=arguments.length>2?arguments[2]:void 0;function n(n){function a(a){var i=a.origin||a.originalEvent.origin,o="*"===t||t===i,s=a.data||{},u=s.from,l=s.id,c=s.payload;if(o&&"griffith"===u&&(!r||e===l)&&c){var d=c.messageName,f=c.data;d&&n(d,f,a.source)}}return window.addEventListener("message",a),{unsubscribe:function(){return window.removeEventListener("message",a)}}}function a(r,n,a){r&&r.postMessage&&r.postMessage({from:"griffith",id:e,payload:{messageName:n,data:a}},t||"*")}return{subscribeMessage:n,dispatchMessage:a}}},564:function(e,t,r){"use strict";r.r(t);var n=r(311),a=r(242),i=r(243),o=r(244),s=r(312),u=r(309),l=r(184),c=r(0),d=r.n(c),f=r(565),h=r.n(f);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e){var t=[];return t.push("#EXTM3U"),e.forEach((function(e){var r={"PROGRAM-ID":"1",BANDWIDTH:String(e.bandwidth)};if(e.resolution){var n=e.resolution,a=n.width,i=n.height;r.RESOLUTION="".concat(a,"x").concat(i)}t.push("#EXT-X-STREAM-INF:".concat(Object.entries(r).map((function(e){var t=Object(l.a)(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(n)})).join(","))),t.push(e.source)})),t.join("\n")}var g={pluginName:"griffith-hls",VideoComponent:function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),p(Object(o.a)(e),"hasLoadStarted",!1),e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.hls=new h.a({autoStartLoad:!1}),this.hls.attachMedia(this.video);var e=function(e){var t=e.map((function(e){return{source:e.source,bandwidth:1024*e.bitrate,resolution:{width:e.width,height:e.height}}}));return new Blob([m(t)],{type:"application/vnd.apple.mpegURL"})}(this.props.sources);this.src=URL.createObjectURL(e),this.hls.loadSource(this.src)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.currentQuality,n=t.sources,a=t.paused;if(r!==e.currentQuality){var i=n.find((function(e){return e.quality===r}));if(i){var o=this.hls.levels.findIndex((function(e){return e.url.includes(i.source)}));this.hls.nextLevel=o}else this.hls.nextLevel=-1}a||!e.paused||this.hasLoadStarted||(this.hls.startLoad(),this.hasLoadStarted=!0)}},{key:"componentWillUnmount",value:function(){this.hls.destroy(),URL.revokeObjectURL(this.src)}},{key:"render",value:function(){var e=this,t=this.props,r=t.onRef,a=(t.currentQuality,t.src,t.sources,t.paused,Object(n.a)(t,["onRef","currentQuality","src","sources","paused"]));return d.a.createElement("video",v({ref:function(t){r&&r(t),e.video=t}},a))}}]),r}(c.Component),willHandleSrcChange:!0};t.default=g},565:function(e,t,r){e.exports=function e(t,r,n){function a(o,s){if(!r[o]){if(!t[o]){if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[o]={exports:{}};t[o][0].call(l.exports,(function(e){return a(t[o][1][e]||e)}),l,l.exports,e,t,r,n)}return r[o].exports}for(var i=!1,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,s,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(r=this._events[e]))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),n=(l=r.slice()).length,u=0;u<n;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!a(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,n=-1,r===t||a(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){!function(e){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,a=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;var o=this.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=a.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=o.netLoc,"/"!==i.path[0]))if(i.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+i.path;l.path=s.normalizePath(d)}else l.path=o.path,i.params||(l.params=o.params,i.query||(l.query=o.query));return null===l.path&&(l.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof r&&"object"==typeof t?t.exports=s:"object"==typeof r?r.URLToolkit=s:e.URLToolkit=s}(this)},{}],3:[function(e,t,r){var n=arguments[3],a=arguments[4],i=arguments[5],o=JSON.stringify;t.exports=function(e,t){for(var r,s=Object.keys(i),u=0,l=s.length;u<l;u++){var c=s[u],d=i[c].exports;if(d===e||d&&d.default===e){r=c;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var f={};for(u=0,l=s.length;u<l;u++)f[c=s[u]]=c;a[r]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[r]=r,a[h]=[Function(["require"],"var f = require("+o(r)+");(f.default ? f.default : f)(self);"),p];var v={};!function e(t){for(var r in v[t]=!0,a[t][1]){var n=a[t][1][r];v[n]||e(n)}}(h);var m="("+n+")({"+Object.keys(v).map((function(e){return o(e)+":["+a[e][0]+","+o(a[e][1])+"]"})).join(",")+"},{},["+o(h)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([m],{type:"text/javascript"});if(t&&t.bare)return y;var b=g.createObjectURL(y),E=new Worker(b);return E.objectURL=b,E}},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var a=n(e(5)),i=n(e(6)),o=n(e(7)),s=n(e(8)),u=n(e(48));r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:u.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:a.default,bufferController:i.default,capLevelController:o.default,fpsController:s.default,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{48:48,5:5,6:6,7:7,8:8}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=n(e(32)),u=e(28),l=e(46),c=n(e(44)),d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.clearTimer(),o.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,n=e.frag.level,a=r.levels[n].details.live,i=r.config,o=void 0,s=void 0;a?(o=i.abrEwmaFastLive,s=i.abrEwmaSlowLive):(o=i.abrEwmaFastVoD,s=i.abrEwmaSlowVoD),this._bwEstimator=new c.default(r,s,o,i.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,a=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=n.stats;if(t&&o&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var u=performance.now()-o.trequest,c=Math.abs(t.playbackRate);if(u>500*r.duration/c){var d=e.levels,f=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/u),h=d[r.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,v=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*p/8)),m=t.currentTime,g=(v-o.loaded)/f,y=(s.default.bufferInfo(t,m,e.config.maxBufferHole).end-m)/c;if(y<2*r.duration/c&&g>y){var b=void 0,E=void 0;for(E=r.level-1;E>a;E--){var S=d[E].realBitrate?Math.max(d[E].realBitrate,d[E].bitrate):d[E].bitrate;if((b=r.duration*S/(6.4*f))<y)break}b<g&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(u,o.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:a},r.realBitrate=Math.round(8*n/a)}if(e.frag.bitrateTest){var i=e.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(!(!0===t.aborted||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered)){var n=t.tparsed-t.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"_findBestLevel",value:function(e,t,r,n,a,i,o,s,u){for(var c=a;c>=n;c--){var d,f=u[c].details,h=f?f.totalduration/f.fragments.length:t,p=!!f&&f.live;d=c<=e?o*r:s*r;var v=u[c].realBitrate?Math.max(u[c].realBitrate,u[c].bitrate):u[c].bitrate,m=v*h/d;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(d)+"/"+v+"/"+h+"/"+i+"/"+m),d>v&&(!m||p&&!this.bitrateTestDelay||m<i))return c}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,a=e.minAutoLevel,i=e.media,o=this.lastLoadedFragLevel,u=this.fragCurrent?this.fragCurrent.duration:0,c=i?i.currentTime:0,d=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(s.default.bufferInfo(i,c,n.maxBufferHole).end-c)/d,p=this._findBestLevel(o,u,f,a,t,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(p>=0)return p;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var v=u?Math.min(u,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,g=n.abrBandWidthUpFactor;if(0===h){var y=this.bitrateTestDelay;y&&(v=(u?Math.min(u,n.maxLoadingDelay):n.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),m=g=1)}return p=this._findBestLevel(o,u,f,a,t,h+v,m,g,r),Math.max(p,0)}}]),t}(o.default);r.default=d},{28:28,29:29,30:30,32:32,44:44,46:46}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=e(46),u=e(28),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){o.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var a=n.updating;try{n.abort()}catch(e){a=!0,s.logger.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video||e.levels.length&&e.audio,n=0;e.altAudio&&(t||r)&&(n=(t?1:0)+(r?1:0),s.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){s.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){s.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){s.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce((function(e,r){return r.parent===t?e+1:e}),0);this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var a=e[n],o=a.levelCodec||a.codec,l=a.container+";codecs="+o;s.logger.log("creating sourceBuffer("+l+")");try{var c=t[n]=r.addSourceBuffer(l);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:a.container},a.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:l})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,s.logger.log(n+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}s.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var a in r)if(r[a].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var i=e.duration;(n>this._msDuration&&n>i||i===1/0||isNaN(i))&&(s.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var a=t[n.type];a?a.updating?r.unshift(n):(a.ended=!1,this.parent=n.parent,a.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){s.logger.error("error while trying to append buffer:"+t.message),r.unshift(n);var o={type:u.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],o.details=u.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(i.default.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=u.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],o.fatal=!0,void e.trigger(i.default.ERROR,o);o.fatal=!1,e.trigger(i.default.ERROR,o)}}}}},{key:"flushBuffer",value:function(e,t,r){var n,a,i,o,u,l,c=this.sourceBuffer;if(Object.keys(c).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in c)if(!r||d===r){if((n=c[d]).ended=!1,n.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;try{for(a=0;a<n.buffered.length;a++)if(i=n.buffered.start(a),o=n.buffered.end(a),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(u=e,l=t):(u=Math.max(i,e),l=Math.min(o,t)),Math.min(l,o)-u>.5)return this.flushBufferCounter++,s.logger.log("flush "+d+" ["+u+","+l+"], of ["+i+","+o+"], pos:"+this.media.currentTime),n.remove(u,l),!1}catch(e){s.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var r=this;if(!this.levels)return-1;var n=this.levels.filter((function(n,a){return t.isLevelAllowed(a,r.restrictedLevels)&&a<=e}));return t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}},{key:"mediaWidth",get:function(){var e=void 0,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,r=this.media;return r&&(e=r.height||r.clientHeight||r.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"isLevelAllowed",value:function(e){return-1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(e)}},{key:"getMaxLevelByMediaSize",value:function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=e.length-1,a=0;a<e.length;a+=1){var i=e[a];if((i.width>=t||i.height>=r)&&function(e,t){return!t||e.width!==t.width||e.height!==t.height}(i,e[a+1])){n=a;break}}return n}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(n(e(29)).default);r.default=o},{29:29,30:30}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=e(46),u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))}},{key:"checkFPS",value:function(e,t,r){var n=performance.now();if(t){if(this.lastTime){var a=n-this.lastTime,o=r-this.lastDroppedFrames,u=t-this.lastDecodedFrames,l=1e3*o/a,c=this.hls;if(c.trigger(i.default.FPS_DROP,{currentDropped:o,currentDecoded:u,totalDroppedFrames:r}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*u){var d=c.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,c.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(o.default);r.default=u},{29:29,30:30,46:46}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=n(e(22)),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){o.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden")}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,r=e.samples,n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var i=s.default.getID3Frames(r[a].data);if(i){var o=r[a].pts,u=a<r.length-1?r[a+1].pts:t.endPTS;o===u&&(u+=1e-4);for(var l=0;l<i.length;l++){var c=i[l];if(!s.default.isTimeStampFrame(c)){var d=new n(o,u,"");d.value=c,this.id3Track.addCue(d)}}}}}}]),t}(o.default);r.default=u},{22:22,29:29,30:30}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=e(46),u=e(28),l=n(e(32)),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MANIFEST_LOADED,i.default.LEVEL_LOADED,i.default.FRAG_LOADED,i.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.cleanTimer(),this._manualLevel=-1}},{key:"cleanTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach((function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)})),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],n=[],a={},o=!1,l=!1,c=this.hls,d=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach((function(e){e.videoCodec&&(o=!0),d&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(l=!0);var t=a[e.bitrate];void 0===t?(a[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)})),o&&l?r.forEach((function(e){e.videoCodec&&n.push(e)})):n=r,(n=n.filter((function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||f("audio",t))&&(!r||f("video",r))}))).length){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var h=0;h<n.length;h++)if(n[h].bitrate===t){this._firstLevel=h,s.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}c.trigger(i.default.MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:e.audioTracks.length>0})}else c.trigger(i.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:c.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this._level!==e){s.logger.log("switching to level "+e),this._level=e;var n=t[e];n.level=e,r.trigger(i.default.LEVEL_SWITCH,n),r.trigger(i.default.LEVEL_SWITCHING,n)}var a=t[e],o=a.details;if(!o||!0===o.live){var l=a.urlId;r.trigger(i.default.LEVEL_LOADING,{url:a.url[l],level:e,id:l})}}else r.trigger(i.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(e.fatal)e.type===u.ErrorTypes.NETWORK_ERROR&&this.cleanTimer();else{var t=e.details,r=this.hls,n=void 0,a=void 0,i=!1;switch(t){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:n=e.frag.level;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=e.context.level,i=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:n=e.level}if(void 0!==n){(a=this._levels[n]).loadError?a.loadError++:a.loadError=1;var o=a.url.length;if(o>1&&a.loadError<o)a.urlId=(a.urlId+1)%o,a.details=void 0,s.logger.warn("level controller,"+t+" for level "+n+": switching to redundant stream id "+a.urlId);else if(-1===this._manualLevel&&n)s.logger.warn("level controller,"+t+": switch-down for next fragment"),r.nextAutoLevel=Math.max(0,n-1);else if(a&&a.details&&a.details.live)s.logger.warn("level controller,"+t+" on live stream, discard"),i&&(this._level=void 0);else if(t===u.ErrorDetails.LEVEL_LOAD_ERROR||t===u.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=r.media;if(c&&l.default.isBuffered(c,c.currentTime)&&l.default.isBuffered(c,c.currentTime+.5)){var d=r.config.levelLoadingRetryDelay;s.logger.warn("level controller,"+t+", but media buffered, retry in "+d+"ms"),this.timer=setTimeout(this.ontick,d),e.levelRetry=!0}else s.logger.error("cannot recover "+t+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var r=this._levels[t.level];r&&(r.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var n=e.details;if(n.live){var a=1e3*(n.averagetargetduration?n.averagetargetduration:n.targetduration),i=r.details;i&&n.endSN===i.endSN&&(a/=2,s.logger.log("same live playlist, reload twice faster")),a-=performance.now()-e.stats.trequest,a=Math.max(1e3,Math.round(a)),s.logger.log("live playlist, reload in "+a+" ms"),this.timer=setTimeout(this.ontick,a)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var r=t.urlId;this.hls.trigger(i.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(o.default);r.default=c},{28:28,29:29,30:30,32:32,46:46}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(43)),o=n(e(32)),s=n(e(20)),u=n(e(30)),l=n(e(29)),c=n(e(33)),d=n(e(47)),f=e(28),h=e(46),p="STOPPED",v="IDLE",m="KEY_LOADING",g="FRAG_LOADING",y="FRAG_LOADING_WAITING_RETRY",b="WAITING_LEVEL",E="PARSING",S="PARSED",O="BUFFER_FLUSHING",w="ENDED",k="ERROR",T=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=p,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),l.default.prototype.destroy.call(this),this.state=p}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(h.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=p}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=p,this.forceStartLoad=!1}},{key:"tick",value:function(){1===++this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case k:break;case O:this.fragLoadError=0;break;case v:this._doTickIdle();break;case b:var e=this.levels[this.level];e&&e.details&&(this.state=v);break;case y:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,i=this.levels[a];if(i){var s=i.bitrate,l=void 0;l=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var c=o.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=c.len;if(!(d>=l)){h.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var f=i.details;if(void 0===f||f.live&&this.levelLastLoaded!==a)this.state=b;else{var p=this.fragPrevious;if(!f.live&&p&&p.sn===f.endSN&&d&&!c.nextStart&&Math.min(r.duration,p.start+p.duration)-Math.max(c.end,p.start)<=Math.max(.2,p.duration)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(u.default.BUFFER_EOS,v),void(this.state=w)}this._fetchPayloadOrEos(n,c,f)}}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var n=this.fragPrevious,a=this.level,i=r.fragments,o=i.length;if(0!==o){var s=i[0].start,u=i[o-1].start+i[o-1].duration,l=t.end,c=void 0;if(r.initSegment&&!r.initSegment.data)c=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(o<d)return void h.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+d);if(null===(c=this._ensureFragmentAtLivePoint(r,l,s,u,n,i,o)))return}else l<s&&(c=i[0]);c||(c=this._findFragment(s,n,o,i,l,u,r)),c&&this._loadFragmentOrKey(c,a,r,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,n,a,o,s){var u=this.hls.config,l=this.media,c=void 0,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-u.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);h.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,l&&l.readyState&&l.duration>f&&(l.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a){var p=a.sn+1;if(p>=e.startSN&&p<=e.endSN){var v=o[p-e.startSN];a.cc===v.cc&&(c=v,h.logger.log("live playlist, switching playlist, load frag with next SN: "+c.sn))}c||(c=i.default.search(o,(function(e){return a.cc-e.cc})))&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+c.sn)}c||(c=o[Math.min(s-1,Math.round(s/2))],h.logger.log("live playlist, switching playlist, unknown, load middle frag : "+c.sn))}return c}},{key:"_findFragment",value:function(e,t,r,n,a,o,s){var u=this.hls.config,l=void 0,c=void 0,d=u.maxFragLookUpTolerance,f=t?n[t.sn-n[0].sn+1]:void 0,p=function(e){var t=Math.min(d,e.duration);return e.start+e.duration-t<=a?1:e.start-t>a&&e.start?-1:0};if(a<o?(a>o-d&&(d=0),c=f&&!p(f)?f:i.default.search(n,p)):c=n[r-1],c){var v=(l=c).sn-s.startSN,m=t&&l.level===t.level,g=n[v-1],y=n[v+1];if(t&&l.sn===t.sn)if(m&&!l.backtracked)if(l.sn<s.endSN){var b=t.deltaPTS;b&&b>u.maxBufferHole&&t.dropped&&v?(l=g,h.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=y,h.logger.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(y&&y.backtracked?(h.logger.warn("Already backtracked from fragment "+y.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+y.sn),l=y):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,g?(g.loadCounter&&g.loadCounter--,(l=g).backtracked=!0):v&&(l=null)))}return l}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,a){var i=this.hls,o=i.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(h.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+a.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var l=o.fragLoadingLoopThreshold;if(e.loadCounter>l&&Math.abs(this.fragLoadIdx-e.loadIdx)<l)return void i.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=i.autoLevelEnabled,e.bitrateTest=this.bitrateTest,i.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new s.default(i,"main")),void(this.state=g)}h.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=m,i.trigger(u.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return i.default.search(this._bufferedFrags,(function(t){return e<t.startPTS?-1:e>t.endPTS?1:0}))}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),o.default.isBuffered(r,t)?e=this.getBufferedFrag(t):o.default.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:n});var a=n.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:a}),this.fragPlaying=n}}}},{key:"immediateLevelSwitch",value:function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,o.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t,r=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)r=0;else{var a=this.hls.nextLoadLevel,i=this.levels[a],o=this.fragLastKbps;r=o&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*o)+1:0}if((n=this.getBufferedFrag(e.currentTime+r))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=O;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach((function(e){e.details&&e.details.fragments.forEach((function(e){e.loadCounter=void 0,e.backtracked=void 0}))})),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||h.logger.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,a=o.default.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===g){var i=this.fragCurrent;if(0===a.len&&i){var s=r.maxFragLookUpTolerance,u=i.start-s,l=i.start+i.duration+s;t<u||t>l?(i.loader&&(h.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v):h.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===w&&(0===a.len&&(this.fragPrevious=0),this.state=v);e&&(this.lastCurrentTime=t),this.state!==g&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||h.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){h.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,n=!1;e.levels.forEach((function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))})),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],a=t.totalduration,i=0;if(h.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),this.levelLastLoaded=r,t.live){var o=n.details;o&&t.fragments.length>0?(c.default.mergeDetails(o,t),i=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(i,o),t.PTSKnown?h.logger.log("live playlist sliding:"+i.toFixed(3)):h.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,h.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(i,t),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(h.logger.log("negative start time offset "+s+", count from end of last fragment"),s=i+a+s),h.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===b&&(this.state=v),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===m&&(this.state=v,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===g&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var n=e.stats,a=this.levels[t.level],i=a.details;if(h.logger.log("Loaded  "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=v,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=v,n.tparsed=n.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=E;var o=i.totalduration,l=t.level,c=t.sn,d=this.config.defaultAudioCodec||a.audioCodec;this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,h.logger.log("Parsing "+c+" of ["+i.startSN+" ,"+i.endSN+"],level "+l+", cc "+t.cc);var f=this.demuxer;f||(f=this.demuxer=new s.default(this.hls,"main"));var p=this.media,m=!(p&&p.seeking)&&(i.PTSKnown||!i.live),y=i.initSegment?i.initSegment.data:[];f.push(e.payload,y,d,a.videoCodec,t,o,m,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E){var n,a,i=e.tracks;if(i.audio&&this.altAudio&&delete i.audio,a=i.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",h.logger.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}for(n in(a=i.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,i),i){a=i[n],h.logger.log("main track:"+n+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===E){var a=this.levels[this.level],i=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),h.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(i.dropped=e.dropped,i.dropped){if(!i.backtracked)return h.logger.warn("missing video frame(s), backtracking fragment"),i.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=v,this.fragPrevious=i,void this.tick();h.logger.warn("Already backtracked on this fragment, appending with the gap")}else i.backtracked=!1;var o=c.default.updateFragPTSDTS(a.details,i,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(u.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach((function(r){r&&r.length&&t.state===E&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))})),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===E&&(this.stats.tparsed=performance.now(),this.state=S,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=v}var a=this.hls;a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,n=void 0,a=!1;for(var i in t){var o=t[i];"main"===o.id?(n=i,r=o,"video"===i&&(this.videoBuffer=t[i].buffer)):a=!0}a&&r?(h.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==E&&t!==S||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==S||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+d.default.toString(t.buffered));var r=this._bufferedFrags.filter((function(e){return o.default.isBuffered(t,(e.startPTS+e.endPTS)/2)}));r.push(e),this._bufferedFrags=r.sort((function(e,t){return e.startPTS-t.startPTS})),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=v}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,n=r&&o.default.isBuffered(r,r.currentTime)&&o.default.isBuffered(r,r.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var a=this.fragLoadError;a?a++:a=1;var i=this.config;if(a<=i.fragLoadingMaxRetry||n||t.autoLevel&&t.level){this.fragLoadError=a,t.loadCounter=0;var s=Math.min(Math.pow(2,a-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=y}else h.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=k}break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=v):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=k));break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==k&&(e.fatal?(this.state=k,h.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==b||(this.state=v));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==E&&this.state!==S||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media,t=this.config;if(e&&e.readyState){var r=e.currentTime,n=this.mediaBuffer?this.mediaBuffer:e,a=n.buffered;if(!this.loadedmetadata&&a.length){this.loadedmetadata=!0;var i=e.seeking?r:this.startPosition,s=o.default.isBuffered(n,i),l=a.start(0);(r!==i||!s&&Math.abs(i-l)<t.maxSeekHole)&&(h.logger.log("target start position:"+i),s||(i=l,h.logger.log("target start position not buffered, seek to buffered.start(0) "+i)),h.logger.log("adjust currentTime from "+r+" to "+i),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=o.default.bufferInfo(e,r,0),d=!(e.paused||e.ended||0===e.buffered.length);if(r!==this.lastCurrentTime)this.stallReported&&(h.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(d){var p=performance.now(),v=this.hls;if(this.stalled){var m=p-this.stalled,g=c.len,y=this.nudgeRetry||0;if(g<=.5&&m>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,h.logger.warn("playback stalling in low buffer @"+r),v.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var b=c.nextStart,E=b-r;if(b&&E<t.maxSeekHole&&E>0){this.nudgeRetry=++y;var S=y*t.nudgeOffset;h.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+b+" + nudge "+S),e.currentTime=b+S,this.stalled=void 0,v.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:b+S-r})}}else if(g>.5&&m>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,h.logger.warn("playback stalling in high buffer @"+r),v.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++y,y<t.nudgeMaxRetry){var O=e.currentTime,w=O+y*t.nudgeOffset;h.logger.log("adjust currentTime from "+O+" to "+w),e.currentTime=w,v.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else h.logger.error("still stuck in high buffer @"+r+" after "+t.nudgeMaxRetry+", raise fatal error"),v.trigger(u.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=v,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter((function(t){return o.default.isBuffered(e,(t.startPTS+t.endPTS)/2)})),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("main stream:"+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(l.default);r.default=T},{20:20,28:28,29:29,30:30,32:32,33:33,43:43,46:46,47:47}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.subtle=t,this.aesIV=r}return n(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();r.default=a},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return n(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],a=r[1],i=r[2],o=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[h]=m,t[m]=h;var g=f[h],y=f[g],b=f[y],E=257*f[m]^16843008*m;n[h]=E<<24|E>>>8,a[h]=E<<16|E>>>16,i[h]=E<<8|E>>>24,o[h]=E,E=16843009*b^65537*y^257*g^16843008*h,u[m]=E<<24|E>>>8,l[m]=E<<16|E>>>16,c[m]=E<<8|E>>>24,d[m]=E,h?(h=g^f[f[f[b^g]]],p^=f[f[p]]):h=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var i=this.ksRows=4*(a+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(i),l=this.invKeySchedule=new Uint32Array(i),c=this.sBox,d=this.rcon,f=this.invSubMix,h=f[0],p=f[1],v=f[2],m=f[3],g=void 0,y=void 0;for(o=0;o<i;o++)o<a?g=u[o]=t[o]:(y=g,o%a==0?(y=c[(y=y<<8|y>>>24)>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y],y^=d[o/a|0]<<24):a>6&&o%a==4&&(y=c[y>>>24]<<24|c[y>>>16&255]<<16|c[y>>>8&255]<<8|c[255&y]),u[o]=g=(u[o-a]^y)>>>0);for(s=0;s<i;s++)o=i-s,y=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?y:h[c[y>>>24]]^p[c[y>>>16&255]]^v[c[y>>>8&255]]^m[c[255&y]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var n,a,i=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix,l=u[0],c=u[1],d=u[2],f=u[3],h=this.uint8ArrayToUint32Array_(r),p=h[0],v=h[1],m=h[2],g=h[3],y=new Int32Array(e),b=new Int32Array(y.length),E=void 0,S=void 0,O=void 0,w=void 0,k=void 0,T=void 0,_=void 0,A=void 0,C=void 0,x=void 0,R=void 0,L=void 0,P=this.networkToHostOrderSwap;t<y.length;){for(C=P(y[t]),x=P(y[t+1]),R=P(y[t+2]),L=P(y[t+3]),k=C^o[0],T=L^o[1],_=R^o[2],A=x^o[3],n=4,a=1;a<i;a++)E=l[k>>>24]^c[T>>16&255]^d[_>>8&255]^f[255&A]^o[n],S=l[T>>>24]^c[_>>16&255]^d[A>>8&255]^f[255&k]^o[n+1],O=l[_>>>24]^c[A>>16&255]^d[k>>8&255]^f[255&T]^o[n+2],w=l[A>>>24]^c[k>>16&255]^d[T>>8&255]^f[255&_]^o[n+3],k=E,T=S,_=O,A=w,n+=4;E=s[k>>>24]<<24^s[T>>16&255]<<16^s[_>>8&255]<<8^s[255&A]^o[n],S=s[T>>>24]<<24^s[_>>16&255]<<16^s[A>>8&255]<<8^s[255&k]^o[n+1],O=s[_>>>24]<<24^s[A>>16&255]<<16^s[k>>8&255]<<8^s[255&T]^o[n+2],w=s[A>>>24]<<24^s[k>>16&255]<<16^s[T>>8&255]<<8^s[255&_]^o[n+3],n+=3,b[t]=P(E^p),b[t+1]=P(w^v),b[t+2]=P(O^m),b[t+3]=P(S^g),p=C,v=x,m=R,g=L,t+=4}return b.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();r.default=a},{}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(12)),o=n(e(15)),s=n(e(13)),u=e(28),l=e(46),c=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=r,this.logEnabled=!0;try{var n=crypto||self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,r,n){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(l.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new s.default),u.expandKey(t),n(u.decrypt(e,0,r))}else{this.logEnabled&&(l.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new o.default(c,t)),this.fastAesKey.expandKey().then((function(o){new i.default(c,r).decrypt(e,o).catch((function(i){a.onWebCryptoError(i,e,t,r,n)})).then((function(e){n(e)}))})).catch((function(i){a.onWebCryptoError(i,e,t,r,n)}))}}},{key:"onWebCryptoError",value:function(e,t,r,n,a){this.config.enableSoftwareAES?(l.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,a)):(l.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();r.default=c},{12:12,13:13,15:15,28:28,46:46}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.subtle=t,this.key=r}return n(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();r.default=a},{}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(17)),o=e(46),s=n(e(22)),u=function(){function e(t,r,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=n,this.remuxer=r}return a(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var a=this._audioTrack,u=s.default.getID3Data(e,0),l=90*s.default.getTimeStamp(u),c=0,d=l,f=e.length,h=u.length,p=[{pts:d,dts:d,data:u}];h<f-1;)if(i.default.isHeader(e,h)&&h+5<f){i.default.initTrackConfig(a,this.observer,e,h,a.manifestCodec);var v=i.default.appendFrame(a,e,h,l,c);if(!v){o.logger.log("Unable to parse AAC frame");break}h+=v.length,d=v.sample.pts,c++}else s.default.isHeader(e,h)?(u=s.default.getID3Data(e,h),p.push({pts:d,dts:d,data:u}),h+=u.length):h++;this.remuxer.remux(a,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=s.default.getID3Data(e,0);if(n&&void 0!==s.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(i.default.probe(e,t))return o.logger.log("ADTS sync word found !"),!0;return!1}}]),e}();r.default=u},{17:17,22:22,46:46}],17:[function(e,t,r){"use strict";var n=e(46),a=e(28),i={getAudioConfig:function(e,t,r,i){var o,s,u,l,c,d=navigator.userAgent.toLowerCase(),f=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((s=(60&t[r+2])>>>2)>h.length-1))return l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+i+",ADTS data:type:"+o+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(d)?s>=6?(o=5,c=new Array(4),u=s-3):(o=2,c=new Array(2),u=s):-1!==d.indexOf("android")?(o=2,c=new Array(2),u=s):(o=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&s>=6?u=s-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(s>=6&&1===l||/vivaldi/i.test(d))||!i&&1===l)&&(o=2,c=new Array(2)),u=s)),c[0]=o<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===o&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:l,codec:"mp4a.40."+o,manifestCodec:f};e.trigger(Event.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})},isHeaderPattern:function(e,t){return 255===e[t]&&240==(246&e[t+1])},getHeaderLength:function(e,t){return 1&e[t+1]?7:9},getFullFrameLength:function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.getHeaderLength(e,t);t+5<e.length&&(r=this.getFullFrameLength(e,t));var n=t+r;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1},initTrackConfig:function(e,t,r,a,i){if(!e.samplerate){var o=this.getAudioConfig(t,r,a,i);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}},getFrameDuration:function(e){return 9216e4/e},appendFrame:function(e,t,r,n,a){var i=this.getFrameDuration(e.samplerate),o=this.parseFrameHeader(t,r,n,a,i);if(o){var s=o.stamp,u=o.headerLength,l=o.frameLength,c={unit:t.subarray(r+u,r+u+l),pts:s,dts:s};return e.samples.push(c),e.len+=l,{sample:c,length:l+u}}},parseFrameHeader:function(e,t,r,n,a){var i,o,s=e.length;if(i=this.getHeaderLength(e,t),o=this.getFullFrameLength(e,t),(o-=i)>0&&t+i+o<=s)return{headerLength:i,frameLength:o,stamp:r+n*a}}};t.exports=i},{28:28,46:46}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=e(28),s=n(e(14)),u=n(e(16)),l=n(e(24)),c=n(e(27)),d=n(e(23)),f=n(e(40)),h=n(e(41)),p=function(){function e(t,r,n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.typeSupported=r,this.config=n,this.vendor=a}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,r,n,a,o,u,l,c,d,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new s.default(this.observer,this.config));var v,m=this;try{v=performance.now()}catch(e){v=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,(function(e){var s;try{s=performance.now()}catch(e){s=Date.now()}m.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:s}}),m.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,a,o,u,l,c,d,f,h)}))}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,a,o,u,l,c,d,f,h)}},{key:"pushDecrypted",value:function(e,t,r,n,a,s,p,v,m,g,y,b){var E=this.demuxer;if(!E||p&&!this.probe(e)){for(var S=this.observer,O=this.typeSupported,w=this.config,k=[{demux:u.default,remux:f.default},{demux:d.default,remux:f.default},{demux:c.default,remux:f.default},{demux:l.default,remux:h.default}],T=0,_=k.length;T<_;T++){var A=k[T],C=A.demux.probe;if(C(e)){var x=this.remuxer=new A.remux(S,w,O,this.vendor);E=new A.demux(S,x,w,O),this.probe=C;break}}if(!E)return void S.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=E}var R=this.remuxer;(p||v)&&(E.resetInitSegment(r,n,a,g),R.resetInitSegment()),p&&(E.resetTimeStamp(b),R.resetTimeStamp(b)),"function"==typeof E.setDecryptData&&E.setDecryptData(t),E.append(e,s,m,y)}}]),e}();r.default=p},{14:14,16:16,23:23,24:24,27:27,28:28,30:30,40:40,41:41}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=n(e(18)),i=n(e(30)),o=e(46),s=n(e(1));r.default=function(e){var t=new s.default;t.trigger=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",(function(n){var i=n.data;switch(i.cmd){case"init":var s=JSON.parse(i.config);e.demuxer=new a.default(t,i.typeSupported,s,i.vendor);try{(0,o.enableLogs)(!0===s.debug)}catch(e){}r("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,(function(t,r){var n=[],a={event:t,data:r};r.data1&&(a.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(a,n)}))}},{1:1,18:18,30:30,46:46}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(18)),s=n(e(19)),u=e(46),l=e(28),c=n(e(1)),d=function(){function t(r,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),this.hls=r,this.id=n;var a=this.observer=new c.default,d=r.config;a.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.emit.apply(a,[e,e].concat(r))},a.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.removeListener.apply(a,[e].concat(r))};var f=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);a.on(i.default.FRAG_DECRYPTED,f),a.on(i.default.FRAG_PARSING_INIT_SEGMENT,f),a.on(i.default.FRAG_PARSING_DATA,f),a.on(i.default.FRAG_PARSED,f),a.on(i.default.ERROR,f),a.on(i.default.FRAG_PARSING_METADATA,f),a.on(i.default.FRAG_PARSING_USERDATA,f),a.on(i.default.INIT_PTS_FOUND,f);var h={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(d.enableWorker&&"undefined"!=typeof Worker){u.logger.log("demuxing in webworker");var v=void 0;try{var m=e(3);v=this.w=m(s.default),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(e){r.trigger(i.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},v.postMessage({cmd:"init",typeSupported:h,vendor:p,id:n,config:JSON.stringify(d)})}catch(e){u.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&URL.revokeObjectURL(v.objectURL),this.demuxer=new o.default(a,h,d,p),this.w=void 0}}else this.demuxer=new o.default(a,h,d,p)}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,n,a,i,o,s){var l=this.w,c=isNaN(a.startDTS)?a.start:a.startDTS,d=a.decryptdata,f=this.frag,h=!(f&&a.cc===f.cc),p=!(f&&a.level===f.level),v=f&&a.sn===f.sn+1,m=!p&&v;if(h&&u.logger.log(this.id+":discontinuity detected"),p&&u.logger.log(this.id+":switch detected"),this.frag=a,l)l.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:c,discontinuity:h,trackSwitch:p,contiguous:m,duration:i,accurateTimeOffset:o,defaultInitPTS:s},[e]);else{var g=this.demuxer;g&&g.push(e,d,t,r,n,c,h,p,m,i,o,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),t}();r.default=d},{1:1,18:18,19:19,28:28,3:3,30:30,46:46}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(46),i=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return n(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");n.set(e.subarray(r,r+a)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n}},{key:"readSPS",value:function(){var e,t,r,n,a,i,o,s=0,u=0,l=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),m=this.skipEG.bind(this),g=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),v(3),d(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&v(1),g(),g(),v(1),p())for(i=3!==b?8:12,o=0;o<i;o++)p()&&y(o<6?16:64)}g();var E=h();if(0===E)h();else if(1===E)for(v(1),m(),m(),t=h(),o=0;o<t;o++)m();g(),v(1),r=h(),n=h(),0===(a=f(1))&&v(1),v(1),p()&&(s=h(),u=h(),l=h(),c=h());var S=[1,1];if(p()&&p())switch(d()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*u),height:(2-a)*(n+1)*16-(a?2:4)*(l+c),pixelRatio:S}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();r.default=i},{46:46}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",value:function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"getID3Data",value:function(t,r){for(var n=r,a=0;e.isHeader(t,r);)a+=10,a+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(a+=10),r+=a;if(a>0)return t.subarray(n,n+a)}},{key:"_readSize",value:function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]}},{key:"getTimeStamp",value:function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var a=r[n];if(e.isTimeStampFrame(a))return e._readTimeStamp(a)}}},{key:"isTimeStampFrame",value:function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}},{key:"_getFrameData",value:function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}}},{key:"getID3Frames",value:function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var a=e._readSize(t,r+6),i=(r+=10)+a;r+8<i;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n}},{key:"_decodeFrame",value:function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0}},{key:"_readTimeStamp",value:function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}}},{key:"_decodePrivFrame",value:function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}}},{key:"_decodeTextFrame",value:function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:i}}}},{key:"_decodeURLFrame",value:function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data);return{key:t.type,data:i}}},{key:"_utf8ArrayToStr",value:function(e){for(var t=void 0,r=void 0,n="",a=0,i=e.length;a<i;){var o=e[a++];switch(o>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(o);break;case 12:case 13:t=e[a++],n+=String.fromCharCode((31&o)<<6|63&t);break;case 14:t=e[a++],r=e[a++],n+=String.fromCharCode((15&o)<<12|(63&t)<<6|(63&r)<<0)}}return n}}]),e}();r.default=a},{}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(22)),o=e(46),s=n(e(25)),u=function(){function e(t,r,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=n,this.remuxer=r}return a(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var a=i.default.getID3Data(e,0),o=90*i.default.getTimeStamp(a),u=a.length,l=e.length,c=0,d=0,f=this._audioTrack,h=[{pts:o,dts:o,data:a}];u<l;)if(s.default.isHeader(e,u)){var p=s.default.appendFrame(f,e,u,o,c);if(!p)break;u+=p.length,d=p.sample.pts,c++}else i.default.isHeader(e,u)?(a=i.default.getID3Data(e,u),h.push({pts:d,dts:d,data:a}),u+=a.length):u++;this.remuxer.remux(f,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=i.default.getID3Data(e,0);if(n&&void 0!==i.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(s.default.probe(e,t))return o.logger.log("MPEG Audio sync word found !"),!0;return!1}}]),e}();r.default=u},{22:22,25:25,46:46}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e(30)),i=Math.pow(2,32)-1,o=function(){function e(t,r){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.remuxer=r}return n(e,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(t,r,n,i){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t),s={};o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:i?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:i?t:null}),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)}},{key:"append",value:function(t,r,n,i){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),o=this.initData);var s,u=this.initPTS;if(void 0===u){var l=e.getStartDTS(o,t);this.initPTS=u=l-r,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:u})}e.offsetStartDTS(o,t,u),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,i,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){var r=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(r)>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}},{key:"writeUint32",value:function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}},{key:"findBox",value:function(t,r){var n,a,i,o,s,u,l=[];if(t.data?(s=t.start,i=t.end,t=t.data):(s=0,i=t.byteLength),!r.length)return null;for(n=s;n<i;)u=(a=e.readUint32(t,n))>1?n+a:i,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?l.push({data:t,start:n+8,end:u}):(o=e.findBox({data:t,start:n+8,end:u},r.slice(1))).length&&(l=l.concat(o))),n=u;return l}},{key:"parseInitSegment",value:function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var a=n.data[n.start],i=0===a?12:20,o=e.readUint32(n,i),s=e.findBox(t,["mdia","mdhd"])[0];if(s){i=0===(a=s.data[s.start])?12:20;var u=e.readUint32(s,i),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var c={soun:"audio",vide:"video"}[e.bin2str(l.data.subarray(l.start+8,l.start+12))];c&&(r[o]={timescale:u,type:c},r[c]={timescale:u,id:o})}}}})),r}},{key:"getStartDTS",value:function(t,r){var n,a,i;return n=e.findBox(r,["moof","traf"]),a=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var a,i;return a=e.readUint32(n,4),i=t[a].timescale||9e4,(e.findBox(r,["tfdt"]).map((function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n}))[0]||1/0)/i}))}))),i=Math.min.apply(null,a),isFinite(i)?i:0}},{key:"offsetStartDTS",value:function(t,r,n){e.findBox(r,["moof","traf"]).map((function(r){return e.findBox(r,["tfhd"]).map((function(a){var o=e.readUint32(a,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map((function(t){var r=t.data[t.start],a=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,a-n*s);else{a*=Math.pow(2,32),a+=e.readUint32(t,8),a-=n*s;var o=Math.floor(a/(i+1)),u=Math.floor(a%(i+1));e.writeUint32(t,4,o),e.writeUint32(t,8,u)}}))}))}))}}]),e}();r.default=o},{30:30}],25:[function(e,t,r){"use strict";var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,r,n,a){if(!(r+24>t.length)){var i=this.parseHeader(t,r);if(i&&r+i.frameLength<=t.length){var o=n+a*(10368e4/i.sampleRate),s={unit:t.subarray(r,r+i.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=i.channelCount,e.samplerate=i.sampleRate,e.samples.push(s),e.len+=i.frameLength,{sample:s,length:i.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,a=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!==r&&0!==i&&15!==i&&3!==o){var u=3===r?3-a:3===a?3:4,l=1e3*n.BitratesMap[14*u+i-1],c=3===r?0:2===r?1:2,d=n.SamplingRateMap[3*c+o],f=s?1:0;return{sampleRate:d,channelCount:e[t+3]>>6==3?1:2,frameLength:3===a?(3===r?12:6)*l/d+f<<2:(3===r?144:72)*l/d+f|0}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var a=t+n;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}};t.exports=n},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e(14)),i=function(){function e(t,r,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.decryptdata=n,this.discardEPB=i,this.decrypter=new a.default(t,r)}return n(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,r,n){var a=e[t].unit,i=a.subarray(16,a.length-a.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),s=this;this.decryptBuffer(o,(function(i){i=new Uint8Array(i),a.set(i,16),n||s.decryptAacSamples(e,t+1,r)}))}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,a=32;a<=e.length-16;a+=160,n+=16)r.set(e.subarray(a,a+16),n);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e}},{key:"decryptAvcSample",value:function(e,t,r,n,a,i){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(s.buffer,(function(s){a.data=u.getAvcDecryptedUnit(o,s),i||u.decryptAvcSamples(e,t,r+1,n)}))}},{key:"decryptAvcSamples",value:function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var a=e[t].units;!(r>=a.length);r++){var i=a[r];if(!(i.length<=48||1!==i.type&&5!==i.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,i,o),!o)return}}}}}]),e}();r.default=i},{14:14}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(17)),o=n(e(25)),s=n(e(30)),u=n(e(21)),l=n(e(26)),c=e(46),d=e(28),f=function(){function e(t,r,n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=n,this.typeSupported=a,this.remuxer=r,this.sampleAes=null}return a(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new l.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var a,i,o,u,l,f=e.length,h=!1;this.contiguous=r;var p=this.pmtParsed,v=this._avcTrack,m=this._audioTrack,g=this._id3Track,y=v.id,b=m.id,E=g.id,S=this._pmtId,O=v.pesData,w=m.pesData,k=g.pesData,T=this._parsePAT,_=this._parsePMT,A=this._parsePES,C=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),L=this._parseID3PES.bind(this);for(f-=f%188,a=0;a<f;a+=188)if(71===e[a]){if(i=!!(64&e[a+1]),o=((31&e[a+1])<<8)+e[a+2],(48&e[a+3])>>4>1){if((u=a+5+e[a+4])===a+188)continue}else u=a+4;switch(o){case y:i&&(O&&(l=A(O))&&C(l,!1),O={data:[],size:0}),O&&(O.data.push(e.subarray(u,a+188)),O.size+=a+188-u);break;case b:i&&(w&&(l=A(w))&&(m.isAAC?x(l):R(l)),w={data:[],size:0}),w&&(w.data.push(e.subarray(u,a+188)),w.size+=a+188-u);break;case E:i&&(k&&(l=A(k))&&L(l),k={data:[],size:0}),k&&(k.data.push(e.subarray(u,a+188)),k.size+=a+188-u);break;case 0:i&&(u+=e[u]+1),S=this._pmtId=T(e,u);break;case S:i&&(u+=e[u]+1);var P=_(e,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(y=P.avc)>0&&(v.id=y),(b=P.audio)>0&&(m.id=b,m.isAAC=P.isAAC),(E=P.id3)>0&&(g.id=E),h&&!p&&(c.logger.log("reparse from beginning"),h=!1,a=-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(s.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});O&&(l=A(O))?(C(l,!0),v.pesData=null):v.pesData=O,w&&(l=A(w))?(m.isAAC?x(l):R(l),m.pesData=null):(w&&w.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=w),k&&(l=A(k))?(L(l),g.pesData=null):g.pesData=k,null==this.sampleAes?this.remuxer.remux(m,v,g,this._txtTrack,t,r,n):this.decryptAndRemux(m,v,g,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",value:function(e,t,r,n,a,i,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,(function(){s.decryptAndRemuxAvc(e,t,r,n,a,i,o)}))}else this.decryptAndRemuxAvc(e,t,r,n,a,i,o)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,n,a,i,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,(function(){s.remuxer.remux(e,t,r,n,a,i,o)}))}else this.remuxer.remux(e,t,r,n,a,i,o)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,n){var a,i,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){c.logger.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=i);break;case 21:-1===o.id3&&(o.id3=i);break;case 219:if(!n){c.logger.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=i);break;case 3:case 4:r?-1===o.audio&&(o.audio=i,o.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:c.logger.warn("HEVC stream type found, not supported for now");break;default:c.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o}},{key:"_parsePES",value:function(e){var t,r,n,a,i,o,s,u,l=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;192&(r=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&r?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),o-s>54e5&&(c.logger.warn(Math.round((o-s)/9e4)+"s delta between PTS and DTS, align them"),o=s)):s=o),u=(a=t[8])+9,e.size-=u,i=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var v=(t=d[h]).byteLength;if(u){if(u>v){u-=v;continue}t=t.subarray(u),v-=u,u=0}i.set(t,l),l+=v}return n&&(n-=a+3),{data:i,pts:o,dts:s,len:n}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&c.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var r,n,a,i=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&s.length&&(d(l,o),l=this.avcSample=f(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,l.frame=!0;var s=t.data;if(c&&s.length>4){var h=new u.default(s).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=i.avcSample=f(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new u.default(i.discardEPB(t.data))).readUByte();for(var p=0,v=0,m=!1,g=0;!m&&r.bytesAvailable>1;){p=0;do{p+=g=r.readUByte()}while(255===g);v=0;do{v+=g=r.readUByte()}while(255===g);if(4===p&&0!==r.bytesAvailable){if(m=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),b=31&y,E=[y,r.readUByte()];for(a=0;a<b;a++)E.push(r.readUByte()),E.push(r.readUByte()),E.push(r.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}else if(v<r.bytesAvailable)for(a=0;a<v;a++)r.readUByte()}break;case 7:if(n=!0,c=!0,!o.sps){var S=(r=new u.default(t.data)).readSPS();o.width=S.width,o.height=S.height,o.pixelRatio=S.pixelRatio,o.sps=[t.data],o.duration=i._duration;var O=t.data.subarray(1,4),w="avc1.";for(a=0;a<3;a++){var k=O[a].toString(16);k.length<2&&(k="0"+k),w+=k}o.codec=w}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,l&&d(l,o),l=i.avcSample=f(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)})),t&&l&&(d(l,o),this.avcSample=null)}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack.samples;e=r[r.length-1]}if(e){var n=e.units;t=n[n.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,r,n,a,i=0,o=e.byteLength,s=this._avcTrack,u=s.naluState||0,l=u,c=[],d=-1;for(-1===u&&(d=0,a=31&e[0],u=0,i=1);i<o;)if(t=e[i++],u)if(1!==u)if(t)if(1===t){if(d>=0)n={data:e.subarray(d,i-u-1),type:a},c.push(n);else{var f=this._getLastNalUnit();if(f&&(l&&i<=4-l&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-l)),(r=i-u-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h}}i<o?(d=i,a=31&e[i],u=0):u=-1}else u=0;else u=3;else u=t?0:2;else u=t?0:1;if(d>=0&&u>=0&&(n={data:e.subarray(d,o),type:a,state:u},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=u,c}},{key:"discardEPB",value:function(e){for(var t,r,n=e.byteLength,a=[],i=1;i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(a.push(i+2),i+=2):i++;if(0===a.length)return e;t=n-a.length,r=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===a[0]&&(o++,a.shift()),r[i]=e[o];return r}},{key:"_parseAACPES",value:function(e){var t,r,n,a,o,u,l,f=this._audioTrack,h=e.data,p=e.pts,v=this.aacOverFlow,m=this.aacLastPTS;if(v){var g=new Uint8Array(v.byteLength+h.byteLength);g.set(v,0),g.set(h,v.byteLength),h=g}for(n=0,o=h.length;n<o-1&&!i.default.isHeader(h,n);n++);if(!n||(n<o-1?(u="AAC PES did not start with ADTS header,offset:"+n,l=!1):(u="no ADTS header found in AAC PES",l=!0),c.logger.warn("parsing error:"+u),this.observer.trigger(s.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:l,reason:u}),!l)){if(i.default.initTrackConfig(f,this.observer,h,n,this.audioCodec),r=0,t=i.default.getFrameDuration(f.samplerate),v&&m){var y=m+t;Math.abs(y-p)>1&&(c.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-p)/90)),p=y)}for(;n<o;)if(i.default.isHeader(h,n)&&n+5<o){var b=i.default.appendFrame(f,h,n,p,r);if(!b)break;n+=b.length,a=b.sample.pts,r++}else n++;v=n<o?h.subarray(n,o):null,this.aacOverFlow=v,this.aacLastPTS=a}}},{key:"_parseMPEGPES",value:function(e){for(var t=e.data,r=t.length,n=0,a=0,i=e.pts;a<r;)if(o.default.isHeader(t,a)){var s=o.default.appendFrame(this._audioTrack,t,a,i,n);if(!s)break;a+=s.length,n++}else a++}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();r.default=f},{17:17,21:21,25:25,26:26,28:28,30:30,46:46}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],29:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(46),s=e(28),u=function(e){return e&&e.__esModule?e:{default:e}}(e(30)),l=function(){function e(t){n(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];this.handledEvents=a,this.useGenericHandler=!0,this.registerListeners()}return i(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}),this)}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach((function(e){this.hls.off(e,this.onEvent)}),this)}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){o.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();r.default=l},{28:28,30:30,46:46}],30:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();r.default=a},{}],32:[function(e,t,r){"use strict";t.exports={isBuffered:function(e,t){if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0;return!1},bufferInfo:function(e,t,r){if(e){var n,a=e.buffered,i=[];for(n=0;n<a.length;n++)i.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var n,a,i,o,s,u=[];for(e.sort((function(e,t){return e.start-t.start||t.end-e.end})),s=0;s<e.length;s++){var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<r?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,n=0,a=i=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(t+r>=d&&t<f)a=d,n=(i=f)-t;else if(t+r<d){o=d;break}}return{len:n,start:a,end:i,nextStart:o}}}},{}],33:[function(e,t,r){"use strict";var n=e(46),a={mergeDetails:function(e,t){var r,i=Math.max(e.startSN,t.startSN)-t.startSN,o=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,u=e.fragments,l=t.fragments,c=0;if(o<i)t.PTSKnown=!1;else{for(var d=i;d<=o;d++){var f=u[s+d],h=l[d];h&&f&&(c=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,h.backtracked=f.backtracked,h.dropped=f.dropped,r=h))}if(c)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<l.length;d++)l[d].cc+=c;if(r)a.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(d=0;d<l.length;d++)l[d].start+=p}t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,r,n,i,o){var s=r;if(!isNaN(t.startPTS)){var u=Math.abs(t.startPTS-r);isNaN(t.deltaPTS)?t.deltaPTS=u:t.deltaPTS=Math.max(u,t.deltaPTS),s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),i=Math.min(i,t.startDTS),o=Math.max(o,t.endDTS)}var l=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=n,t.startDTS=i,t.endDTS=o,t.duration=n-r;var c,d,f,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;for(c=h-e.startSN,(d=e.fragments)[c]=t,f=c;f>0;f--)a.updatePTS(d,f,f-1);for(f=c;f<d.length-1;f++)a.updatePTS(d,f,f+1);return e.PTSKnown=!0,l},updatePTS:function(e,t,r){var a=e[t],i=e[r],o=i.startPTS;isNaN(o)?i.start=r>t?a.start+a.duration:Math.max(a.start-i.duration,0):r>t?(a.duration=o-a.start,a.duration<0&&n.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):(i.duration=a.start-o,i.duration<0&&n.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=a},{46:46}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=n(e(2)),s=n(e(30)),u=e(28),l=n(e(38)),c=n(e(36)),d=n(e(37)),f=n(e(11)),h=n(e(10)),p=n(e(9)),v=e(46),m=n(e(1)),g=e(4),y=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e);var n=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var i in n)i in r||(r[i]=n[i]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,v.enableLogs)(r.debug),this.config=r,this._autoLevelCapping=-1;var o=this.observer=new m.default;o.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.emit.apply(o,[e,e].concat(r))},o.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[e].concat(r))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var s=this.abrController=new r.abrController(this),u=new r.bufferController(this),g=new r.capLevelController(this),y=new r.fpsController(this),b=new l.default(this),E=new c.default(this),S=new d.default(this),O=new p.default(this),w=[this.levelController=new h.default(this),this.streamController=new f.default(this)],k=r.audioStreamController;k&&w.push(new k(this)),this.networkControllers=w;var T=[b,E,S,s,u,g,y,O];if(k=r.audioTrackController){var _=new k(this);this.audioTrackController=_,T.push(_)}if(k=r.subtitleTrackController){var A=new k(this);this.subtitleTrackController=A,T.push(A)}[r.subtitleStreamController,r.timelineController].forEach((function(e){e&&T.push(new e(t))})),this.coreComponents=T}return i(e,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&n}},{key:"version",get:function(){return"0.7.11"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:g.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),i(e,[{key:"destroy",value:function(){v.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(e){e.destroy()})),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){v.logger.log("attachMedia"),this.media=e,this.trigger(s.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){v.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=o.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),v.logger.log("loadSource:"+e),this.url=e,this.trigger(s.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;v.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))}},{key:"stopLoad",value:function(){v.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))}},{key:"swapAudioCodec",value:function(){v.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){v.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){v.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){v.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){v.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){v.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){v.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){v.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();r.default=y},{1:1,10:10,11:11,2:2,28:28,30:30,36:36,37:37,38:38,4:4,46:46,9:9}],35:[function(e,t,r){"use strict";t.exports=e(34).default},{34:34}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=e(28),u=e(46),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FRAG_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},o.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],a=this.hls.config;t.loaded=0,n&&(u.logger.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=t.loader=void 0!==a.fLoader?new a.fLoader(a):new a.loader(a);var i,o,s=void 0;s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,c=t.byteRangeEndOffset;isNaN(l)||isNaN(c)||(s.rangeStart=l,s.rangeEnd=c),i={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(s,i,o)}},{key:"loadsuccess",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.data,o=r.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:a,frag:o,stats:t,networkDetails:n})}},{key:"loaderror",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})}},{key:"loadtimeout",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})}},{key:"loadprogress",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.frag;a.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:n})}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(30)),o=n(e(29)),s=e(28),u=e(46),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],a=t.decryptdata,o=a.uri;if(o!==this.decrypturl||null===this.decryptkey){var s,l,c,d=this.hls.config;n&&(u.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new d.loader(d),this.decrypturl=o,this.decryptkey=null,s={url:o,frag:t,responseType:"arraybuffer"},l={timeout:d.fragLoadingTimeOut,maxRetry:d.fragLoadingMaxRetry,retryDelay:d.fragLoadingRetryDelay,maxRetryDelay:d.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,c)}else this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})}},{key:"loaderror",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],38:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=n(e(2)),s=n(e(30)),u=n(e(29)),l=e(28),c=n(e(42)),d=e(46),f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,m=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return i(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=o.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),g=function(){function e(){a(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return i(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new m).method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=o.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),y=function(e){function t(e){a(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s.default.MANIFEST_LOADING,s.default.LEVEL_LOADING,s.default.AUDIO_TRACK_LOADING,s.default.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},u.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void d.logger.trace("playlist request ongoing");d.logger.warn("abort previous loader for type:"+t.type),r.abort()}var a,i,o=this.hls.config,s=void 0,u=void 0,l=void 0,c=void 0;"manifest"===t.type?(s=o.manifestLoadingMaxRetry,u=o.manifestLoadingTimeOut,l=o.manifestLoadingRetryDelay,c=o.manifestLoadingMaxRetryTimeout):(s=o.levelLoadingMaxRetry,u=o.levelLoadingTimeOut,l=o.levelLoadingRetryDelay,c=o.levelLoadingMaxRetryTimeout,d.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=void 0!==o.pLoader?new o.pLoader(o):new o.loader(o),t.url=e,t.responseType="",a={timeout:u,maxRetry:s,retryDelay:l,maxRetryDelay:c},i={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,a,i)}},{key:"resolve",value:function(e,t){return o.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],n=void 0;for(f.lastIndex=0;null!=(n=f.exec(e));){var a={},i=a.attrs=new c.default(n[1]);a.url=this.resolve(n[2],t);var o=i.decimalResolution("RESOLUTION");o&&(a.width=o.width,a.height=o.height),a.bitrate=i.decimalInteger("AVERAGE-BANDWIDTH")||i.decimalInteger("BANDWIDTH"),a.name=i.NAME;var s=i.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];-1!==l.indexOf("avc1")?a.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?a.videoCodec=l:a.audioCodec=l}}r.push(a)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=void 0,i=[],o=0;for(h.lastIndex=0;null!=(a=h.exec(e));){var s={},u=new c.default(a[1]);u.TYPE===r&&(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=r,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URI,t)),s.lang=u.LANGUAGE,s.name||(s.name=s.lang),n&&(s.audioCodec=n),s.id=o++,i.push(s))}return i}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var a,i,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new m,f=0,h=null,y=new g;for(p.lastIndex=0;null!==(a=p.exec(e));){var b=a[1];if(b){y.duration=parseFloat(b);var E=(" "+a[2]).slice(1);y.title=E||null,y.tagList.push(E?["INF",b,E]:["INF",b])}else if(a[3]){if(!isNaN(y.duration)){var S=o++;y.type=n,y.start=s,y.levelkey=l,y.sn=S,y.level=r,y.cc=f,y.baseurl=t,y.relurl=(" "+a[3]).slice(1),u.fragments.push(y),h=y,s+=y.duration,y=new g}}else if(a[4]){if(y.rawByteRange=(" "+a[4]).slice(1),h){var O=h.byteRangeEndOffset;O&&(y.lastByteRangeEndOffset=O)}}else if(a[5])y.rawProgramDateTime=(" "+a[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]);else{for(a=a[0].match(v),i=1;i<a.length&&void 0===a[i];i++);var w=(" "+a[i+1]).slice(1),k=(" "+a[i+2]).slice(1);switch(a[i]){case"#":y.tagList.push(k?[w,k]:[w]);break;case"PLAYLIST-TYPE":u.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(w);break;case"TARGETDURATION":u.targetduration=parseFloat(w);break;case"VERSION":u.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":f++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(w);break;case"KEY":var T=w,_=new c.default(T),A=_.enumeratedString("METHOD"),C=_.URI,x=_.hexadecimalInteger("IV");A&&(l=new m,C&&["AES-128","SAMPLE-AES"].indexOf(A)>=0&&(l.method=A,l.baseuri=t,l.reluri=C,l.key=null,l.iv=x));break;case"START":var R=w,L=new c.default(R).decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(u.startTimeOffset=L);break;case"MAP":var P=new c.default(w);y.relurl=P.URI,y.rawByteRange=P.BYTERANGE,y.baseurl=t,y.level=r,y.type=n,y.sn="initSegment",u.initSegment=y,y=new g;break;default:d.logger.warn("line parsed but not handled: "+a)}}}return(y=h)&&!y.relurl&&(u.fragments.pop(),s-=y.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.data,i=e.url,o=r.type,u=r.id,c=r.level,f=this.hls;if(this.loaders[o]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=r.url),t.tload=performance.now(),0===a.indexOf("#EXTM3U"))if(a.indexOf("#EXTINF:")>0){var h="audioTrack"!==o&&"subtitleTrack"!==o,p=isNaN(c)?isNaN(u)?0:u:c,v=this.parseLevelPlaylist(a,i,p,"audioTrack"===o?"audio":"subtitleTrack"===o?"subtitle":"main");v.tload=t.tload,"manifest"===o&&f.trigger(s.default.MANIFEST_LOADED,{levels:[{url:i,details:v}],audioTracks:[],url:i,stats:t,networkDetails:n}),t.tparsed=performance.now(),v.targetduration?h?f.trigger(s.default.LEVEL_LOADED,{details:v,level:c||0,id:u||0,stats:t,networkDetails:n}):"audioTrack"===o?f.trigger(s.default.AUDIO_TRACK_LOADED,{details:v,id:u,stats:t,networkDetails:n}):"subtitleTrack"===o&&f.trigger(s.default.SUBTITLE_TRACK_LOADED,{details:v,id:u,stats:t,networkDetails:n}):f.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration",networkDetails:n})}else{var m=this.parseMasterPlaylist(a,i);if(m.length){var g=this.parseMasterPlaylistMedia(a,i,"AUDIO",m[0].audioCodec),y=this.parseMasterPlaylistMedia(a,i,"SUBTITLES");if(g.length){var b=!1;g.forEach((function(e){e.url||(b=!0)})),!1===b&&m[0].audioCodec&&!m[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main"}))}f.trigger(s.default.MANIFEST_LOADED,{levels:m,audioTracks:g,subtitles:y,url:i,stats:t,networkDetails:n})}else f.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest",networkDetails:n})}else f.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:l.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter",networkDetails:n})}},{key:"loaderror",value:function(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;switch(t.type){case"manifest":r=l.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=l.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,response:e,context:t,networkDetails:a})}},{key:"loadtimeout",value:function(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;switch(t.type){case"manifest":r=l.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=l.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=l.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(s.default.ERROR,{type:l.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,context:t,networkDetails:a})}}]),t}(u.default);r.default=y},{2:2,28:28,29:29,30:30,42:42,46:46}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=Math.pow(2,32)-1,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"init",value:function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,a=r.length,i=a;a--;)n+=r[a].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),a=0,n=8;a<i;a++)t.set(r[a],n),n+=r[a].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){r*=t;var n=Math.floor(r/(a+1)),i=Math.floor(r%(a+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))}},{key:"moov",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))}},{key:"mvhd",value:function(t,r){r*=t;var n=Math.floor(r/(a+1)),i=Math.floor(r%(a+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)}},{key:"sdtp",value:function(t){var r,n,a=t.samples||[],i=new Uint8Array(4+a.length);for(n=0;n<a.length;n++)r=a[n].flags,i[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,i)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var r,n,a,i=[],o=[];for(r=0;r<t.sps.length;r++)a=(n=t.sps[r]).byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)a=(n=t.pps[r]).byteLength,o.push(a>>>8&255),o.push(255&a),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,o=t.height,s=Math.floor(n/(a+1)),u=Math.floor(n%(a+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,r){var n=e.sdtp(t),i=t.id,o=Math.floor(r/(a+1)),s=Math.floor(r%(a+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var n,a,i,o,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=(a=l[n]).duration,o=a.size,s=a.flags,u=a.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r}}]),e}();r.default=i},{}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=n(e(31)),o=n(e(30)),s=e(46),u=n(e(39)),l=e(28),c=function(){function e(t,r,n,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t,this.config=r,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=a&&a.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return a(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,n,a,i,u){if(this.ISGenerated){if(u){var l=this._initPTS,c=this._PTSNormalize,d=e.inputTimeScale||t.inputTimeScale,f=1/0,h=1/0,p=e.samples;if(p.length&&(f=h=c(p[0].pts-d*a,l)),(p=t.samples).length){var v=p[0];f=Math.min(f,c(v.pts-d*a,l)),h=Math.min(h,c(v.dts-d*a,l))}if(f!==1/0){var m=l-f;Math.abs(m)>10*d&&(s.logger.warn("timestamp inconsistency, "+(m/d).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=f,this._initDTS=h,this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:f}))}}}else this.generateIS(e,t,a);if(this.ISGenerated)if(e.samples.length){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,a));var g=this.remuxAudio(e,a,i,u);if(t.samples.length){var y=void 0;g&&(y=g.endPTS-g.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,a)),this.remuxVideo(t,a,i,y,u)}}else{var b=void 0;t.samples.length&&(b=this.remuxVideo(t,a,i,u)),b&&e.codec&&this.remuxEmptyAudio(e,a,i,b)}r.samples.length&&this.remuxID3(r,a),n.samples.length&&this.remuxText(n,a),this.observer.trigger(o.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var n,a,i=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,h="audio/mp4",p={},v={tracks:p},m=void 0===this._initPTS;if(m&&(n=a=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(h="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),p.audio={container:h,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:u.default.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(n=a=c[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&d.length){var g=t.inputTimeScale;t.timescale=g,p.video={container:"video/mp4",codec:t.codec,initSegment:u.default.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(n=Math.min(n,d[0].pts-g*r),a=Math.min(a,d[0].dts-g*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(i.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,v),this.ISGenerated=!0,m&&(this._initPTS=n,this._initDTS=a)):i.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,n,a){var i,c,d,f,h,p,v,m=8,g=e.timescale,y=e.samples,b=[],E=y.length,S=this._PTSNormalize,O=this._initDTS,w=this.nextAvcDts,k=this.isSafari;k&&(r|=y.length&&w&&(a&&Math.abs(t-w/g)<.1||Math.abs(y[0].pts-w-O)<g/5)),r||(w=t*g),y.forEach((function(e){e.pts=S(e.pts-O,w),e.dts=S(e.dts-O,w)})),y.sort((function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id}));var T=y.reduce((function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)}),0);if(T<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var _=0;_<y.length;_++)y[_].dts+=T}var A=y[0];h=Math.max(A.dts,0),f=Math.max(A.pts,0);var C=Math.round((h-w)/90);r&&C&&(C>1?s.logger.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&s.logger.log("AVC:"+-C+" ms overlapping between fragments detected"),h=w,y[0].dts=h,f=Math.max(f-C,w),y[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+C+" ms")),A=y[y.length-1],v=Math.max(A.dts,0),p=Math.max(A.pts,0,v),k&&(i=Math.round((v-h)/(y.length-1)));for(var x=0,R=0,L=0;L<E;L++){for(var P=y[L],D=P.units,j=D.length,M=0,I=0;I<j;I++)M+=D[I].data.length;R+=M,x+=j,P.length=M,P.dts=k?h+L*i:Math.max(P.dts,h),P.pts=Math.max(P.pts,P.dts)}var F=R+4*x+8;try{c=new Uint8Array(F)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MUX_ERROR,details:l.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var B=new DataView(c.buffer);B.setUint32(0,F),c.set(u.default.types.mdat,4);for(var N=0;N<E;N++){for(var U=y[N],z=U.units,V=0,G=void 0,W=0,H=z.length;W<H;W++){var q=z[W],K=q.data,Y=q.data.byteLength;B.setUint32(m,Y),m+=4,c.set(K,m),m+=Y,V+=4+Y}if(k)G=Math.max(0,i*Math.round((U.pts-U.dts)/i));else{if(N<E-1)i=y[N+1].dts-U.dts;else{var X=this.config,Q=U.dts-y[N>0?N-1:N].dts;if(X.stretchShortVideoTrack){var Z=X.maxBufferHole,$=X.maxSeekHole,J=Math.floor(Math.min(Z,$)*g),ee=(n?f+n*g:this.nextAudioPts)-U.pts;ee>J?((i=ee-Q)<0&&(i=Q),s.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=Q}else i=Q}G=Math.round(U.pts-U.dts)}b.push({size:V,duration:i,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=v+i;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=b[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=b,d=u.default.moof(e.sequenceNumber++,h,e),e.samples=[];var ne={data1:d,data2:c,startPTS:f/g,endPTS:(p+i)/g,startDTS:h/g,endDTS:this.nextAvcDts/g,type:"video",nb:b.length,dropped:te};return this.observer.trigger(o.default.FRAG_PARSING_DATA,ne),ne}},{key:"remuxAudio",value:function(e,t,r,n){var a,c,d,f,h,p,v,m=e.inputTimeScale,g=m/e.timescale,y=(e.isAAC?1024:1152)*g,b=this._PTSNormalize,E=this._initDTS,S=!e.isAAC&&this.typeSupported.mpeg,O=e.samples,w=[],k=this.nextAudioPts;if((r|=O.length&&k&&(n&&Math.abs(t-k/m)<.1||Math.abs(O[0].pts-k-E)<20*y))||(k=t*m),O.forEach((function(e){e.pts=e.dts=b(e.pts-E,k)})),O.sort((function(e,t){return e.pts-t.pts})),n&&e.isAAC)for(var T=0,_=k;T<O.length;){var A,C=O[T];A=C.pts-_;var x=Math.abs(1e3*A/m);if(A<=-y)s.logger.warn("Dropping 1 audio frame @ "+(_/m).toFixed(3)+"s due to "+x+" ms overlap."),O.splice(T,1),e.len-=C.unit.length;else if(A>=y&&x<1e4&&_){var R=Math.round(A/y);s.logger.warn("Injecting "+R+" audio frame @ "+(_/m).toFixed(3)+"s due to "+Math.round(1e3*A/m)+" ms gap.");for(var L=0;L<R;L++){var P=Math.max(_,0);(d=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=C.unit.subarray()),O.splice(T,0,{unit:d,pts:P,dts:P}),e.len+=d.length,_+=y,T++}C.pts=C.dts=_,_+=y,T++}else Math.abs(A),C.pts=C.dts=_,_+=y,T++}for(var D=0,j=O.length;D<j;D++){var M=O[D],I=M.unit,F=M.pts;if(void 0!==v)c.duration=Math.round((F-v)/g);else{var B=Math.round(1e3*(F-k)/m),N=0;if(r&&e.isAAC&&B){if(B>0&&B<1e4)N=Math.round((F-k)/y),s.logger.log(B+" ms hole between AAC samples detected,filling it"),N>0&&((d=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=I.subarray()),e.len+=N*d.length);else if(B<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(k/m).toFixed(3)+"s/"+(F/m).toFixed(3)+"s/"+-B+"ms"),e.len-=I.byteLength;continue}F=k}if(p=Math.max(0,F),!(e.len>0))return;var U=S?e.len:e.len+8;a=S?0:8;try{f=new Uint8Array(U)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:l.ErrorTypes.MUX_ERROR,details:l.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}S||(new DataView(f.buffer).setUint32(0,U),f.set(u.default.types.mdat,4));for(var z=0;z<N;z++)(d=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=I.subarray()),f.set(d,a),a+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c)}f.set(I,a);var V=I.byteLength;a+=V,c={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(c),v=F}var G=0,W=w.length;if(W>=2&&(G=w[W-2].duration,c.duration=G),W){this.nextAudioPts=k=v+g*G,e.len=0,e.samples=w,h=S?new Uint8Array:u.default.moof(e.sequenceNumber++,p/g,e),e.samples=[];var H=p/m,q=k/m,K={data1:h,data2:f,startPTS:H,endPTS:q,startDTS:H,endDTS:q,type:"audio",nb:W};return this.observer.trigger(o.default.FRAG_PARSING_DATA,K),K}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,n){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),u=this.nextAudioPts,l=(void 0!==u?u:n.startDTS*a)+this._initDTS,c=n.endDTS*a+this._initDTS,d=1024*o,f=Math.ceil((c-l)/d),h=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),h){for(var p=[],v=0;v<f;v++){var m=l+v*d;p.push({unit:h,pts:m,dts:m}),e.len+=h.length}e.samples=p,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length,a=e.inputTimeScale,i=this._initPTS,s=this._initDTS;if(n){for(var u=0;u<n;u++)(r=e.samples[u]).pts=(r.pts-i)/a,r.dts=(r.dts-s)/a;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort((function(e,t){return e.pts-t.pts}));var r,n=e.samples.length,a=e.inputTimeScale,i=this._initPTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-i)/a;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}}]),e}();r.default=c},{28:28,30:30,31:31,39:39,46:46}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e(30)),i=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.observer=t}return n(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,n,i,o,s,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(a.default.FRAG_PARSING_DATA,{data1:u,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),l.trigger(a.default.FRAG_PARSED)}}]),e}();r.default=i},{30:30}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,o=function(){function e(t){for(var r in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}return n(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(i.lastIndex=0;null!==(t=i.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r}}]),e}();r.default=o},{}],43:[function(e,t,r){"use strict";t.exports={search:function(e,t){for(var r=0,n=e.length-1,a=null,i=null;r<=n;){var o=t(i=e[a=(r+n)/2|0]);if(o>0)r=a+1;else{if(!(o<0))return i;n=a-1}}return null}}},{}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(e(45)),i=function(){function e(t,r,n,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(r),this.fast_=new a.default(n)}return n(e,[{key:"sample",value:function(e,t){var r=8e3*t/(e=Math.max(e,this.minDelayMs_)),n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();r.default=i},{45:45}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return n(e,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();r.default=a},{}],46:[function(e,t,r){"use strict";function n(){}function a(e,t){return"["+e+"] > "+t}function i(e){var t=self.console[e];return t?function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n[0]&&(n[0]=a(e,n[0])),t.apply(self.console,n)}:n}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=s;r.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":o(e))){!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach((function(t){u[t]=e[t]?e[t].bind(e):i(t)}))}(e,"debug","log","info","warn","error");try{u.log()}catch(e){u=s}}else u=s},r.logger=u},{}],47:[function(e,t,r){"use strict";t.exports={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}}},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(46),i=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return n(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,o=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===r){var s=t.status;if(s>=200&&s<300){n.tload=Math.max(n.tfirst,performance.now());var u,l=void 0;u="arraybuffer"===i.responseType?(l=t.response).byteLength:(l=t.responseText).length,n.loaded=n.total=u;var c={url:t.responseURL,data:l};this.callbacks.onSuccess(c,n,i,t)}else n.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i,t)):(a.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)}},{key:"loadprogress",value:function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)}}]),e}();r.default=i},{46:46}]},{},[35])(35)},566:function(e,t,r){"use strict";r.r(t);var n=r(311),a=r(244),i=r(312),o=r(309),s=r(184),u=r(53),l=r(310),c=r(69),d=r(242),f=r(243),h=r(0),p=r.n(h),v=r(368),m=r(567),g=r.n(m);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var E=function(){function e(t,r,n,a){var i=this;Object(d.a)(this,e),y(this,"remove",(function(){e.queue=e.queue.filter((function(e){return e.start!==i.start}))})),this.start=r,e.queue.push(this);var o=new XMLHttpRequest;this.xhr=o,o.open("get",t),o.responseType="arraybuffer",o.setRequestHeader("Range","bytes=".concat(r,"-").concat(n)),o.onload=function(){200!==o.status&&206!==o.status||a(o.response),i.remove()},o.send(),o.onerror=function(){i.remove()},o.onabort=function(){i.remove()}}return Object(f.a)(e,null,[{key:"clear",value:function(){for(;e.queue.length;){e.queue.shift().xhr.abort()}}}]),e}();y(E,"queue",[]);var S=function(){function e(t){Object(d.a)(this,e),this.buffer=t,this.position=0}return Object(f.a)(e,[{key:"readType",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t=[],r=0;r<e;r++)t.push(this.buffer[this.position++]);return String.fromCharCode.apply(null,t)}},{key:"readByte",value:function(e){switch(e){case 1:return this.readOneByte();case 2:return this.readTwoByte();case 3:return this.readThreeByte();case 4:return this.readFourByte();default:return 0}}},{key:"readOneByte",value:function(){return this.buffer[this.position++]>>>0}},{key:"readTwoByte",value:function(){return(this.buffer[this.position++]<<8|this.buffer[this.position++])>>>0}},{key:"readThreeByte",value:function(){return(this.buffer[this.position++]<<16|this.buffer[this.position++]<<8|this.buffer[this.position++])>>>0}},{key:"readFourByte",value:function(){return(this.buffer[this.position++]<<24|this.buffer[this.position++]<<16|this.buffer[this.position++]<<8|this.buffer[this.position++])>>>0}}]),e}();var O=[null,null,null,"ESDescrTag","DecoderConfigDescrTag","DecSpecificDescrTag"];var w={ftyp:function(e){for(var t=new S(e),r=t.readType(),n=t.readByte(4),a=[],i=t.position;i<e.length;i+=4)a.push(t.readType(4));return{majorBrand:r,minorVersion:n,compatibleBrands:a}},mvhd:function(e){var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=t.readByte(4),o=t.readByte(4),s=t.readByte(4),u=t.readByte(4),l=t.readByte(1);t.readByte(3),t.readByte(4),t.readByte(4);for(var c=[],d=0;d<36;d+=4)c.push(t.readByte(4));for(var f=0;f<24;f+=4)t.readByte(4);return{version:r,flags:n,creationTime:a,modificationTime:i,timescale:o,duration:s,rate:u,volume:l,matrix:c,nextTrackID:t.readByte(4)}},tkhd:function(e){var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=t.readByte(4),o=t.readByte(4);t.readByte(4);var s=t.readByte(4);t.readByte(4),t.readByte(4);var u=t.readByte(2),l=t.readByte(2),c=t.readByte(2);t.readByte(2);for(var d=[],f=0;f<36;f+=4)d.push(t.readByte(4));return{version:r,flags:n,creationTime:a,modificationTime:i,trackID:o,duration:s,layer:u,alternateGroup:l,volume:c,matrix:d,width:Number("".concat(t.readByte(2),".").concat(t.readByte(2))),height:Number("".concat(t.readByte(2),".").concat(t.readByte(2)))}},elst:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;++o){var s=t.readByte(4),u=t.readByte(4);4294967295===u&&(u=-1);var l=t.readByte(2),c=t.readByte(2);i.push({segmentDuration:s,mediaTime:u,mediaRateInteger:l,mediaRateFraction:c})}return{version:r,flags:n,entries:i}},mdhd:function(e){var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=t.readByte(4),o=t.readByte(4),s=t.readByte(4),u=t.readByte(2),l=[];l[0]=u>>10&31,l[1]=u>>5&31,l[2]=31&u;var c=String.fromCharCode(96+l[0],96+l[1],96+l[2]);return t.readByte(2),{version:r,flags:n,creationTime:a,modificationTime:i,timescale:o,duration:s,languageString:c}},hdlr:function(e){var t=new S(e),r=t.readByte(1),n=t.readByte(3);t.readByte(4);var a=t.readType().toString(),i=t.readType().toString();t.readByte(4),t.readByte(4);for(var o,s=[];0!==(o=t.readByte(1));)s.push(String.fromCharCode(o));return{version:r,flags:n,handlerType:a,handlerType2:i||0,name:s.join("")}},vmhd:function(e){var t=new S(e);return{version:t.readByte(1),flags:t.readByte(3),graphicsmode:t.readByte(2),opcolor:new Array(3).fill(t.readByte(2))}},dref:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=t.buffer.slice(8),s=new S(o),u=new _,l=0;l<a;l++)u.readSize(s),u.readType(s),u.readBody(s),i.push(u.box);return{version:r,flags:n,url:i}},"url ":function(e){var t=new S(e);return{version:t.readByte(1),flags:t.readByte(3)}},stsd:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=t.buffer.slice(8),s=new S(o),u=new _,l="avc1",d=0;d<a;d++)u.readSize(s),u.readType(s),u.readBody(s),i.push(u.box),l=u.type;return Object(c.a)({version:r,flags:n},l,i)},avc1:function(e){var t=new S(e);t.readByte(4),t.readByte(2);var r=t.readByte(2);t.readByte(2),t.readByte(2),t.readByte(4),t.readByte(4),t.readByte(4);var n=t.readByte(2),a=t.readByte(2),i=t.readByte(4),o=t.readByte(4);t.readByte(4);var s=t.readByte(2),u=t.readType(32),l=t.readByte(2);t.readByte(2);var c=t.buffer.slice(78),d=new S(c),f=new _;return f.readSize(d),f.readType(d),f.readBody(d),{dataReferenceIndex:r,width:n,height:a,horizresolution:i,vertresolution:o,frameCount:s,compressorname:u,depth:l,avcC:f.box}},avcC:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(1),a=t.readByte(1),i=t.readByte(1),o=3&t.readByte(1),s=31&t.readByte(1),u=[],c=0;c<s;c++){var d=t.readByte(2);u.push.apply(u,Object(l.a)(t.buffer.slice(t.position,t.position+d))),t.position+=d}for(var f=t.readByte(1),h=[],p=0;p<f;p++){var v=t.readByte(2);h.push.apply(h,Object(l.a)(t.buffer.slice(t.position,t.position+v))),t.position+=v}return{configurationVersion:r,AVCProfileIndication:n,profileCompatibility:a,AVCLevelIndication:i,lengthSizeMinusOne:o,SPS:u,PPS:h}},stts:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;o++){var s=t.readByte(4),u=t.readByte(4);i.push({sampleCount:s,sampleDelta:u})}return{version:r,flags:n,samples:i}},stss:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;o++)i.push({sampleNumber:t.readByte(4)});return{version:r,flags:n,samples:i}},ctts:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;o++)i.push({sampleCount:t.readByte(4),sampleOffset:t.readByte(4)});return{version:r,flags:n,samples:i}},stsc:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;o++)i.push({firstChunk:t.readByte(4),samplesPerChunk:t.readByte(4),sampleDescriptionIndex:t.readByte(4)});return{version:r,flags:n,samples:i}},stsz:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=t.readByte(4),o=[],s=0;s<i;s++)o.push({entrySize:t.readByte(4)});return{version:r,flags:n,sampleSize:a,samples:o}},stco:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=t.readByte(4),i=[],o=0;o<a;o++)i.push({chunkOffset:t.readByte(4)});return{version:r,flags:n,samples:i}},smhd:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=[],i=0;i<4;i++)a.push(t.readByte(1));return{version:r,flags:n,data:a}},mp4a:function(e){var t=new S(e);t.readByte(4),t.readByte(2);var r=t.readByte(2);t.readByte(2),t.readByte(2),t.readByte(4);var n=t.readByte(2),a=t.readByte(2);t.readByte(4);var i=t.readByte(4)/65536,o=t.buffer.slice(28),s=new S(o),u=new _;return u.readSize(s),u.readType(s),u.readBody(s),{dataReferenceIndex:r,channelCount:n,sampleSize:a,sampleRate:i,esds:u.box}},esds:function(e){var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=O[t.readByte(1)];return Object(c.a)({version:r,flags:n},a,function(e){var t={},r=e.readByte(1);128===r?(e.readByte(2),r=e.readByte(1)+5):r+=2;return t.size=r,t.ESID=e.readByte(2),t.streamPriority=e.readByte(1),t[O[e.readByte(1)]]=function(e){var t={},r=e.readByte(1);128===r?(e.readByte(2),r=e.readByte(1)+5):r+=2;t.size=r,t.objectTypeIndication=e.readByte(1);var n=e.readByte(1);return t.streamType=127&n,t.upStream=2&n,t.bufferSize=e.readByte(3),t.maxBitrate=e.readByte(4),t.avgBitrate=e.readByte(4),t}(e),t[O[e.readByte(1)]]=function(e){var t={},r=e.readByte(1),n=r;128===r?(e.readByte(2),r=e.readByte(1)+5,n=r-5):r+=2;t.size=r;for(var a=[],i=0;i<n;i++)a.push(Number(e.readByte(1)).toString(16).padStart(2,"0"));return t.audioConfig=a.map((function(e){return Number("0x".concat(e))})),t}(e),t}(t))},meta:function(e){var t=new S(e);return{version:t.readByte(1),flags:t.readByte(3)}},mdat:function(e){var t=new S(e);return{data:t.buffer.subarray(t.position,t.buffer.length)}},sdtp:function(e){for(var t=new S(e),r=t.readByte(1),n=t.readByte(3),a=[],i=t.position;i<e.length;i++){var o=t.readByte(1);a.push({isLeading:o>>6,dependsOn:o>>4&3,isDepended:o>>2&3,hasRedundancy:3&o})}return{version:r,flags:n,samplesFlag:a}},thmb:function(e){return{data:new S(e).readByte(e.length)}}},k=["moov","trak","edts","mdia","minf","dinf","stbl"],T=["udta","free"],_=function(){function e(){Object(d.a)(this,e),this.size=0,this.type="",this.start=0,this.box={}}return Object(f.a)(e,[{key:"readSize",value:function(e){this.start=e.position,this.size=e.readByte(4)}},{key:"readType",value:function(e){this.type=e.readType(),1===this.size&&(this.size=e.readByte(4)<<32,this.size|=e.readByte(4))}},{key:"readBody",value:function(e){var t=this;this.data=e.buffer.slice(e.position,this.size+this.start),k.find((function(e){return e===t.type}))||T.find((function(e){return e===t.type}))?this.parserContainerBox():w[this.type]?this.box=Object(u.a)(Object(u.a)({},this.box),w[this.type](this.data)):this.box={},e.position+=this.data.length}},{key:"parserContainerBox",value:function(){for(var t=new S(this.data),r=t.buffer.length;t.position<r;){var n=new e;if(n.readSize(t),n.readType(t),n.readBody(t),"trak"===n.type&&n.box.mdia&&n.box.mdia.hdlr){var a=n.box.mdia.hdlr.handlerType;"vide"===a?this.box.videoTrak=n.box:"soun"===a?this.box.audioTrak=n.box:this.box["".concat(a,"Trak")]=n.box}else this.box[n.type]=n.box}}}]),e}(),A=function(){function e(t){Object(d.a)(this,e),this.buffer=t,this.stream=new S(t),this.mp4BoxTreeObject={},this.init()}return Object(f.a)(e,[{key:"init",value:function(){this.parse()}},{key:"parse",value:function(){for(;this.stream.position<this.buffer.length;){var e=new _;e.readSize(this.stream),e.readType(this.stream),e.readBody(this.stream),this.mp4BoxTreeObject[e.type]=e.box,this.mp4BoxTreeObject[e.type].size=e.size}}}]),e}();function C(e,t){switch(t){case"moov":return x(e);case"mvhd":return function(e){return x(e).mvhd}(e);case"videoTrak":return R(e);case"audioTrak":return P(e);case"videoTkhd":return function(e){return R(e).tkhd}(e);case"audioTkhd":return function(e){return P(e).tkhd}(e);case"videoStbl":return L(e);case"audioStbl":return D(e);case"videoStsc":return function(e){return L(e).stsc}(e);case"audioStsc":return function(e){return D(e).stsc}(e);case"avcC":return function(e){return L(e).stsd.avc1[0].avcC}(e);case"esds":return function(e){return j(e).esds}(e);case"videoStco":return function(e){return L(e).stco}(e);case"audioStco":return function(e){return D(e).stco}(e);case"videoStts":return function(e){return L(e).stts}(e);case"audioStts":return function(e){return D(e).stts}(e);case"audioMdhd":return function(e){return P(e).mdia.mdhd}(e);case"videoMdhd":return function(e){return R(e).mdia.mdhd}(e);case"videoStss":return function(e){return L(e).stss}(e);case"videoStsz":return function(e){return L(e).stsz}(e);case"videoCtts":return function(e){return L(e).ctts}(e);case"audioStsz":return function(e){return D(e).stsz}(e);case"mp4a":return j(e);case"audioElst":case"videoElst":return function(e){return P(e).edts.elst}(e);default:return{}}}function x(e){return e.moov}function R(e){return x(e).videoTrak}function L(e){return R(e).mdia.minf.stbl}function P(e){return x(e).audioTrak}function D(e){return P(e).mdia.minf.stbl}function j(e){return D(e).stsd.mp4a[0]}function M(e,t){for(var r=[],n=e.samples.length,a=0;a<t;a++)0!==a&&a<n&&e.samples[a].firstChunk-1!==e.samples[a-1].firstChunk&&(a--,e.samples[a].firstChunk++),a>=n?(1!==e.samples[n-1]&&(a=a+e.samples[n-1].samplesPerChunk-1),r.push(e.samples[n-1].samplesPerChunk)):r.push(e.samples[a].samplesPerChunk);return r}function I(e,t,r){for(var n=0,a=M(g()(C(e,"video"===r?"videoStsc":"audioStsc")),t),i=0,o=0;t>0&&o<=a.length;o++){if((n+=a[o])===t){i=o+1;break}if(n>t){n-=a[o],i=o;break}}for(var s=[n,t],u=0,l=C(e,"video"===r?"videoStsz":"audioStsz").samples.slice(s[0],s[1]),c=0;c<l.length;c++)u+=l[c].entrySize;var d=C(e,"video"===r?"videoStco":"audioStco");return i>=d.samples.length?Number.MAX_SAFE_INTEGER:d.samples[i].chunkOffset+u}function F(e,t,r,n){for(var a=Object(s.a)(r,2),i=a[0],o=a[1],l=[],c=C(e,n?"videoStts":"audioStts"),d=C(e,n?"videoStsz":"audioStsz"),f=C(e,n?"videoStco":"audioStco"),h=M(g()(C(e,n?"videoStsc":"audioStsc")),o),p=function(e,t){for(var r=[],n=0,a=0;n<t.length&&!(n+a>=e.samples.length);n++)if(r.push(e.samples[n+a].entrySize),1!==t[n]){for(var i=1;i<t[n];i++){var o=e.samples[n+i+a].entrySize+r[n+i-1+a];r.push(o)}a=a+t[n]-1}return r}(d,h),v=[],m=0;m<c.samples.length;m++){var y=c.samples[m],b=y.sampleCount,E=y.sampleDelta;v.push({sampleCount:b+(v[m-1]?v[m-1].sampleCount:0),sampleDelta:E})}for(var S=[],O=0;O<h.length;O++)for(var w=0;w<h[O];w++){var k=f.samples[O];S.push(k?k.chunkOffset:f.samples[f.samples.length-1].chunkOffset)}for(var T=function(e){var r=d.samples[e].entrySize,a=S[e]-t+p[e],i=a-r,o=v.find((function(t,r){return v[r-1]?e+1<=t.sampleCount&&e+1>v[r-1].sampleCount:e+1<=t.sampleCount})).sampleDelta;l.push(Object(u.a)(Object(u.a)({},n&&{compositionTimeOffset:n.length?n[e]:0}),{},{duration:o,size:r,start:i,end:a,bufferStart:t}))},_=i;_<o;_++)T(_);return l}function B(e,t){for(var r=0,n=0,a=0;a<e.samples.length;a++)for(var i=e.samples[a],o=i.sampleCount,s=i.sampleDelta,u=0;u<o;u++){if(!(r<t&&0!==t))return n;n+=s,r++}return n}function N(e,t){var r=[];if(e)r=e.samples.map((function(e){return e.sampleNumber-1}));else for(var n=0;n<=Math.floor(t.samples.length/5);n++)r.push(5*n);return r}var U=function(){function e(t){var r=this;Object(d.a)(this,e),y(this,"updateInterval",(function(e){var t=r.mp4Data,n=t.videoTimescale,a=t.audioTimescale;r.videoInterval="number"===typeof e?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=g()(C(e,"videoStss")),n=g()(C(e,"videoStts")),a=C(e,"videoStsz"),i=B(n,a.samples.length),o=N(r,a),s=o.map((function(e){return B(n,e)})),u={offsetInterVal:[],timeInterVal:[]},l=0;l<s.length;l++){var c=s[l],d=s[l+1]?s[l+1]:i;if(c<=t&&t<d){var f=o[l],h=void 0!==o[l+1]?o[l+1]:a.samples.length;u.offsetInterVal.push(f,h),u.timeInterVal.push(c,d);break}}return u}(r.mp4BoxTree,e*n):function(e,t){var r=g()(C(e,"videoStss")),n=g()(C(e,"videoStts")),a=C(e,"videoStsz"),i=a.samples.length,o=B(n,i),s=N(r,a),u=s.map((function(e){return B(n,e)})),l=[];t+1>s[s.length-1]&&(l={offsetInterVal:[s[s.length-1],i],timeInterVal:[u[s.length-1],o]});for(var c=0;c<s.length;c++)if(s[c]<t+1&&s[c+1]>=t+1){l={offsetInterVal:[s[c],s[c+1]],timeInterVal:[u[c],u[c+1]]};break}return l}(r.mp4BoxTree,r.videoInterval.offsetInterVal[1]),r.audioInterval=function(e,t){for(var r,n=Object(s.a)(t.timeInterVal,2),a=n[0],i=n[1],o=t.offsetInterVal,u=g()(C(e,"audioStts")),l=C(e,"audioMdhd").timescale,c=C(e,"videoMdhd").timescale,d=C(e,"videoStsz"),f=C(e,"audioStsz"),h=a/c*l,p=i/c*l,v=0,m=0,y=C(e,"audioElst").entries[0],b=y.mediaTime,E=y.segmentDuration,S=-1!==b?b:E,O=0,w=0;w<u.samples.length;w++)for(var k=u.samples[w],T=k.sampleCount,_=k.sampleDelta,A=0;A<T;A++)S<=h&&0!==h&&(S+=_,v++),O<=p&&(O+=_,m++);return o[1]===d.samples.length&&(r=f.samples.length),{offsetInterVal:[v,r||m],timeInterVal:[S,O]}}(r.mp4BoxTree,r.videoInterval);var i=r.videoInterval.timeInterVal.map((function(e){return e/n})),o=r.audioInterval.timeInterVal.map((function(e){return e/a}));r.timeRange=[Math.min(i[0],o[0]),Math.max(i[1],o[1])]})),y(this,"isDraining",(function(e){return e>(r.timeRange[1]-r.timeRange[0])/4+r.timeRange[0]})),y(this,"getFragmentPosition",(function(e){r.updateInterval(e),r.bufferStart=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(I(e,t,"video"),I(e,r,"audio"))}(r.mp4BoxTree,r.videoInterval.offsetInterVal[0],r.audioInterval.offsetInterVal[0]);var t=r.getSamples(),n=t.videoSamples,a=t.audioSamples,i=C(r.mp4BoxTree,"videoStco"),o=0;n.length>0&&(o=n[n.length-1].start);var s=o+n[n.length-1].bufferStart===i.samples[i.samples.length-1].chunkOffset;return function(e,t,r,n){var a=e[e.length-1].end,i=0;e.length>0&&(i=e[0].start);var o=0,s=Number.MAX_SAFE_INTEGER;0!==t.length&&(o=t[t.length-1].end,s=t[0].start);var u=n?"":Math.max(a,o)+r;return[Math.min(i,s)+r,u]}(n,a,r.bufferStart,s)})),y(this,"getSamples",(function(){return{videoSamples:function(e,t,r){var n=g()(C(e,"videoCtts")),a=[];if(n)for(var i=0;i<n.samples.length;i++)a.push(n.samples[i].sampleOffset),1!==n.samples[i].sampleCount&&(n.samples[i].sampleCount--,i--);return F(e,t,r,a)}(r.mp4BoxTree,r.bufferStart,r.videoInterval.offsetInterVal),audioSamples:function(e,t,r){return F(e,t,r)}(r.mp4BoxTree,r.bufferStart,r.audioInterval.offsetInterVal)}})),y(this,"getTrackInfo",(function(e){var t=r.getSamples(),n=t.videoSamples,a=t.audioSamples;return{videoTrackInfo:function(e,t){return{samples:e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{buffer:t.slice(e.start,e.end)})})),trackId:1}}(n,e),audioTrackInfo:function(e,t){return{samples:e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{buffer:t.slice(e.start,e.end)})})),trackId:2}}(a,e)}})),this.mp4BoxTree=t,this.mp4Data={},this.init()}return Object(f.a)(e,[{key:"init",value:function(){this.getMP4Data()}},{key:"getMP4Data",value:function(){var e=C(this.mp4BoxTree,"mvhd"),t=e.duration,r=e.timescale,n=C(this.mp4BoxTree,"mp4a"),a=n.channelCount,i=n.sampleRate,o=C(this.mp4BoxTree,"audioMdhd"),s=o.timescale,l=o.duration,c=C(this.mp4BoxTree,"esds").ESDescrTag.DecSpecificDescrTag.audioConfig;if(this.mp4Data={duration:t,timescale:r,channelCount:a,sampleRate:i,audioConfig:c,audioDuration:l,audioTimescale:s},C(this.mp4BoxTree,"videoTrak")){var d=C(this.mp4BoxTree,"videoTkhd"),f=d.width,h=d.height,p=C(this.mp4BoxTree,"videoStsz").samples,v=C(this.mp4BoxTree,"avcC"),m=v.SPS,g=v.PPS,y=C(this.mp4BoxTree,"videoMdhd"),b=y.timescale,E=y.duration;this.mp4Data=Object(u.a)(Object(u.a)({},this.mp4Data),{},{width:f,height:h,SPS:m,PPS:g,videoDuration:E,videoTimescale:b,videoSamplesLength:p.length})}}}]),e}();function z(e,t){return new Uint8Array([255&e,t>>16&255,t>>8&255,255&t])}function V(){for(var e=0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var a=0,i=r;a<i.length;a++){var o=i[a];e+=o.length}for(var s=new Uint8Array(e),u=0,l=0,c=r;l<c.length;l++){var d=c[l];s.set(d,u),u+=d.length}return s}function G(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}function W(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);return new Uint8Array([t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}var H=function(e){return e.charCodeAt()},q=function(e){return new Uint8Array(Array.prototype.map.call(e,H))};function K(e,t){return V(G(t.length+8),q(e),t)}function Y(e){return Q(e)}function X(e){return Q(e)}function Q(e){return new Uint8Array(e)}var Z=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0]);function $(){return K("dinf",K("dref",V(new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,1])),K("url ",[0,0,0,1]))))}function J(e){var t=e.width,r=e.height,n=new Uint8Array([].concat(Object(l.a)(X(6)),[0,1],Object(l.a)(Y(16)),[t>>8&255,255&t,r>>8&255,255&r,0,72,0,0,0,72,0,0],Object(l.a)(X(4)),[0,1,11,87,65,78,71,76,117,118,68,65,78,71],Object(l.a)(Y(20)),[0,24,255,255]));return n=V(n,function(e){var t=e.SPS,r=e.PPS;return K("avcC",new Uint8Array([1,t[1],t[2],t[3],255,225,t.length>>8&255,255&t.length].concat(Object(l.a)(t),[1,r.length>>8&255,255&r.length],Object(l.a)(r))))}(e)),K("avc1",n)}function ee(e){var t=e.channelCount,r=e.sampleRate,n=new Uint8Array([].concat(Object(l.a)(X(6)),[0,1],Object(l.a)(X(8)),[0,t,0,16],Object(l.a)(X(4)),[r>>8&255,255&r,0,0]));return n=V(n,function(e){var t=e.audioConfig,r=void 0===t?[43,146,8,0]:t;return K("esds",new Uint8Array([].concat(Object(l.a)(z(0,0)),[3,23+r.length,0,1,0,4,15+r.length,64,21,0,0,0,0,0,0,0,0,0,0,0,5,r.length],Object(l.a)(r),[6,1,2])))}(e)),K("mp4a",n)}function te(e){var t=V(function(e){var t,r=e.type;return"video"===r?t=J(e):"audio"===r&&(t=ee(e)),K("stsd",t=V(new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,1])),t))}(e),ae(),ne(),re(),ie());return K("stbl",t)}var re=function(){return K("stsz",new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,0,0,0,0,0])))},ne=function(){return K("stsc",new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,0])))},ae=function(){return K("stts",new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,0])))},ie=function(){return K("stco",new Uint8Array([].concat(Object(l.a)(z(0,0)),[0,0,0,0])))};function oe(e){var t="";switch(e.type){case"video":t=K("vmhd",new Uint8Array([].concat(Object(l.a)(z(0,1)),[0,0,0,0,0,0,0,0])));break;case"audio":t=K("smhd",[].concat(Object(l.a)(z(0,0)),[0,0,0,0]))}return K("minf",V(t,$(),te(e)))}function se(e){var t=V(function(e){var t,r;return"video"===e.type?(t=e.videoDuration,r=e.videoTimescale):(t=e.audioDuration,r=e.audioTimescale),K("mdhd",new Uint8Array([].concat(Object(l.a)(z(1,0)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Object(l.a)(G(r)),Object(l.a)(W(t)),[85,196,0,0])))}(e),function(e){var t="",r="";switch(e){case"video":t="vide",r="VideoHandler";break;case"audio":t="soun",r="SoundHandler"}return K("hdlr",new Uint8Array([].concat(Object(l.a)(z(0,0)),Object(l.a)(Y(4)),Object(l.a)(q(t)),Object(l.a)(X(12)),Object(l.a)(q(r)),[0])))}(e.type),oe(e));return K("mdia",t)}function ue(e){var t=V(function(e){var t=e.type,r=e.duration,n=e.width,a=e.height;return K("tkhd",new Uint8Array([].concat(Object(l.a)(z(1,7)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Object(l.a)(G("video"===t?1:2)),Object(l.a)(X(4)),Object(l.a)(W(r)),Object(l.a)(X(8)),[0,0,0,0,0,0,0,0],Object(l.a)(Z),[n>>8&255,255&n,0,0,a>>8&255,255&a,0,0])))}(e),se(e));return K("trak",t)}function le(e){var t=V(function(e){var t=e.duration;return K("mehd",new Uint8Array([].concat(Object(l.a)(z(0,0)),Object(l.a)(G(t)))))}(e),ce(1),ce(2));return K("mvex",t)}function ce(e){return K("trex",new Uint8Array([].concat(Object(l.a)(z(0,0)),Object(l.a)(G(e)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])))}function de(e,t){var r=V(function(e){var t=e.duration,r=e.timescale;return K("mvhd",new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(Object(l.a)(G(r)),Object(l.a)(W(t)),[0,1,0,0,1,0],Object(l.a)(X(10)),Object(l.a)(Z),Object(l.a)(Y(24)),[255,255,255,255])))}(e),ue(Object(u.a)(Object(u.a)({},e),{},{type:t})),le(e));return K("moov",r)}function fe(e){var t=V(function(e){var t=e.trackId;return K("tfhd",new Uint8Array([].concat(Object(l.a)(z(0,0)),Object(l.a)(G(t)))))}(e),function(e){var t=e.baseMediaDecodeTime;return K("tfdt",new Uint8Array([].concat(Object(l.a)(z(1,0)),[0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])))}(e),function(e){var t=e.samples;return K("sdtp",V.apply(void 0,[[0,0,0,0]].concat(Object(l.a)(t.map((function(){return new Uint8Array([16])}))))))}(e),function(e){var t=e.samples,r=e.trackId,n=108+(1===r?16:12)*t.length+t.length;return K("trun",new Uint8Array([0,0,1===r?15:7,1].concat(Object(l.a)(G(t.length)),Object(l.a)(G(n)),Object(l.a)(V.apply(void 0,Object(l.a)(t.map((function(e,t){var n=e.duration,a=e.size,i=e.compositionTimeOffset;return V(G(n),G(a),1===r?0===t?[2,0,0,0]:[1,1,0,0]:[1,0,0,0],1===r?G(i):[])}))))))))}(e));return K("traf",t)}function he(e){var t=V(function(e){var t=e.sequenceNumber;return K("mfhd",new Uint8Array([].concat(Object(l.a)(z(0,0)),Object(l.a)(G(t)))))}(e),fe(e));return K("moof",t)}var pe=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"ftyp",value:function(){return K("ftyp",new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))}},{key:"moov",value:function(e,t){return de(e,t)}},{key:"moof",value:function(t,r){return he(Object.assign({},t,{sequenceNumber:e.sequenceNumber++,baseMediaDecodeTime:r}))}},{key:"mdat",value:function(e){var t=e.samples.map((function(e){return new Uint8Array(e.buffer)}));return K("mdat",V.apply(void 0,Object(l.a)(t)))}}]),e}();y(pe,"sequenceNumber",1);var ve=function(){function e(t,r){var n=this;Object(d.a)(this,e),y(this,"installSrc",(function(){n.mediaSource=new MediaSource,n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen),n.video.src=URL.createObjectURL(n.mediaSource)})),y(this,"handleSourceOpen",(function(){n.sourceBuffers.video=n.mediaSource.addSourceBuffer(n.mimeTypes.video),n.sourceBuffers.audio=n.mediaSource.addSourceBuffer(n.mimeTypes.audio),n.sourceBuffers.video.addEventListener("updateend",(function(){var e=n.videoQueue.shift();e&&"open"===n.mediaSource.readyState&&n.handleAppendBuffer(e,"video"),n.needUpdateTime&&(n.needUpdateTime=!1,n.handleTimeUpdate())})),n.sourceBuffers.audio.addEventListener("updateend",(function(){var e=n.audioQueue.shift();e&&"open"===n.mediaSource.readyState&&n.handleAppendBuffer(e,"audio")}))})),y(this,"handleAppendBuffer",(function(e,t){if("open"===n.mediaSource.readyState)try{n.sourceBuffers[t]&&n.sourceBuffers[t].appendBuffer(e)}catch(r){if(22!==r.code)throw r;n.handleQuotaExceededError(e,t)}else n["".concat(t,"Queue")].push(e)})),y(this,"hasBufferedCache",(function(e){var t=Object(s.a)(n.mp4Probe.timeRange,2),r=t[0],a=t[1],i=e?n.video.currentTime:Math.floor((r+a)/2),o=n.video.buffered;if(o&&o.length>0)for(var u=0;u<o.length;u++)if(i>=o.start(u)&&i<=o.end(u))return!0;return!1})),y(this,"seek",(function(e){E.clear();var t=n.mp4Probe.getFragmentPosition(e),r=Object(s.a)(t,2),a=r[0],i=r[1];n.hasBufferedCache(e)&&!n.qualityChangeFlag||(n.handleReplayCase(),n.loadData(a,i).then((function(t){if(t){var r=n.mp4Probe.getTrackInfo(t),a=r.videoTrackInfo,i=r.audioTrackInfo,o=n.mp4Probe,s=o.videoInterval,u=o.audioInterval,l=s.timeInterVal[0],c=u.timeInterVal[0],d=V(pe.moof(a,l),pe.mdat(a));if(0!==i.samples.length){var f=V(pe.moof(i,c),pe.mdat(i));n.handleAppendBuffer(f,"audio")}n.handleAppendBuffer(d,"video"),e&&(n.needUpdateTime=!0),n.qualityChangeFlag=!1}})))})),y(this,"handleTimeUpdate",(function(){if(n.mp4Probe){var e=n.mp4Probe,t=e.videoInterval,r=(t=void 0===t?[]:t).offsetInterVal,a=void 0===r?[]:r,i=e.mp4Data.videoSamplesLength,o=e.timeRange,s=void 0===o?[]:o;"closed"!==n.mediaSource.readyState&&(a[1]===i&&n.video.currentTime>s[0]?n.destroy():n.shouldFetchNextSegment()&&n.seek())}})),y(this,"handleReplayCase",(function(){"ended"===n.mediaSource.readyState&&(n.sourceBuffers.video.timestampOffset=0)})),y(this,"shouldFetchNextSegment",(function(){return n.handleReplayCase(),!!n.mp4Probe.isDraining(n.video.currentTime)})),y(this,"destroy",(function(){n.mediaSource.removeEventListener("sourceopen",n.handleSourceOpen),URL.revokeObjectURL(n.video.src),"open"!==n.mediaSource.readyState||n.sourceBuffers.video.updating||n.sourceBuffers.audio.updating||n.mediaSource.endOfStream()})),y(this,"handleQuotaExceededError",(function(e,t){for(var r in n.sourceBuffers){var a=n.sourceBuffers[r],i=n.video.currentTime,o=0;a.buffered.length>0&&(o=a.buffered.start(0)+10),n.removeBuffer(o,i-10,r)}n.handleAppendBuffer(e,t)})),this.video=t,this.src=r,this.qualityChangeFlag=!1,this.videoQueue=[],this.audioQueue=[],this.sourceBuffers={video:null,audio:null},this.mimeTypes={video:'video/mp4; codecs="avc1.42E01E"',audio:'audio/mp4; codecs="mp4a.40.2"'},this.installSrc()}return Object(f.a)(e,[{key:"init",value:function(){var e=this;return this.loadData().then((function(e){return new A(new Uint8Array(e)).mp4BoxTreeObject})).then((function(t){var r=t.moov,n=t.ftyp;if(!r){var a=0;for(var i in t)a+=t[i].size;return e.loadData(a,"").then((function(e){var r=new A(new Uint8Array(e)).mp4BoxTreeObject.moov;if(r)return t.moov=r,t}))}var o=r.size+n.size;return o>2e4?e.loadData(n.size,o).then((function(e){var r=new A(new Uint8Array(e)).mp4BoxTreeObject.moov;if(r)return t.moov=r,t})):t})).then((function(t){e.mp4Probe=new U(t),e.mp4BoxTreeObject=t;var r=V(pe.ftyp(),pe.moov(e.mp4Probe.mp4Data,"video")),n=V(pe.ftyp(),pe.moov(e.mp4Probe.mp4Data,"audio"));e.qualityChangeFlag?(e.handleAppendBuffer(r,"video"),e.handleAppendBuffer(n,"audio")):e.mediaSource.addEventListener("sourceopen",(function(){e.handleAppendBuffer(r,"video"),e.handleAppendBuffer(n,"audio")}))}))}},{key:"changeQuality",value:function(e){var t=this;for(var r in this.src=e,this.qualityChangeFlag=!0,this.sourceBuffers){var n=this.sourceBuffers[r],a=n.buffered.length;a>0&&this.removeBuffer(n.buffered.start(0),n.buffered.end(a-1),r)}this.init().then((function(){t.video.currentTime=t.video.currentTime}))}},{key:"removeBuffer",value:function(e,t,r){var n=this.sourceBuffers[r];n.updating&&(v.f.isSafari&&function(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=e.apply(this,r);return a.abort=function(){},a}}(),n.abort());n.remove(e,t)}},{key:"loadData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e4;return new Promise((function(n){new E(e.src,t,r,n)})).catch((function(){}))}}]),e}(),me=v.f.isSafari,ge={pluginName:"griffith-mp4",VideoComponent:function(e){Object(i.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(d.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),y(Object(a.a)(e),"useMSE",!0),y(Object(a.a)(e),"handleTimeUpdate",(function(t){e.useMSE&&e.mse.handleTimeUpdate(),e.props.onTimeUpdate(t)})),y(Object(a.a)(e),"handleVideoSeeking",(function(t){var r=e.video.currentTime,n=e.video.buffered;if(me&&n&&n.length>0){if(r-.1>n.start(0))e.useMSE&&e.mse.seek(e.video.currentTime);else if(r<n.start(0))return void e.handleSafariBug()}else e.useMSE&&e.mse.seek(e.video.currentTime);e.props.onSeeking(t)})),y(Object(a.a)(e),"handlePlay",(function(t){0===e.video.currentTime&&e.useMSE&&e.mse.seek(0);var r=e.props.onPlay;r&&r(t)})),y(Object(a.a)(e),"handleVideoProgress",(function(t){var r=e.video.buffered,n=e.video.currentTime;me&&r&&r.length>0&&n<r.start(0)&&e.handleVideoSeeking(),e.props.onProgress(t)})),y(Object(a.a)(e),"handleSafariBug",(function(){var t=0;e.video.buffered.length>0&&(t=e.video.buffered.start(0)),e.video.currentTime=t+.1})),e}return Object(f.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.mse=new ve(this.video,this.props.src),this.mse.init().then((function(){e.mse.mp4Probe.mp4Data.videoDuration||(e.useMSE=!1,e.video.src=e.props.src)}))}},{key:"componentDidUpdate",value:function(e){this.props.src!==e.src&&this.useMSE&&this.mse.changeQuality(this.props.src)}},{key:"componentWillUnmount",value:function(){this.useMSE&&this.mse.destroy()}},{key:"render",value:function(){var e=this,t=this.props,r=(t.src,t.onRef),a=(t.currentQuality,t.onSeeking,t.onPlay,t.paused,t.onTimeUpdate,t.onProgress,Object(n.a)(t,["src","onRef","currentQuality","onSeeking","onPlay","paused","onTimeUpdate","onProgress"]));return p.a.createElement("video",b({ref:function(t){e.video=t,r(t)}},a,{onSeeking:this.handleVideoSeeking,onTimeUpdate:this.handleTimeUpdate,onPlay:this.handlePlay,onProgress:this.handleVideoProgress}))}}]),r}(h.Component),willHandleSrcChange:!0};t.default=ge},567:function(e,t,r){var n=r(568);e.exports=function(e){return n(e,5)}},568:function(e,t,r){var n=r(369),a=r(574),i=r(370),o=r(576),s=r(585),u=r(588),l=r(589),c=r(590),d=r(592),f=r(382),h=r(593),p=r(250),v=r(598),m=r(599),g=r(604),y=r(226),b=r(287),E=r(606),S=r(204),O=r(608),w=r(286),k={};k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k["[object Function]"]=k["[object WeakMap]"]=!1,e.exports=function e(t,r,T,_,A,C){var x,R=1&r,L=2&r,P=4&r;if(T&&(x=A?T(t,_,A,C):T(t)),void 0!==x)return x;if(!S(t))return t;var D=y(t);if(D){if(x=v(t),!R)return l(t,x)}else{var j=p(t),M="[object Function]"==j||"[object GeneratorFunction]"==j;if(b(t))return u(t,R);if("[object Object]"==j||"[object Arguments]"==j||M&&!A){if(x=L||M?{}:g(t),!R)return L?d(t,s(x,t)):c(t,o(x,t))}else{if(!k[j])return A?t:{};x=m(t,j,R)}}C||(C=new n);var I=C.get(t);if(I)return I;C.set(t,x),O(t)?t.forEach((function(n){x.add(e(n,r,T,n,t,C))})):E(t)&&t.forEach((function(n,a){x.set(a,e(n,r,T,a,t,C))}));var F=P?L?h:f:L?keysIn:w,B=D?void 0:F(t);return a(B||t,(function(n,a){B&&(n=t[a=n]),i(x,a,e(n,r,T,a,t,C))})),x}},574:function(e,t){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},575:function(e,t,r){var n=r(206),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=a},576:function(e,t,r){var n=r(249),a=r(286);e.exports=function(e,t){return e&&n(t,a(t),e)}},585:function(e,t,r){var n=r(249),a=r(377);e.exports=function(e,t){return e&&n(t,a(t),e)}},586:function(e,t,r){var n=r(204),a=r(290),i=r(587),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=a(e),r=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&r.push(s);return r}},587:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},588:function(e,t,r){(function(e){var n=r(190),a=t&&!t.nodeType&&t,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===a?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}}).call(this,r(109)(e))},589:function(e,t){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},590:function(e,t,r){var n=r(249),a=r(291);e.exports=function(e,t){return n(e,a(e),t)}},592:function(e,t,r){var n=r(249),a=r(379);e.exports=function(e,t){return n(e,a(e),t)}},593:function(e,t,r){var n=r(383),a=r(379),i=r(377);e.exports=function(e){return n(e,i,a)}},598:function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},599:function(e,t,r){var n=r(292),a=r(600),i=r(601),o=r(602),s=r(603);e.exports=function(e,t,r){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return a(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return i(e);case"[object Set]":return new u;case"[object Symbol]":return o(e)}}},600:function(e,t,r){var n=r(292);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},601:function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},602:function(e,t,r){var n=r(225),a=n?n.prototype:void 0,i=a?a.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},603:function(e,t,r){var n=r(292);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},604:function(e,t,r){var n=r(605),a=r(381),i=r(290);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:n(a(e))}},605:function(e,t,r){var n=r(204),a=Object.create,i=function(){function e(){}return function(t){if(!n(t))return{};if(a)return a(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=i},606:function(e,t,r){var n=r(607),a=r(288),i=r(289),o=i&&i.isMap,s=o?a(o):n;e.exports=s},607:function(e,t,r){var n=r(250),a=r(203);e.exports=function(e){return a(e)&&"[object Map]"==n(e)}},608:function(e,t,r){var n=r(609),a=r(288),i=r(289),o=i&&i.isSet,s=o?a(o):n;e.exports=s},609:function(e,t,r){var n=r(250),a=r(203);e.exports=function(e){return a(e)&&"[object Set]"==n(e)}},772:function(e,t,r){"use strict";r.r(t);r(186);var n=r(189),a=r(0),i=r.n(a),o=r(38),s=r(97),u={demoAsync:o.a.demoAsync};t.default=Object(s.b)((function(e){return{list:e.demo.list}}),u)((function(e){var t=e.demoAsync,r=e.list;return i.a.createElement("div",{className:"demo"},i.a.createElement(n.a,{type:"primary",onClick:function(){t()}},"\u5f02\u6b65\u52a0\u8f7d"),r.map((function(e){return i.a.createElement("div",{key:e.id},e.name)})))}))},775:function(e,t,r){"use strict";r.r(t);r(340);var n=r(342),a=(r(341),r(344)),i=r(184),o=(r(345),r(420)),s=r(0),u=r.n(s),l=r(509),c=o.a.Search;t.default=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),r=t[0],o=t[1];return u.a.createElement("div",{className:"Selfvideo"},u.a.createElement(c,{placeholder:"\u8bf7\u8f93\u5165\u64ad\u653e\u5730\u5740",allowClear:!0,enterButton:"\u5207\u6362",onSearch:function(e){!function(e){o(e)}(e)}}),u.a.createElement(n.a,{gutter:16},u.a.createElement(a.a,{span:18,offset:3},r&&u.a.createElement(l.a,{id:r,sources:{hd:{play_url:r}},cover:"",duration:1,standalone:!0,autoplay:!0,useMSE:!0,disablePictureInPicture:!0}))))}},784:function(e,t,r){"use strict";r.r(t);var n=r(184),a=(r(345),r(420)),i=r(0),o=r.n(i),s=(r(240),r(34)),u=(r(268),r(251)),l=(r(186),r(189)),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-80 600c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm224 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V360c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"}}]},name:"pause-circle",theme:"filled"},d=r(29),f=r(6),h=r(22),p=r(16),v=r.n(p),m=r(24),g=r(111),y=r(9),b=r(112);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){return"object"===Object(m.a)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Object(m.a)(e.icon)||"function"===typeof e.icon)}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){var n=e[r];switch(r){case"class":t.className=n,delete t.class;break;default:t[r]=n}return t}),{})}function k(e){return Object(g.generate)(e)[0]}function T(e){return e?Array.isArray(e)?e:[e]:[]}var _="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",A=!1;function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var L=function(e){var t,r,n=e.icon,a=e.className,s=e.onClick,u=e.style,l=e.primaryColor,c=e.secondaryColor,d=Object(h.a)(e,["icon","className","onClick","style","primaryColor","secondaryColor"]),f=R;if(l&&(f={primaryColor:l,secondaryColor:c||k(l)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_;Object(i.useEffect)((function(){A||(Object(b.insertCss)(e,{prepend:!0}),A=!0)}),[])}(),t=O(n),r="icon should be icon definiton, but got ".concat(n),Object(y.a)(t,"[@ant-design/icons] ".concat(r)),!O(n))return null;var p=n;return p&&"function"===typeof p.icon&&(p=x(x({},p),{},{icon:p.icon(f.primaryColor,f.secondaryColor)})),function e(t,r,n){return n?o.a.createElement(t.tag,S(S({key:r},w(t.attrs)),n),(t.children||[]).map((function(n,a){return e(n,"".concat(r,"-").concat(t.tag,"-").concat(a))}))):o.a.createElement(t.tag,S({key:r},w(t.attrs)),(t.children||[]).map((function(n,a){return e(n,"".concat(r,"-").concat(t.tag,"-").concat(a))})))}(p.icon,"svg-".concat(p.name),x({className:a,onClick:s,style:u,"data-icon":p.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},d))};L.displayName="IconReact",L.getTwoToneColors=function(){return x({},R)},L.setTwoToneColors=function(e){var t=e.primaryColor,r=e.secondaryColor;R.primaryColor=t,R.secondaryColor=r||k(t),R.calculated=!!r};var P=L;function D(e){var t=T(e),r=Object(d.a)(t,2),n=r[0],a=r[1];return P.setTwoToneColors({primaryColor:n,secondaryColor:a})}D("#1890ff");var j=i.forwardRef((function(e,t){var r=e.className,n=e.icon,a=e.spin,o=e.rotate,s=e.tabIndex,u=e.onClick,l=e.twoToneColor,c=Object(h.a)(e,["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"]),p=v()("anticon",Object(f.a)({},"anticon-".concat(n.name),Boolean(n.name)),r),m=v()({"anticon-spin":!!a||"loading"===n.name}),g=s;void 0===g&&u&&(g=-1);var y=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,b=T(l),E=Object(d.a)(b,2),S=E[0],O=E[1];return i.createElement("span",Object.assign({role:"img","aria-label":n.name},c,{ref:t,tabIndex:g,onClick:u,className:p}),i.createElement(P,{className:m,icon:n,primaryColor:S,secondaryColor:O,style:y}))}));j.displayName="AntdIcon",j.getTwoToneColor=function(){var e=P.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},j.setTwoToneColor=D;var M=j,I=function(e,t){return i.createElement(M,Object.assign({},e,{ref:t,icon:c}))};I.displayName="PauseCircleFilled";var F=i.forwardRef(I),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm144.1 454.9L437.7 677.8a8.02 8.02 0 01-12.7-6.5V353.7a8 8 0 0112.7-6.5L656.1 506a7.9 7.9 0 010 12.9z"}}]},name:"play-circle",theme:"filled"},N=function(e,t){return i.createElement(M,Object.assign({},e,{ref:t,icon:B}))};N.displayName="PlayCircleFilled";var U=i.forwardRef(N),z=function(e){var t=e.src,r=Object(i.useState)(1),a=Object(n.a)(r,2),c=a[0],d=a[1],f=Object(i.useState)(!1),h=Object(n.a)(f,2),p=h[0],v=h[1],m=Object(i.useState)(!1),g=Object(n.a)(m,2),y=g[0],b=g[1],E=Object(i.useState)(100),S=Object(n.a)(E,2),O=S[0],w=S[1],k=Object(i.useState)(0),T=Object(n.a)(k,2),_=T[0],A=T[1],C=Object(i.useState)(0),x=Object(n.a)(C,2),R=x[0],L=x[1],P=Object(i.useRef)(null);Object(i.useEffect)((function(){A(0),L(0),d(1),v(!1)}),[t]);var D=function(e){var t=Math.floor(e%60),r=Math.floor(e/60);return"".concat(r,":").concat(t>=10?t:"0".concat(t))};return o.a.createElement("div",null,t?o.a.createElement(o.a.Fragment,null,o.a.createElement("audio",{src:t,ref:P,preload:"auto",onCanPlay:function(){A(P.current.duration)},onTimeUpdate:function(){L(P.current.currentTime),P.current.currentTime===P.current.duration&&v(!1)}},o.a.createElement("track",{src:t,kind:"captions"})),o.a.createElement("div",null,o.a.createElement("input",{type:"range",step:"0.01",max:_,value:R,onChange:function(){!function(e){var t=e.target.value;L(t),P.current.currentTime=t,t===P.current.duration&&v(!1)}()}})),o.a.createElement("div",null,p?o.a.createElement(l.a,{type:"primary",shape:"round",icon:o.a.createElement(F,null),onClick:function(){P.current.pause(),v(!1)}},"\u6682\u505c"):o.a.createElement(l.a,{type:"primary",shape:"round",icon:o.a.createElement(U,null),onClick:function(){!function(){try{P.current.play(),v(!0)}catch(e){console.log(e)}}()}},"\u64ad\u653e"),o.a.createElement("span",null,D(R)+"/"+D(_))),o.a.createElement("div",null,o.a.createElement(l.a,{type:"primary",shape:"round",onClick:function(){b(!P.current.muted),P.current.muted=!P.current.muted}},"\u9759\u97f3"),o.a.createElement("input",{type:"range",onChange:function(e){!function(e){var t=e.target.value;P.current.volume=t/100,w(t),b(!t)}(e)},value:y?0:O})),o.a.createElement("div",null,o.a.createElement("span",null,"\u500d\u901f\u64ad\u653e\uff1a"),o.a.createElement(u.default.Group,{value:c,onChange:function(e){!function(e){console.log(e.target.value),P.current.playbackRate=e.target.value,d(e.target.value)}(e)}},[1,1.25,1.5,2,2.5,3].map((function(e){return o.a.createElement(u.default.Button,{value:e,key:e},e)}))))):o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{image:s.a.PRESENTED_IMAGE_SIMPLE})))},V=a.a.Search;t.default=function(){var e=Object(i.useState)(null),t=Object(n.a)(e,2),r=t[0],a=t[1];return o.a.createElement("div",{className:"Selfaudio"},o.a.createElement(V,{placeholder:"\u8bf7\u8f93\u5165\u64ad\u653e\u5730\u5740",allowClear:!0,enterButton:"\u5207\u6362",onSearch:function(e){!function(e){a(e)}(e)}}),o.a.createElement(z,{src:r}))}},785:function(e,t,r){"use strict";r.r(t);r(110);var n=r(28),a=(r(108),r(433),r(267),r(268),r(323),r(325)),i=r(0),o=r.n(i),s=r(224),u=r(16),l=r.n(u),c=r(440),d=r.n(c),f=r(308),h=r(41),p=r(93),v=r(36),m=r(256),g=r(332),y=r(339);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e){var t=e.fullscreen,r=e.validRange,n=e.generateConfig,a=e.locale,o=e.prefixCls,s=e.value,u=e.onChange,l=e.divRef,c=n.getYear(s),d=c-10,f=d+20;r&&(d=n.getYear(r[0]),f=n.getYear(r[1])+1);for(var h=a&&"\u5e74"===a.year?"\u5e74":"",p=[],v=d;v<f;v++)p.push({label:"".concat(v).concat(h),value:v});return i.createElement(m.a,{size:t?void 0:"small",options:p,value:c,className:"".concat(o,"-year-select"),onChange:function(e){var t=n.setYear(s,e);if(r){var a=E(r,2),i=a[0],o=a[1],l=n.getYear(t),c=n.getMonth(t);l===n.getYear(o)&&c>n.getMonth(o)&&(t=n.setMonth(t,n.getMonth(o))),l===n.getYear(i)&&c<n.getMonth(i)&&(t=n.setMonth(t,n.getMonth(i)))}u(t)},getPopupContainer:function(){return l.current}})}function w(e){var t=e.prefixCls,r=e.fullscreen,n=e.validRange,a=e.value,o=e.generateConfig,s=e.locale,u=e.onChange,l=e.divRef,c=o.getMonth(a),d=0,f=12;if(n){var h=E(n,2),p=h[0],v=h[1],g=o.getYear(a);o.getYear(v)===g&&(f=o.getMonth(v)),o.getYear(p)===g&&(d=o.getMonth(p))}for(var y=s.shortMonths||o.locale.getShortMonths(s.locale),b=[],S=d;S<f;S+=1)b.push({label:y[S],value:S});return i.createElement(m.a,{size:r?void 0:"small",className:"".concat(t,"-month-select"),value:c,options:b,onChange:function(e){u(o.setMonth(a,e))},getPopupContainer:function(){return l.current}})}function k(e){var t=e.prefixCls,r=e.locale,n=e.mode,a=e.fullscreen,o=e.onModeChange;return i.createElement(g.a,{onChange:function(e){var t=e.target.value;o(t)},value:n,size:a?void 0:"small",className:"".concat(t,"-mode-switch")},i.createElement(y.a,{value:"month"},r.month),i.createElement(y.a,{value:"year"},r.year))}var T=function(e){var t=e.prefixCls,r=e.fullscreen,n=e.mode,a=e.onChange,o=e.onModeChange,s=i.useRef(null),u=b(b({},e),{onChange:a,fullscreen:r,divRef:s});return i.createElement("div",{className:"".concat(t,"-header"),ref:s},i.createElement(O,u),"month"===n&&i.createElement(w,u),i.createElement(k,b({},u,{onModeChange:o})))};function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(u){a=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R=function(e){function t(t,r){return t&&r&&e.getYear(t)===e.getYear(r)}function r(r,n){return t(r,n)&&e.getMonth(r)===e.getMonth(n)}function n(t,n){return r(t,n)&&e.getDate(t)===e.getDate(n)}return function(a){var o=a.prefixCls,u=a.className,c=a.style,m=a.dateFullCellRender,g=a.dateCellRender,y=a.monthFullCellRender,b=a.monthCellRender,E=a.headerRender,S=a.value,O=a.defaultValue,w=a.disabledDate,k=a.mode,x=a.validRange,R=a.fullscreen,L=void 0===R||R,P=a.onChange,D=a.onPanelChange,j=a.onSelect,M=i.useContext(v.b),I=M.getPrefixCls,F=M.direction,B=I("picker",o),N="".concat(B,"-calendar"),U=e.getNow(),z=C(Object(s.a)((function(){return S||e.getNow()}),{defaultValue:O,value:S}),2),V=z[0],G=z[1],W=C(Object(s.a)("month",{value:k}),2),H=W[0],q=W[1],K=i.useMemo((function(){return"year"===H?"month":"date"}),[H]),Y=i.useMemo((function(){return x?function(t){return e.isAfter(x[0],t)||e.isAfter(t,x[1])}:w}),[w,x]),X=function(e,t){D&&D(e,t)},Q=function(e){q(e),X(V,e)},Z=function(e){!function(e){G(e),n(e,V)||(("date"===K&&!r(e,V)||"month"===K&&!t(e,V))&&X(e,H),P&&P(e))}(e),j&&j(e)},$=i.useCallback((function(t){return m?m(t):i.createElement("div",{className:l()("".concat(B,"-cell-inner"),"".concat(N,"-date"),_({},"".concat(N,"-date-today"),n(U,t)))},i.createElement("div",{className:"".concat(N,"-date-value")},d()(String(e.getDate(t)),2,"0")),i.createElement("div",{className:"".concat(N,"-date-content")},g&&g(t)))}),[m,g]),J=i.useCallback((function(t,n){if(y)return y(t);var a=n.shortMonths||e.locale.getShortMonths(n.locale);return i.createElement("div",{className:l()("".concat(B,"-cell-inner"),"".concat(N,"-date"),_({},"".concat(N,"-date-today"),r(U,t)))},i.createElement("div",{className:"".concat(N,"-date-value")},a[e.getMonth(t)]),i.createElement("div",{className:"".concat(N,"-date-content")},b&&b(t)))}),[y,b]);return i.createElement(h.a,{componentName:"Calendar",defaultLocale:function(){var e=a.locale,t=A(A({},p.a),e);return t.lang=A(A({},t.lang),(e||{}).lang),t}},(function(t){var r;return i.createElement("div",{className:l()(N,u,(r={},_(r,"".concat(N,"-full"),L),_(r,"".concat(N,"-mini"),!L),_(r,"".concat(N,"-rtl"),"rtl"===F),r)),style:c},E?E({value:V,type:H,onChange:Z,onTypeChange:Q}):i.createElement(T,{prefixCls:N,value:V,generateConfig:e,mode:H,fullscreen:L,locale:t.lang,validRange:x,onChange:Z,onModeChange:Q}),i.createElement(f.a,{value:V,prefixCls:B,locale:t.lang,generateConfig:e,dateRender:$,monthCellRender:function(e){return J(e,t.lang)},onSelect:Z,mode:K,picker:K,disabledDate:Y,hideHeader:!0}))}))}}(a.a),L=(r(439),r(94)),P=r.n(L),D=r(51),j=r.n(D);r(113);j.a.locale("zh-cn");t.default=function(){var e=j()().month(),t=[["\u5ba1\u8ba1","\u7a0e\u6cd5"],["\u4f1a\u8ba1","\u4f1a\u8ba1"],["","\u5ba1\u8ba1"],["\u5ba1\u8ba1","\u4f1a\u8ba1"],["","\u8d22\u7ba1"],["\u7a0e\u6cd5",""],["","\u4f1a\u8ba1"],["","\u5ba1\u8ba1"],["","\u5ba1\u8ba1"],["\u7ecf\u6d4e\u6cd5",""],["\u4f1a\u8ba1","\u4f1a\u8ba1"],["\u5ba1\u8ba1",""],["\u7a0e\u6cd5","\u8d22\u7ba1"],["","\u7ecf\u6d4e\u6cd5"],["\u7a0e\u6cd5","\u7a0e\u6cd5"],["","\u4f1a\u8ba1"],["","\u5ba1\u8ba1"],["\u8d22\u7ba1","\u4f1a\u8ba1"],["\u7ecf\u6d4e","\u8d22\u7ba1"],["","\u8d22\u7ba1"],["","\u7ecf\u6d4e\u6cd5"],["","\u5ba1\u8ba1"],["","\u5ba1\u8ba1"],["\u4f1a\u8ba1","\u7ecf\u6d4e\u6cd5"],["\u7a0e\u6cd5",""],["","\u8d22\u7ba1"],["","\u4f1a\u8ba1"],["","\u4f1a\u8ba1"],["\u5ba1\u8ba1","\u7a0e\u6cd5"],["","\u5ba1\u8ba1"],["",""]];return o.a.createElement("div",{className:"Kebiao"},o.a.createElement("div",null),o.a.createElement(n.a,{locale:P.a},o.a.createElement(R,{dateFullCellRender:function(r){var n=function(r){var n,a=t[r.get("date")-1];if(r.month()===e)switch(r.weekday()<5){case!0:n=a.map((function(e,t){return{type:e,content:0===t?"12:00~13:00":"19:00~22:00"}}));break;case!1:n=a.map((function(e,t){return{type:e,content:0===t?"09:00~12:00":"19:00~22:00"}}))}return n||[]}(r),a=r.month()===e?r.get("date"):" ";return o.a.createElement("div",{className:"events"},o.a.createElement("div",{className:"date"},a),o.a.createElement("div",{className:"content"},n.map((function(e){return e.type?o.a.createElement("div",{key:e.content},e.type,e.content):null}))),o.a.createElement("div",{className:"footer"}))},disabledDate:function(){return!0},onSelect:function(t){e=t.month()}})))}},786:function(e,t,r){"use strict";r.r(t);r(340);var n=r(342),a=(r(108),r(498),r(0)),i=r.n(a),o=r(16),s=r.n(o),u=r(191),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(){}function h(e){e.preventDefault()}var p=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,v=function(e){return void 0!==e&&null!==e},m=function(e,t){return t===e||"number"===typeof t&&"number"===typeof e&&isNaN(t)&&isNaN(e)},g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.call(r);var n=void 0;n="value"in e?e.value:e.defaultValue,r.state={focused:e.autoFocus};var a=r.getValidValue(r.toNumber(n));return r.state=l({},r.state,{inputValue:r.toPrecisionAsStep(a),value:a}),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.value,n=t.onChange,a=t.max,i=t.min,o=this.state.focused;if(e){if(!m(e.value,r)||!m(e.max,a)||!m(e.min,i)){var s=o?r:this.getValidValue(r),l=void 0;l=this.pressingUpOrDown?s:this.inputting?this.rawInput:this.toPrecisionAsStep(s),this.setState({value:s,inputValue:l})}var c="value"in this.props?r:this.state.value;"max"in this.props&&e.max!==a&&"number"===typeof c&&c>a&&n&&n(a),"min"in this.props&&e.min!==i&&"number"===typeof c&&c<i&&n&&n(i)}try{if(void 0!==this.cursorStart&&this.state.focused)if(this.partRestoreByAfter(this.cursorAfter)||this.state.value===this.props.value){if(this.currentValue===this.input.value)switch(this.lastKeyCode){case u.a.BACKSPACE:this.fixCaret(this.cursorStart-1,this.cursorStart-1);break;case u.a.DELETE:this.fixCaret(this.cursorStart+1,this.cursorStart+1)}}else{var d=this.cursorStart+1;this.cursorAfter?this.lastKeyCode===u.a.BACKSPACE?d=this.cursorStart-1:this.lastKeyCode===u.a.DELETE&&(d=this.cursorStart):d=this.input.value.length,this.fixCaret(d,d)}}catch(f){}this.lastKeyCode=null,this.pressingUpOrDown&&this.props.focusOnUpDown&&this.state.focused&&document.activeElement!==this.input&&this.focus()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"getCurrentValidValue",value:function(e){var t=e;return t=""===t?"":this.isNotCompleteNumber(parseFloat(t,10))?this.state.value:this.getValidValue(t),this.toNumber(t)}},{key:"getRatio",value:function(e){var t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}},{key:"getValueFromEvent",value:function(e){var t=e.target.value.trim().replace(/\u3002/g,".");return v(this.props.decimalSeparator)&&(t=t.replace(this.props.decimalSeparator,".")),t}},{key:"getValidValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.min,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.max,n=parseFloat(e,10);return isNaN(n)?e:(n<t&&(n=t),n>r&&(n=r),n)}},{key:"setValue",value:function(e,t){var r=this.props.precision,n=this.isNotCompleteNumber(parseFloat(e,10))?null:parseFloat(e,10),a=this.state,i=a.value,o=void 0===i?null:i,s=a.inputValue,u=void 0===s?null:s,l="number"===typeof n?n.toFixed(r):""+n,c=n!==o||l!==""+u;return"value"in this.props?this.setState({inputValue:this.toPrecisionAsStep(this.state.value)},t):this.setState({value:n,inputValue:this.toPrecisionAsStep(e)},t),c&&this.props.onChange(n),n}},{key:"getFullNum",value:function(e){return isNaN(e)?e:/e/i.test(String(e))?Number(e).toFixed(18).replace(/\.?0+$/,""):e}},{key:"getPrecision",value:function(e){if(v(this.props.precision))return this.props.precision;var t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);var r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}},{key:"getMaxPrecision",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.props,n=r.precision,a=r.step;if(v(n))return n;var i=this.getPrecision(t),o=this.getPrecision(a),s=this.getPrecision(e);return e?Math.max(s,i+o):i+o}},{key:"getPrecisionFactor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getMaxPrecision(e,t);return Math.pow(10,r)}},{key:"fixCaret",value:function(e,t){if(void 0!==e&&void 0!==t&&this.input&&this.input.value)try{var r=this.input.selectionStart,n=this.input.selectionEnd;e===r&&t===n||this.input.setSelectionRange(e,t)}catch(a){}}},{key:"focus",value:function(){this.input.focus(),this.recordCursorPosition()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"formatWrapper",value:function(e){return this.props.formatter?this.props.formatter(e):e}},{key:"toPrecisionAsStep",value:function(e){if(this.isNotCompleteNumber(e)||""===e)return e;var t=Math.abs(this.getMaxPrecision(e));return isNaN(t)?e.toString():Number(e).toFixed(t)}},{key:"isNotCompleteNumber",value:function(e){return isNaN(e)||""===e||null===e||e&&e.toString().indexOf(".")===e.toString().length-1}},{key:"toNumber",value:function(e){var t=this.props.precision,r=this.state.focused,n=e&&e.length>16&&r;return this.isNotCompleteNumber(e)||n?e:v(t)?Math.round(e*Math.pow(10,t))/Math.pow(10,t):Number(e)}},{key:"upStep",value:function(e,t){var r=this.props.step,n=this.getPrecisionFactor(e,t),a=Math.abs(this.getMaxPrecision(e,t)),i=((n*e+n*r*t)/n).toFixed(a);return this.toNumber(i)}},{key:"downStep",value:function(e,t){var r=this.props.step,n=this.getPrecisionFactor(e,t),a=Math.abs(this.getMaxPrecision(e,t)),i=((n*e-n*r*t)/n).toFixed(a);return this.toNumber(i)}},{key:"step",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments[3];this.stop(),t&&(t.persist(),t.preventDefault());var i=this.props;if(!i.disabled){var o=this.getCurrentValidValue(this.state.inputValue)||0;if(!this.isNotCompleteNumber(o)){var s=this[e+"Step"](o,n),u=s>i.max||s<i.min;s>i.max?s=i.max:s<i.min&&(s=i.min),this.setValue(s),this.setState({focused:!0},(function(){r.pressingUpOrDown=!1})),u||(this.autoStepTimer=setTimeout((function(){r[e](t,n,!0)}),a?200:600))}}}},{key:"render",value:function(){var e,t=this.props,r=t.prefixCls,n=t.disabled,a=t.readOnly,o=t.useTouch,u=t.autoComplete,c=t.upHandler,p=t.downHandler,v=t.className,m=t.max,g=t.min,y=t.style,b=t.title,E=t.onMouseEnter,S=t.onMouseLeave,O=t.onMouseOver,w=t.onMouseOut,k=t.required,T=t.onClick,_=t.tabIndex,A=t.type,C=t.placeholder,x=t.id,R=t.inputMode,L=t.pattern,P=t.step,D=t.maxLength,j=t.autoFocus,M=t.name,I=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["prefixCls","disabled","readOnly","useTouch","autoComplete","upHandler","downHandler","className","max","min","style","title","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","required","onClick","tabIndex","type","placeholder","id","inputMode","pattern","step","maxLength","autoFocus","name"]),F=this.state,B=F.value,N=F.focused,U=s()(r,(d(e={},v,!!v),d(e,r+"-disabled",n),d(e,r+"-focused",N),e)),z={};Object.keys(I).forEach((function(e){"data-"!==e.substr(0,5)&&"aria-"!==e.substr(0,5)&&"role"!==e||(z[e]=I[e])}));var V=!a&&!n,G=this.getInputDisplayValue(),W=(B||0===B)&&(isNaN(B)||Number(B)>=m)||n||a,H=(B||0===B)&&(isNaN(B)||Number(B)<=g)||n||a,q=s()(r+"-handler",r+"-handler-up",d({},r+"-handler-up-disabled",W)),K=s()(r+"-handler",r+"-handler-down",d({},r+"-handler-down-disabled",H)),Y=o?{onTouchStart:W?f:this.up,onTouchEnd:this.stop}:{onMouseDown:W?f:this.up,onMouseUp:this.stop,onMouseLeave:this.stop},X=o?{onTouchStart:H?f:this.down,onTouchEnd:this.stop}:{onMouseDown:H?f:this.down,onMouseUp:this.stop,onMouseLeave:this.stop};return i.a.createElement("div",{className:U,style:y,title:b,onMouseEnter:E,onMouseLeave:S,onMouseOver:O,onMouseOut:w,onFocus:function(){return null},onBlur:function(){return null}},i.a.createElement("div",{className:r+"-handler-wrap"},i.a.createElement("span",l({unselectable:"unselectable"},Y,{role:"button","aria-label":"Increase Value","aria-disabled":W,className:q}),c||i.a.createElement("span",{unselectable:"unselectable",className:r+"-handler-up-inner",onClick:h})),i.a.createElement("span",l({unselectable:"unselectable"},X,{role:"button","aria-label":"Decrease Value","aria-disabled":H,className:K}),p||i.a.createElement("span",{unselectable:"unselectable",className:r+"-handler-down-inner",onClick:h}))),i.a.createElement("div",{className:r+"-input-wrap"},i.a.createElement("input",l({role:"spinbutton","aria-valuemin":g,"aria-valuemax":m,"aria-valuenow":B,required:k,type:A,placeholder:C,onClick:T,onMouseUp:this.onMouseUp,className:r+"-input",tabIndex:_,autoComplete:u,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:V?this.onKeyDown:f,onKeyUp:V?this.onKeyUp:f,autoFocus:j,maxLength:D,readOnly:a,disabled:n,max:m,min:g,step:P,name:M,title:b,id:x,onChange:this.onChange,ref:this.saveInput,value:this.getFullNum(G),pattern:L,inputMode:R},z))))}}]),t}(i.a.Component);g.defaultProps={focusOnUpDown:!0,useTouch:!1,prefixCls:"rc-input-number",min:-p,step:1,style:{},onChange:f,onKeyDown:f,onPressEnter:f,onFocus:f,onBlur:f,parser:function(e){return e.replace(/[^\w.-]+/g,"")},required:!1,autoComplete:"off"};var y=function(){var e=this;this.onKeyDown=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=e.props,o=i.onKeyDown,s=i.onPressEnter;if(t.keyCode===u.a.UP){var l=e.getRatio(t);e.up(t,l),e.stop()}else if(t.keyCode===u.a.DOWN){var c=e.getRatio(t);e.down(t,c),e.stop()}else t.keyCode===u.a.ENTER&&s&&s(t);e.recordCursorPosition(),e.lastKeyCode=t.keyCode,o&&o.apply(void 0,[t].concat(n))},this.onKeyUp=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=e.props.onKeyUp;e.stop(),e.recordCursorPosition(),i&&i.apply(void 0,[t].concat(n))},this.onChange=function(t){var r=e.props.onChange;e.state.focused&&(e.inputting=!0),e.rawInput=e.props.parser(e.getValueFromEvent(t)),e.setState({inputValue:e.rawInput}),r(e.toNumber(e.rawInput))},this.onMouseUp=function(){var t=e.props.onMouseUp;e.recordCursorPosition(),t&&t.apply(void 0,arguments)},this.onFocus=function(){var t;e.setState({focused:!0}),(t=e.props).onFocus.apply(t,arguments)},this.onBlur=function(){var t=e.props.onBlur;e.inputting=!1,e.setState({focused:!1});var r=e.getCurrentValidValue(e.state.inputValue),n=e.setValue(r);if(t){var a=e.input.value,i=Number(e.getInputDisplayValue({focus:!1,value:n}));e.input.value=i,t.apply(void 0,arguments),e.input.value=a}},this.getInputDisplayValue=function(t){var r=t||e.state,n=r.focused,a=r.inputValue,i=r.value,o=void 0;void 0!==(o=n?a:e.toPrecisionAsStep(i))&&null!==o||(o="");var s=e.formatWrapper(o);return v(e.props.decimalSeparator)&&(s=s.toString().replace(".",e.props.decimalSeparator)),s},this.recordCursorPosition=function(){try{e.cursorStart=e.input.selectionStart,e.cursorEnd=e.input.selectionEnd,e.currentValue=e.input.value,e.cursorBefore=e.input.value.substring(0,e.cursorStart),e.cursorAfter=e.input.value.substring(e.cursorEnd)}catch(t){}},this.restoreByAfter=function(t){if(void 0===t)return!1;var r=e.input.value,n=r.lastIndexOf(t);if(-1===n)return!1;var a=e.cursorBefore.length;return e.lastKeyCode===u.a.DELETE&&e.cursorBefore.charAt(a-1)===t[0]?(e.fixCaret(a,a),!0):n+t.length===r.length&&(e.fixCaret(n,n),!0)},this.partRestoreByAfter=function(t){return void 0!==t&&Array.prototype.some.call(t,(function(r,n){var a=t.substring(n);return e.restoreByAfter(a)}))},this.stop=function(){e.autoStepTimer&&clearTimeout(e.autoStepTimer)},this.down=function(t,r,n){e.pressingUpOrDown=!0,e.step("down",t,r,n)},this.up=function(t,r,n){e.pressingUpOrDown=!0,e.step("up",t,r,n)},this.saveInput=function(t){e.input=t}},b=g,E=r(499),S=r.n(E),O=r(272),w=r.n(O),k=r(36),T=r(61);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},x=a.forwardRef((function(e,t){var r=function(r){var n=r.getPrefixCls,i=r.direction,o=e.className,u=e.size,l=e.prefixCls,c=C(e,["className","size","prefixCls"]),d=n("input-number",l),f=a.createElement(S.a,{className:"".concat(d,"-handler-up-inner")}),h=a.createElement(w.a,{className:"".concat(d,"-handler-down-inner")});return a.createElement(T.b.Consumer,null,(function(e){var r,n=u||e,l=s()((A(r={},"".concat(d,"-lg"),"large"===n),A(r,"".concat(d,"-sm"),"small"===n),A(r,"".concat(d,"-rtl"),"rtl"===i),r),o);return a.createElement(b,_({ref:t,className:l,upHandler:f,downHandler:h,prefixCls:d},c))}))};return a.createElement(k.a,null,r)}));x.defaultProps={step:1};var R=x,L=(r(186),r(189)),P=(r(341),r(344)),D=r(184),j=(r(267),r(256)),M=r(242),I=r(243),F=function(){function e(t,r){var n=r.drawType,a=void 0===n?"line":n,i=r.drawColor,o=void 0===i?"#FF4500":i,s=r.lineWidth,u=void 0===s?5:s,l=r.sides,c=void 0===l?3:l,d=r.allowCallback,f=r.moveCallback;Object(M.a)(this,e),this.canvas=t,this.width=t.width,this.height=t.height,this.paint=t.getContext("2d"),this.isClickCanvas=!1,this.isMoveCanvas=!1,this.imgData=[],this.index=0,this.x=0,this.y=0,this.last=[this.x,this.y],this.drawType=a,this.drawColor=o,this.lineWidth=u,this.sides=c,this.allowCallback=d||function(){},this.moveCallback=f||function(){},this.bindMousemove=function(){},this.bindMousedown=function(){},this.bindMouseup=function(){},this.init()}return Object(I.a)(e,[{key:"init",value:function(){this.paint.fillStyle="#18443D",this.paint.fillRect(0,0,this.width,this.height),this.gatherImage(),this.bindMousemove=this.onmousemove.bind(this),this.bindMousedown=this.onmousedown.bind(this),this.bindMouseup=this.onmouseup.bind(this),this.canvas.addEventListener("mousedown",this.bindMousedown),document.addEventListener("mouseup",this.bindMouseup)}},{key:"onmousedown",value:function(e){this.isClickCanvas=!0,this.x=e.offsetX,this.y=e.offsetY,this.last=[this.x,this.y],this.canvas.addEventListener("mousemove",this.bindMousemove)}},{key:"snapshot",value:function(e,t){var r=new Image;r.src=this.canvas.toDataURL({format:"image/png",quality:1,width:14e3,height:4e3});var n=r.src.replace(/^data:image\/[^;]/,"data:application/octet-stream");e.download="".concat(t,".png"),e.href=n,e.click()}},{key:"gatherImage",value:function(){this.imgData=this.imgData.slice(0,this.index+1);var e=this.paint.getImageData(0,0,this.width,this.height);this.imgData.push(e),this.index=this.imgData.length-1,this.allowCallback(this.index>0,this.index<this.imgData.length-1)}},{key:"reSetImage",value:function(){this.paint.clearRect(0,0,this.width,this.height),this.imgData.length>=1&&this.paint.putImageData(this.imgData[this.index],0,0)}},{key:"onmousemove",value:function(e){this.isMoveCanvas=!0;var t=e.offsetX,r=e.offsetY,n=t-this.x,a=r-this.y,i=[t,r];switch(this.drawType){case"line":var o=[this.last,i,this.lineWidth,this.drawColor];this.moveCallback.apply(this,["line"].concat(o)),this.line.apply(this,o);break;case"rect":var s=[this.x,this.y,n,a,this.lineWidth,this.drawColor];this.moveCallback.apply(this,["rect"].concat(s)),this.rect.apply(this,s);break;case"polygon":var u=[this.x,this.y,this.sides,n,a,this.lineWidth,this.drawColor];this.moveCallback.apply(this,["polygon"].concat(u)),this.polygon.apply(this,u);break;case"arc":var l=[this.x,this.y,n,a,this.lineWidth,this.drawColor];this.moveCallback.apply(this,["arc"].concat(l)),this.arc.apply(this,l);break;case"eraser":var c=[t,r,this.width,this.height,this.lineWidth];this.moveCallback.apply(this,["eraser"].concat(c)),this.eraser.apply(this,c);break;case"ellipse":var d=[this.x,this.y,Math.abs(n),Math.abs(a),this.lineWidth,this.drawColor];this.moveCallback.apply(this,["ellipse"].concat(d)),this.ellipse.apply(this,d)}}},{key:"onmouseup",value:function(){this.isClickCanvas&&(this.isClickCanvas=!1,this.canvas.removeEventListener("mousemove",this.bindMousemove),this.isMoveCanvas&&(this.isMoveCanvas=!1,this.moveCallback("gatherImage"),this.gatherImage()))}},{key:"line",value:function(e,t,r,n){this.paint.beginPath(),this.paint.lineCap="round",this.paint.lineJoin="round",this.paint.lineWidth=r,this.paint.strokeStyle=n,this.paint.moveTo(e[0],e[1]),this.paint.lineTo(t[0],t[1]),this.paint.closePath(),this.paint.stroke(),this.last=t}},{key:"rect",value:function(e,t,r,n,a,i){this.reSetImage(),this.paint.lineWidth=a,this.paint.strokeStyle=i,this.paint.strokeRect(e,t,r,n)}},{key:"polygon",value:function(e,t,r,n,a,i,o){this.reSetImage();var s=r,u=360/s,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));this.paint.beginPath(),this.paint.strokeStyle=o,this.paint.lineWidth=i;for(var c=0;c<s;c++)this.paint.lineTo(e+Math.sin((c*u+45)*Math.PI/180)*l,t+Math.cos((c*u+45)*Math.PI/180)*l);this.paint.closePath(),this.paint.stroke()}},{key:"arc",value:function(e,t,r,n,a,i){this.reSetImage(),this.paint.beginPath(),this.paint.lineWidth=a;var o=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));this.paint.arc(e,t,o,0,2*Math.PI,!1),this.paint.strokeStyle=i,this.paint.closePath(),this.paint.stroke()}},{key:"ellipse",value:function(e,t,r,n,a,i){this.reSetImage(),this.paint.beginPath(),this.paint.lineWidth=a,this.paint.ellipse(e,t,r,n,0*Math.PI/180,0,2*Math.PI),this.paint.strokeStyle=i,this.paint.closePath(),this.paint.stroke()}},{key:"eraser",value:function(e,t,r,n,a){this.paint.save(),this.paint.beginPath(),this.paint.arc(e,t,2*a,0,2*Math.PI),this.paint.closePath(),this.paint.clip(),this.paint.fillStyle="#18443D",this.paint.fillRect(0,0,r,n),this.paint.restore()}},{key:"cancel",value:function(){--this.index<0?this.index=0:(this.allowCallback(this.index>0,this.index<this.imgData.length-1),this.paint.putImageData(this.imgData[this.index],0,0))}},{key:"go",value:function(){++this.index>this.imgData.length-1?this.index=this.imgData.length-1:(this.allowCallback(this.index>0,this.index<this.imgData.length-1),this.paint.putImageData(this.imgData[this.index],0,0))}},{key:"clear",value:function(){this.imgData=[],this.paint.clearRect(0,0,this.width,this.height),this.paint.fillStyle="#18443D",this.paint.fillRect(0,0,this.width,this.height),this.gatherImage()}},{key:"changeWay",value:function(e){var t=e.type,r=e.color,n=e.lineWidth,a=e.sides;this.drawType="color"!==t&&t||this.drawType,this.drawColor=r||this.drawColor,this.lineWidth=n||this.lineWidth,this.sides=a||this.sides}},{key:"destroy",value:function(){this.clear(),this.canvas.removeEventListener("mousedown",this.bindMousedown),document.removeEventListener("mouseup",this.bindMouseup),this.canvas=null,this.paint=null}}]),e}(),B=j.a.Option;t.default=function(){var e=Object(a.useState)("rgba(19, 206, 102, 1)"),t=Object(D.a)(e,2),r=t[0],o=t[1],s=Object(a.useState)(5),u=Object(D.a)(s,2),l=u[0],c=u[1],d=Object(a.useState)(null),f=Object(D.a)(d,2),h=f[0],p=f[1],v=Object(a.useState)(!1),m=Object(D.a)(v,2),g=m[0],y=m[1],b=Object(a.useState)(!1),E=Object(D.a)(b,2),S=E[0],O=E[1],w=function(e,t){y(!e),O(!t)},k=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.log(t)};return Object(a.useEffect)((function(){var e=document.querySelector("#canvas"),t=new F(e,{allowCallback:w,moveCallback:k});p(t)}),[]),i.a.createElement("div",null,i.a.createElement(n.a,null,i.a.createElement(P.a,{span:24,className:"center"},i.a.createElement("canvas",{id:"canvas",width:"900",height:"600"})),i.a.createElement(P.a,{span:24},[{name:"\u5706",type:"arc"},{name:"\u7ebf\u6761",type:"line"},{name:"\u692d\u5706",type:"ellipse"},{name:"\u77e9\u5f62",type:"rect"},{name:"\u591a\u8fb9\u5f62",type:"polygon"},{name:"\u6a61\u76ae\u64e6",type:"eraser"},{name:"\u64a4\u56de",type:"cancel"},{name:"\u524d\u8fdb",type:"go"},{name:"\u6e05\u5c4f",type:"clear"}].map((function(e){return i.a.createElement(L.a,{key:e.type,onClick:function(){!function(e){if(["cancel","go","clear"].includes(e.type))return k(e.type),void h[e.type]();h.changeWay({type:e.type}),["color","lineWidth"].includes(e.type)}(e)},disabled:"cancel"===e.type&&g||"go"===e.type&&S},e.name)})),i.a.createElement(j.a,{defaultValue:r,style:{width:250},onChange:function(e){h.changeWay({color:e}),o(e)}},i.a.createElement(B,{value:"rgba(19, 206, 102, 1)"},"rgba(19, 206, 102, 1)"),i.a.createElement(B,{value:"rgba(180, 238, 180, 1)"},"rgba(180, 238, 180, 1)"),i.a.createElement(B,{value:"rgba(148, 0, 211, 1)"},"rgba(148, 0, 211, 1)")),i.a.createElement(j.a,{defaultValue:l,style:{width:120},onChange:function(e){h.changeWay({lineWidth:e}),c(e)}},i.a.createElement(B,{value:"2"},"2"),i.a.createElement(B,{value:"5"},"5"),i.a.createElement(B,{value:"8"},"8")),i.a.createElement(R,{min:3,max:10,defaultValue:3,onChange:function(e){h.changeWay({sides:e})}}))))}}}]);
//# sourceMappingURL=Demo.41d0c93f.chunk.js.map